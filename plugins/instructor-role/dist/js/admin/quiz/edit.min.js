(()=>{"use strict";const t=window.wp.data,o=jQuery,e=window.learndash||{};e.instructorRole=e.instructorRole||{},e.instructorRole.quiz=e.instructorRole.quiz||{},e.instructorRole.quiz.edit=e.instructorRole.quiz.edit||{};(new class{init(){document.addEventListener("DOMContentLoaded",(()=>{this.actionsDropdown=document.querySelector(".ld-global-header-new-settings .ld-actions"),this.loadFrontendEditorButtonNotice(),this.actionsDropdown.addEventListener("click",(()=>{this.dismissFrontendEditorButtonNotice()})),this.actionsDropdown.addEventListener("touch",(()=>{this.dismissFrontendEditorButtonNotice()}))})),window.addEventListener("resize",(()=>{this.loadFrontendEditorButtonNotice()})),window.addEventListener("orientationchange",(()=>{this.loadFrontendEditorButtonNotice()}))}waitForEditorReady(){return new Promise((o=>{const e=(0,t.select)("core/editor");if(!e||"function"!=typeof e.__unstableIsEditorReady){let t;const e=setInterval((()=>{t=document.querySelector(".ld-tabs-ready"),t&&(clearInterval(e),o())}),10);return}const n=(0,t.subscribe)((()=>{e.__unstableIsEditorReady()&&(n(),window.requestAnimationFrame((()=>{o()})))}))})).then((()=>{document.body.classList.add("ir-editor-ready")}))}loadFrontendEditorButtonNotice(){e.instructorRole.quiz.edit?.frontendQuizEditorButtonMoved&&this.waitForEditorReady().then((()=>{this.actionsDropdown&&!(0,t.select)("core/preferences").get("learndash/instructor-role/pointer","frontend-editor-button-moved")&&(void 0!==o(this.actionsDropdown).data("pointer")&&(o(this.actionsDropdown).pointer("destroy"),o(this.actionsDropdown).data("pointer",null)),o(this.actionsDropdown).pointer({pointerClass:"wp-pointer ir-pointer ir-pointer--within-ld-header",content:e.instructorRole.quiz.edit.frontendQuizEditorButtonMoved,position:{edge:"top"},show:(t,e)=>{o(e.pointer).addClass("ir-pointer--initialized"),o(e.element).data("pointer",e.pointer)},close:()=>{(0,t.dispatch)("core/preferences").set("learndash/instructor-role/pointer","frontend-editor-button-moved",Date.now())}}).pointer("open"))}))}dismissFrontendEditorButtonNotice(){void 0!==o(this.actionsDropdown).data("pointer")&&o(this.actionsDropdown).pointer("close")}}).init()})();