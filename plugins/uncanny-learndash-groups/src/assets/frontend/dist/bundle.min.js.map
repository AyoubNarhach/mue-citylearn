{"version":3,"file":"bundle.min.js","mappings":"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","sources":["webpack://uncanny-groups-frontend/./src/js/define-main-object.js","webpack://uncanny-groups-frontend/./src/js/front.js","webpack://uncanny-groups-frontend/./src/js/learndash_template_script.js","webpack://uncanny-groups-frontend/./src/js/ulgm-assignments.js","webpack://uncanny-groups-frontend/./src/js/ulgm-essays.js","webpack://uncanny-groups-frontend/./src/js/ulgm-reporting.js","webpack://uncanny-groups-frontend/./src/js/ulgm-rest-forms.js","webpack://uncanny-groups-frontend/./node_modules/css-element-queries/src/ElementQueries.js","webpack://uncanny-groups-frontend/./node_modules/css-element-queries/src/ResizeSensor.js","webpack://uncanny-groups-frontend/webpack/bootstrap","webpack://uncanny-groups-frontend/webpack/runtime/compat get default export","webpack://uncanny-groups-frontend/webpack/runtime/define property getters","webpack://uncanny-groups-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://uncanny-groups-frontend/external var \"jQuery\"","webpack://uncanny-groups-frontend/./src/js/utilities.js","webpack://uncanny-groups-frontend/./src/js/uncanny-owl-groups-ui.js","webpack://uncanny-groups-frontend/./src/js/group-management.js","webpack://uncanny-groups-frontend/./src/js/group-course-report.js","webpack://uncanny-groups-frontend/./src/js/course-dashboard.js","webpack://uncanny-groups-frontend/./src/js/manage-progress.js","webpack://uncanny-groups-frontend/./src/js/buy-courses.js","webpack://uncanny-groups-frontend/./src/js/create-group.js","webpack://uncanny-groups-frontend/./src/index.js"],"sourcesContent":["window.ulgmGroupManagement = {};","\njQuery(function($){\n\tvar accountSwitch = $('input#createaccount');\n\tif(accountSwitch.length){\n\t\taccountSwitch.attr( 'checked', true ).parent().hide();\n\t\t$( '.create-account' ).show();\n\t\taccountSwitch.parent().hide();\n\t}\n});\n","if (typeof flip_expand_collapse == 'undefined') {\n\tfunction flip_expand_collapse(what, id) {\n\n\t    if (jQuery( what + '-' + id + ' .list_arrow.flippable' ).hasClass( 'expand' ) ) {\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).removeClass( 'expand' );\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).addClass( 'collapse' );\n\t        jQuery( what + '-' + id + ' .flip' ).slideUp();\n\t    } else {\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).removeClass( 'collapse' );\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).addClass( 'expand' );\n\t        jQuery( what + '-' + id + ' .flip' ).slideDown();\n\t    }\n\t    return false;\n\t}\n}\n\nif (typeof flip_expand_all == 'undefined') {\n\tfunction flip_expand_all(what) {\n\t    jQuery( what + ' .list_arrow.flippable' ).removeClass( 'collapse' );\n\t    jQuery( what + ' .list_arrow.flippable' ).addClass( 'expand' );\n\t    jQuery( what + ' .flip' ).slideDown();\n\t    return false;\n\t}\n}\n\nif (typeof flip_collapse_all == 'undefined') {\n\tfunction flip_collapse_all(what) {\n\t    jQuery( what + ' .list_arrow.flippable' ).removeClass( 'expand' );\n\t    jQuery( what + ' .list_arrow.flippable' ).addClass( 'collapse' );\n\t    jQuery( what + ' .flip' ).slideUp();\n\t    return false;\n\t}\n}\n\nString.prototype.toHHMMSS = function() {\n    sec_numb = parseInt( this, 10 );\n    var hours = Math.floor( sec_numb / 3600 );\n    var minutes = Math.floor( ( sec_numb - ( hours * 3600 ) ) / 60 );\n    var seconds = sec_numb - ( hours * 3600 ) - ( minutes * 60 );\n    if ( hours < 10 ) {\n        hours = '0' + hours;\n    }\n    if ( minutes < 10 ) {\n        minutes = '0' + minutes;\n    }\n    if ( seconds < 10 ) {\n        seconds = '0' + seconds;\n    }\n    var time = hours + ':' + minutes + ':' + seconds;\n    return time;\n}\n\nfunction learndash_timer() {\n    document.getElementById( 'learndash_mark_complete_button' ).disabled = true;\n    learndash_forced_lesson_time = learndash_forced_lesson_time - 1;\n    document.getElementById( 'learndash_timer' ).innerHTML = learndash_forced_lesson_time.toString().toHHMMSS();\n    if ( learndash_forced_lesson_time <= 0 ) {\n        clearInterval( learndash_timer_var );\n        document.getElementById( 'learndash_mark_complete_button' ).disabled = false;\n        document.getElementById( 'learndash_timer' ).innerHTML = '';\n    }\n}\n\njQuery( function() {\n    function force_max_12px_font_size() {\n        var f1 = jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a' ).css( 'font-size' );\n        var f2 = jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a span' ).css( 'font-size' );\n        if ( f1 != undefined && f1.replace( 'px', '' ) > 12 || f2 != undefined && f2.replace( 'px', '' ) > 12 ) {\n            jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a, #course_navigation .learndash_navigation_lesson_topics_list a span' ).css( 'font-size', 12 );\n        }\n    }\n    force_max_12px_font_size();\n});\n\njQuery(document).ready(function() {\n\t\n\tif ( jQuery( '#learndash_timer' ).length ) {\n\t\tvar timer_el \t\t= jQuery( '#learndash_timer' );\n\t\tvar timer_seconds \t= timer_el.attr('data-timer-seconds');\n\n\t\tvar timer_button_el = jQuery( timer_el.attr('data-button') );\n\n\t\tif ( ( typeof timer_seconds !== 'undefined' ) && ( typeof timer_button_el !== 'undefined' ) ) {\n\n\t        timer_button_el.attr('disabled', true);\n\t\t\t\n\t\t\ttimer_seconds = parseInt( timer_seconds );\n\n\n\t\t\tvar cookie_key \t\t= timer_el.attr('data-cookie-key');\n\t\t\tif (typeof cookie_key !== 'undefined') {\n\t\t\t\tvar cookie_name = 'learndash_timer_cookie_'+cookie_key;\n\t\t\t} else {\n\t\t\t\tvar cookie_name = 'learndash_timer_cookie';\n\t\t\t}\n\t\t\tcookie_timer_seconds = jQuery.cookie(cookie_name);\n\t\t\tif (typeof cookie_timer_seconds !== 'undefined') {\n\t\t\t\ttimer_seconds = parseInt( cookie_timer_seconds );\n\t\t\t}\n\t\t\tjQuery.removeCookie( cookie_name );\n\t\t\t\n\t\t\tif ( timer_seconds >= 1 ) {\n\t\t\t\tvar learndash_timer_var = setInterval( function() {\n\t\t\t\t    timer_seconds = timer_seconds - 1;\n\t\t\t\t\n\t\t\t\t\tvar time_display = timer_seconds.toString().toHHMMSS();\n\t\t\t\t    timer_el.html(time_display);\n\t\t\t\t    if ( timer_seconds <= 0 ) {\n\t\t\t\t\t\t\n\t\t\t\t        clearInterval( learndash_timer_var );\n\t\t\t\t        timer_button_el.attr('disabled', false);\n\t\t\t\t        timer_el.html('');\n\t\t\t\t\t\tjQuery.cookie(cookie_name, 0);\n\t\t\t\t\t\t//jQuery.removeCookie( cookie_name );\n\t\t\t\t\t\t\n\t\t\t\t\t\ttimer_button_el.trigger('learndash-time-finished');\n\t\t\t\t    }\n\t\t\t\t\t// Store the timer state (value) into a cookie. This is done if the page reloads the student can resume\n\t\t\t\t\t// the time instead of restarting.\n\t\t\t\t\tjQuery.cookie(cookie_name, timer_seconds);\n\t\t\t\t},1000);\t\n\t\t\t} else {\n\t\t        timer_button_el.attr('disabled', false);\n\t\t        timer_el.html('');\n\t\t\t\tjQuery.cookie(cookie_name, 0);\n\t\t\t\t//jQuery.removeCookie( cookie_name );\n\t\t\t}\n\t\t}\n\t}\n});\n\n\njQuery(document).ready(function(){\n\n\tif (typeof sfwd_data !== 'undefined') {\n\t\tif ( typeof sfwd_data.json !== 'undefined' ) {\n\t\t\tsfwd_data = sfwd_data.json.replace(/&quot;/g, '\"');\n\t\t\tsfwd_data = jQuery.parseJSON( sfwd_data );\n\t\t}\n\t}\n\n\t// load essay in the modal\n\tjQuery(document).on('click','.wpProQuiz_sortablezzz a', function(e) {\n\t\tvar _this = jQuery(this);\n\t\tvar addressValue = jQuery(this).attr(\"href\");\n\t\tvar substring = 'essay';\n\n\t\tif( addressValue.indexOf(substring) !== -1 && typeof groupLeaderCourseReportSetup !== 'undefined'){\n\t\t\te.preventDefault();\n\n\t\t\tvar dataVars = {\n\t\t\t\tessayUrl: addressValue\n\t\t\t};\n\n\t\t\t// Rest api call to activate/deactivate plugins\n\t\t\tjQuery.ajax({\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupLeaderCourseReportSetup.root + 'get_user_essay/',\n\t\t\t\tbeforeSend: function (xhr) {\n\t\t\t\t\txhr.setRequestHeader('X-WP-Nonce', groupLeaderCourseReportSetup.nonce);\n\t\t\t\t},\n\t\t\t\tsuccess: function (response) {\n\n\t\t\t\t\tvar essay = '<div style=\"background:white;padding:10px;\">'+response+'</div>';\n\t\t\t\t\t_this.parent().append(essay);\n\t\t\t\t\t_this.hide();\n\n\t\t\t\t},\n\t\t\t\tfail: function (response) {\n\t\t\t\t\talert('Rest Call Failed');\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t});\n\n\tjQuery(document).on('click','a.user_statistic', function(e) {\n\t\te.preventDefault();\n\t\t\n\t\tvar refId \t\t\t\t= \tjQuery(this).data('ref_id');\n\t\tvar quizId \t\t\t\t= \tjQuery(this).data('quiz_id');\n\t\tvar userId \t\t\t\t= \tjQuery(this).data('user_id');\n\t\tvar statistic_nonce \t= \tjQuery(this).data('statistic_nonce');\n\t\tvar action \t\t\t\t= \t'wp_pro_quiz_admin_ajax';\n        var nonce \t\t\t\t= \tjQuery(this).data('nonce');\n        if (typeof groupQuizReportSetup !== 'undefined' && typeof groupQuizReportSetup.statistic_action !== 'undefined') {\n            action = groupQuizReportSetup.statistic_action;\n        }\n        if (typeof ULGM_ManageProgress !== 'undefined' && typeof ULGM_ManageProgress.statistic_action !== 'undefined') {\n            action = ULGM_ManageProgress.statistic_action;\n        }\n\n\t\tvar post_data = {\n\t\t\t'action': action,\n\t\t\t'func': 'statisticLoadUser',\n            'nonce': nonce,\n\t\t\t'data': {\n\t\t\t\t'quizId': quizId,\n            \t'userId': userId,\n            \t'refId': refId,\n\t\t\t\t'statistic_nonce': statistic_nonce,\n            \t'avg': 0\n\t\t\t}\n\t\t}\n\t\t\n\t\tjQuery('#wpProQuiz_user_overlay, #wpProQuiz_loadUserData').show();\n\t\tvar content = jQuery('#wpProQuiz_user_content').hide();\n\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: sfwd_data.ajaxurl,\n\t\t\tdataType: \"json\",\n\t\t\tcache: false,\n\t\t\tdata: post_data,\n\t\t\terror: function(jqXHR, textStatus, errorThrown ) {\n\t\t\t},\n\t\t\tsuccess: function(reply_data) {\n\n\t\t\t\tif ( typeof reply_data.html !== 'undefined' ) {\n\t\t\t\t\tcontent.html(reply_data.html);\n\t\t\t\t\tjQuery('a.wpProQuiz_update', content).remove();\n\t\t\t\t\tjQuery('a#wpProQuiz_resetUserStatistic', content).remove();\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tjQuery('#wpProQuiz_user_content').show();\n\n\t\t\t\t\tjQuery('#wpProQuiz_loadUserData').hide();\n\t\t\t\t\n\t\t\t\t\tcontent.find('.statistic_data').click(function() {\n\t\t\t\t\t\tjQuery(this).parents('tr').next().toggle('fast');\n\t\t\t\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\t\t\n\t\tjQuery('#wpProQuiz_overlay_close').click(function() {\n\t\t\tjQuery('#wpProQuiz_user_overlay').hide();\n\t\t});\n\t});\n\t\n});\n","(function ($) { // Self Executing function with $ alias for jQuery\n\n    /**\n     *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n     *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n     */\n    $(document).ready(function () {\n\n        if ($('#uo-group-assignments-table').length > 0 ){\n            window.ulgmGroupManagement.Assignments.constructor();\n\n            jQuery('form#uo-groups-assignments-management-form').on('click', 'button.assignment_approve_single,a.assignment_approve_single,button#group-approve-assignments-button', function (e) {\n                e.preventDefault();\n                var assignment_id = jQuery(this).attr('id').replace('assignment_approve_', '');\n                assignment_id = assignment_id.replace('a_', '');\n                if ((typeof assignment_id !== 'undefined') && (assignment_id != '')) {\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').val(assignment_id);\n                    }\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('approve_assignment');\n                    }\n                    var dataVars = $('form#uo-groups-assignments-management-form').serialize();\n                    window.ulgmGroupManagement.Assignments.actionsAssignment(dataVars);\n                }\n            });\n            jQuery('form#uo-groups-assignments-management-form').on('click','a.delete_assignment_single,button#group-trash-assignments-button',function(e) {\n                e.preventDefault();\n                var assignment_id = jQuery(this).attr('id').replace('a_assignment_trash_', '');\n\n                if ( ( typeof assignment_id !== 'undefined' ) && ( assignment_id != '' ) ) {\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').val(assignment_id);\n                    }\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('trash_assignment');\n                    }\n                    var dataVars = $('form#uo-groups-assignments-management-form').serialize();\n                    window.ulgmGroupManagement.Assignments.actionsAssignment(dataVars);\n                }\n            });\n\n\n            $('#uo-group-assignments-table').on('click','a.edit_assignment_single',function(){\n                var post_id = $(this).data('assignment-id');\n                window.ulgmGroupManagement.Assignments.editAssignmentsData(post_id);\n            });\n            $('body').on('click','button#uo-assignment-edit-button',function(){\n                window.ulgmGroupManagement.Assignments.saveAssignmentsData();\n            });\n            $('body').on('click','#uo-assignment-update-button',function(){\n                window.ulgmGroupManagement.Assignments.saveAssignmentsData();\n            });\n\n            var transitionTimeout;\n            $( '#uo-group-assignments-table tbody' ).on({\n                mouseenter: function() {\n                    clearTimeout( transitionTimeout );\n                    focusedRowActions = $( this ).find( '.row-actions' );\n                    // transitionTimeout is necessary for Firefox, but Chrome won't remove the CSS class without a little help.\n                    $( '.row-actions' ).not( this ).removeClass( 'visible' );\n                    focusedRowActions.addClass( 'visible' );\n                },\n                mouseleave: function() {\n                    // Tabbing between post title and .row-actions links needs a brief pause, otherwise\n                    // the .row-actions div gets hidden in transit in some browsers (ahem, Firefox).\n                    transitionTimeout = setTimeout( function() {\n                        focusedRowActions.removeClass( 'visible' );\n                    }, 30 );\n                }\n            }, 'tr' );\n        }\n    });\n\n\n    window.ulgmGroupManagement.Assignments = {\n\n        uoTable: null,\n\n        uoTableHidden: null,\n\n        lessonId: 0,\n\n        groupId: 0,\n\n        courseId: 0,\n\n        status: 'not-approved',\n\n        elements: {\n            select: {\n                group: {\n                    element: null,\n                    options: null\n                },\n                course: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                lesson: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                status: {\n                    element: null,\n                    options: null,\n                },\n            }\n        },\n\n        constructor: function () {\n            this.elements.select.group.element  = $('#uo-group-report-group');\n            this.elements.select.course.element = $('#uo-group-report-courses');\n            this.elements.select.lesson.element   = $('#uo-group-report-lessons');\n            this.elements.select.status.element   = $('#uo-group-report-status');\n\n\n            this.elements.select.course.no_element = $('#uo-group-report-nocourses');\n            this.elements.select.lesson.no_element   = $('#uo-group-report-nolessons');\n\n            this.elements.select.group.options  = $('#uo-group-report-group option');\n            this.elements.select.course.options = $('#uo-group-report-courses option');\n            this.elements.select.lesson.options   = $('#uo-group-report-lessons option');\n            this.elements.select.status.options   = $('#uo-group-report-status option');\n\n            this.createTable();\n            this.createTableHidden();\n            this.addEvents();\n            window.ulgmGroupManagement.Assignments.status = this.elements.select.status.element.val();\n            // Request data\n            window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, 0, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n        },\n\n        createTable: function (data) {\n\n            const $table = document.getElementById( 'uo-group-assignments-table' );\n\n            var columns = [\n                {\n                    title: 'select',\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row',\n                },\n                {\n                    title: groupAssignments.localized.title,\n                    data: 'title',\n                    className: 'has-row-actions',\n                    name: 'title',\n                    visible: groupAssignments.columns_visibilities.title,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title',\n                },\n\t\t\t\t{\n                    title: groupAssignments.localized.student,\n                    data: 'student',\n                    name: 'student',\n                    visible: groupAssignments.columns_visibilities.student,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--student',\n                },\n                {\n                    title: groupAssignments.localized.first_name,\n                    data: 'first_name',\n                    name: 'first_name',\n                    visible: groupAssignments.columns_visibilities.first_name,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name',\n                },\n                {\n                    title: groupAssignments.localized.last_name,\n                    data: 'last_name',\n                    name: 'last_name',\n                    visible: groupAssignments.columns_visibilities.last_name,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name',\n                },\n                {\n                    title: groupAssignments.localized.author,\n                    data: 'author',\n                    name: 'author',\n                    visible: groupAssignments.columns_visibilities.author,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author',\n                },\n                {\n                    title: groupAssignments.localized.status,\n                    data: 'status',\n                    orderable: true,\n                    name: 'status',\n                    visible: groupAssignments.columns_visibilities.status,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status',\n                },\n                {\n                    title: groupAssignments.localized.points,\n                    data: 'points',\n                    orderable: false,\n                    name: 'points',\n                    visible: groupAssignments.columns_visibilities.points,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points',\n                },\n                {\n                    title: groupAssignments.localized.assignedCourse,\n                    data: 'assignedCourse',\n                    orderable: true,\n                    name: 'assignedCourse',\n                    visible: groupAssignments.columns_visibilities.assignedCourse,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course',\n                },\n                {\n                    title: groupAssignments.localized.assignedlesson,\n                    data: 'assignedlesson',\n                    orderable: true,\n                    name: 'assignedlesson',\n                    visible: groupAssignments.columns_visibilities.assignedlesson,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson',\n                },\n                {\n                    title: groupAssignments.localized.comments,\n                    data: 'comments',\n                    name: 'comments',\n                    visible: groupAssignments.columns_visibilities.comments,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments',\n                },\n                {\n                    title: groupAssignments.localized.date,\n                    data: 'date',\n                    name: 'date',\n                    visible: groupAssignments.columns_visibilities.date,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date',\n                },\n            ];\n\n            let exportButtons = [];\n            if ($table.dataset.csv == 'show') {\n                exportButtons.push({\n                    extend: 'csv',\n                    text: groupAssignments.i18n.exportCSV\n                });\n            }\n            if ($table.dataset.excel == 'show') {\n                exportButtons.push({\n                    extend: 'excelHtml5',\n                    text: groupAssignments.i18n.exportExcel\n                });\n            }\n\n            var tableVars = {\n                aLengthMenu: [\n                    [15, 30, 60, -1],\n                    [15, 30, 60, groupAssignments.localized.all]\n                ],\n                responsive: true,\n                iDisplayLength: 30,\n                columns: columns,\n                columnDefs: [{\n                    \"targets\": 0,\n                    \"orderable\": false,\n                    \"searchable\": false,\n                    'render': function (data, type, full, meta){\n                        return '<input type=\"checkbox\" name=\"post[]\" value=\"' + $('<div/>').text(data).html() + '\">';\n                    },\n                    'checkboxes': {\n                        'selectRow': true\n                    }\n                }],\n                select: {\n                    style: 'multi',\n                    selector: 'td:first-child'\n                },\n                stateSave: true,\n                //responsive: true,\n\n                dom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n                buttons: exportButtons,\n\n            };\n\n            if (null !== this.uoTable) {\n\n                this.uoTable.destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {\n                        title: '<input type=\"checkbox\" name=\"select_all\" value=\"1\" id=\"uo-assignments-select-all\">',\n                        data: 'id',\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row',\n                    },\n                    {\n                        title: groupAssignments.localized.title,\n                        data: 'title',\n                        className: 'has-row-actions',\n                        name: 'title',\n                        visible: groupAssignments.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title',\n                    },\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: groupAssignments.localized.student,\n\t\t\t\t\t\tdata: 'student',\n\t\t\t\t\t\tname: 'student',\n\t\t\t\t\t\tvisible: groupAssignments.columns_visibilities.student,\n\t\t\t\t\t\tclassName: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--student',\n\t\t\t\t\t},\n                    {\n                        title: groupAssignments.localized.first_name,\n                        data: 'first_name',\n                        name: 'first_name',\n                        visible: groupAssignments.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name',\n                    },\n                    {\n                        title: groupAssignments.localized.last_name,\n                        data: 'last_name',\n                        name: 'last_name',\n                        visible: groupAssignments.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name',\n                    },\n                    {\n                        title: groupAssignments.localized.author,\n                        data: 'author',\n                        name: 'author',\n                        visible: groupAssignments.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author',\n                    },\n                    {\n                        title: groupAssignments.localized.status,\n                        data: 'status',\n                        orderable: true,\n                        name: 'status',\n                        visible: groupAssignments.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status',\n                    },\n                    {\n                        title: groupAssignments.localized.points,\n                        data: 'points',\n                        orderable: false,\n                        name: 'points',\n                        visible: groupAssignments.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points',\n                    },\n                    {\n                        title: groupAssignments.localized.assignedCourse,\n                        data: 'assignedCourse',\n                        orderable: true,\n                        name: 'assignedCourse',\n                        visible: groupAssignments.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course',\n                    },\n                    {\n                        title: groupAssignments.localized.assignedlesson,\n                        data: 'assignedlesson',\n                        orderable: true,\n                        name: 'assignedlesson',\n                        visible: groupAssignments.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson',\n                    },\n                    {\n                        title: groupAssignments.localized.comments,\n                        data: 'comments',\n                        name: 'comments',\n                        visible: groupAssignments.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments',\n                    },\n                    {\n                        title: groupAssignments.localized.date,\n                        data: 'date',\n                        name: 'date',\n                        visible: groupAssignments.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date',\n                    },\n                ];\n\n            }\n            tableVars.language = {\n                processing:        groupAssignments.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupAssignments.localized.searchPlaceholder,\n                lengthMenu:        groupAssignments.localized.lengthMenu,\n                info:              groupAssignments.localized.info,\n                infoEmpty:         groupAssignments.localized.infoEmpty,\n                infoFiltered:      groupAssignments.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupAssignments.localized.loadingRecords,\n                zeroRecords:       groupAssignments.localized.zeroRecords,\n                emptyTable:        groupAssignments.localized.emptyTable,\n                paginate: {\n                    first:         groupAssignments.localized.paginate.first,\n                    previous:      groupAssignments.localized.paginate.previous,\n                    next:          groupAssignments.localized.paginate.next,\n                    last:          groupAssignments.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupAssignments.localized.sortAscending,\n                    sortDescending: groupAssignments.localized.sortDescending\n                }\n            };\n            tableVars.initComplete = function(s,d) {\n                jQuery( `\n                    <div class=\"group-assignments-buttons uo-hidden\">\n                        <button class=\"uo-btn uo-left\" id=\"group-approve-assignments-button\">\n                            ${ groupAssignments.localized.approveAssignments }\n                        </button>\n                        <button class=\"uo-btn uo-left\" id=\"group-trash-assignments-button\">\n                            ${ groupAssignments.localized.deleteAssignments }\n                        </button>\n                    </div>\n                ` ).insertAfter( '.dt-search' );\n                \n                try {\n                    // Insert column filter after search box\n                    var $filterContainer = window.ulgmGroupManagement.Assignments.addColumnsFilter(s);\n                    \n                    var $searchBox = jQuery('.dt-search');\n                    \n                    // Insert after search box\n                    if ($searchBox.length > 0 && $filterContainer.length > 0) {\n                        $filterContainer.insertAfter($searchBox);\n                    } else {\n                        // Fallback - insert at the end of the datatable header\n                        $filterContainer.appendTo('.uo-groups-datatable-header');\n                    }\n                    \n                    // Ensure column visibility toggles are working with DataTables 2.x\n                    jQuery('.dataTables-filter-columns input[type=\"checkbox\"]').on('change', function() {\n                        var columnIndex = jQuery(this).attr('id').replace('dt_', '');\n                        var column = window.ulgmGroupManagement.Assignments.uoTable.column(columnIndex);\n                        var isChecked = jQuery(this).is(':checked');\n                        \n                        column.visible(isChecked);\n                    });\n                    \n                    // Add a class to make the customize columns UI visible\n                    setTimeout(function() {\n                        jQuery('.dataTables-filter-columns').addClass('dt-initialized');\n                    }, 100);\n                } catch (error) {\n                    console.error('Error in initComplete:', error.message);\n                }\n            };\n\n            // Check what column has to be used to sort the table\n            let tableOrder = [];\n            // Find the index of the column we have to use to sort\n            let tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmAssignmentReportShortcode.table.orderBy );\n\n            // If the column doesn't exist, then try to get the default one\n            if ( tableOrderByIndex === -1 ) {\n                tableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date' );\n            }\n            // If the one defined by the user, or the default one exists, add it\n            if ( tableOrderByIndex !== -1 ) {\n                tableOrder = [\n                    [\n                        tableOrderByIndex, // The ID of the column used to sort, defaults to `date`\n                        ulgmAssignmentReportShortcode.table.order, // Designates the ascending or descending order of the 'orderby' parameter, defaults to `desc`\n                    ]\n                ];\n            }\n\n            tableVars.order = tableOrder;\n\n            this.uoTable = jQuery('#uo-group-assignments-table');\n\n            if ( jQuery('#uo-group-assignments-table').length > 0 ){\n                try {\n                    // Remove problematic properties for DataTables 2.x\n                    if (tableVars.headerRows !== undefined) {\n                        delete tableVars.headerRows;\n                    }\n                    \n                    // Add ColReorder to the configuration\n                    tableVars.colReorder = {\n                        enable: true,\n                        fixedColumnsLeft: 1  // Keep checkbox column fixed\n                    };\n                    \n                    // Initialize DataTable with ColReorder included\n                    this.uoTable = jQuery('#uo-group-assignments-table').DataTable(tableVars);\n                    \n                    // Verify ColReorder is available\n                    if (!jQuery.fn.dataTable.ColReorder) {\n                        console.warn('ColReorder extension not available despite being configured');\n                    }\n                } catch (error) {\n                    console.error('Error initializing DataTable:', error.message);\n                }\n            }\n\n        },\n\n        createTableHidden: function (data) {\n\n            var columns = [\n                {title: groupAssignments.localized.title, data: 'title', className:'has-row-actions', name: 'title', visible: groupAssignments.columns_visibilities.title},\n                {title: groupAssignments.localized.student, data: 'student', name: 'student', visible: groupAssignments.columns_visibilities.student},\n                {title: groupAssignments.localized.first_name, data: 'first_name', name: 'first_name', visible: groupAssignments.columns_visibilities.first_name},\n                {title: groupAssignments.localized.last_name, data: 'last_name', name: 'last_name', visible: groupAssignments.columns_visibilities.last_name},\n                {title: groupAssignments.localized.author, data: 'author', name: 'author', visible: groupAssignments.columns_visibilities.author},\n                {title: groupAssignments.localized.status, data: 'status', orderable: true, name: 'status', visible: groupAssignments.columns_visibilities.status},\n                {title: groupAssignments.localized.points, data: 'points', orderable: false, name: 'points', visible: groupAssignments.columns_visibilities.points},\n                {title: groupAssignments.localized.assignedCourse, data: 'assignedCourse',orderable: true, name: 'assignedCourse', visible: groupAssignments.columns_visibilities.assignedCourse},\n                {title: groupAssignments.localized.assignedlesson, data: 'assignedlesson',orderable: true, name: 'assignedlesson', visible: groupAssignments.columns_visibilities.assignedlesson},\n                {title: groupAssignments.localized.comments, data: 'comments', name: 'comments', visible: groupAssignments.columns_visibilities.comments},\n                {title: groupAssignments.localized.date, data: 'date', name: 'date', visible: groupAssignments.columns_visibilities.date},\n            ];\n\n            /*var language = [\n                \"lengthMenu\": groupAssignments.localized.lengthMenu,\n                \"zeroRecords\": groupAssignments.localized.zeroRecords,\n                \"info\": groupAssignments.localized.info,\n                \"infoEmpty\": groupAssignments.localized.infoEmpty,\n                \"infoFiltered\": groupAssignments.localized.infoFiltered,\n                \"loadingRecords\": groupAssignments.localized.loadingRecords,\n                \"emptyTable\": groupAssignments.localized.emptyTable\n            ];*/\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n                    columns: ( id, data, node ) => {\n                        // Don't export the column used to select rows, or\n                        // \"Title\" columns\n                        if (\n                            node.matches( '.ulg-report-assignments-cell--select-row' ) ||\n                            node.matches( '.ulg-report-assignments-cell--title' )\n                        ) {\n                            return false;\n                        }\n\n                        return this.uoTable.column( id ).visible();\n                    },\n\n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n            var tableVars = {\n                iDisplayLength: -1,\n                columns: columns,\n                dom: 'Bfrtip',\n                buttons: [\n\t\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\t\textend: 'csv',\n\t\t\t\t\t\ttext: groupAssignments.localized.buttons.csvExport,\n\t\t\t\t\t\ttitle: 'lesson-report'\n\t\t\t\t\t})\n                ],\n                stateSave: true,\n                //responsive: true,\n            };\n\n            if ($.fn.DataTable.isDataTable( '#uo-lesson-report-table-hidden' )) {\n\n                $( '#uo-lesson-report-table-hidden' ).DataTable().destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {title: groupAssignments.localized.title, data: 'title', name: 'title', visible: groupAssignments.columns_visibilities.title},\n\t\t\t\t\t{title: groupAssignments.localized.student, data: 'student', name: 'student', visible: groupAssignments.columns_visibilities.student},\n                    {title: groupAssignments.localized.first_name, data: 'first_name', name: 'first_name', visible: groupAssignments.columns_visibilities.first_name},\n                    {title: groupAssignments.localized.last_name, data: 'last_name', name: 'last_name', visible: groupAssignments.columns_visibilities.last_name},\n                    {title: groupAssignments.localized.author, data: 'author', name: 'author', visible: groupAssignments.columns_visibilities.author},\n                    {title: groupAssignments.localized.status, data: 'status', orderable: true, name: 'status', visible: groupAssignments.columns_visibilities.status},\n                    {title: groupAssignments.localized.points, data: 'points', orderable: false, name: 'points', visible: groupAssignments.columns_visibilities.points},\n                    {title: groupAssignments.localized.assignedCourse, data: 'assignedCourse',orderable: true, name: 'assignedCourse', visible: groupAssignments.columns_visibilities.assignedCourse},\n                    {title: groupAssignments.localized.assignedlesson, data: 'assignedlesson',orderable: true, name: 'assignedlesson', visible: groupAssignments.columns_visibilities.assignedlesson},\n                    {title: groupAssignments.localized.comments, data: 'comments', name: 'comments', visible: groupAssignments.columns_visibilities.comments},\n                    {title: groupAssignments.localized.date, data: 'date', name: 'date', visible: groupAssignments.columns_visibilities.date},\n                ];\n\n            }\n\n            tableVars.language = {\n                processing:        groupAssignments.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupAssignments.localized.searchPlaceholder,\n                lengthMenu:        groupAssignments.localized.lengthMenu,\n                info:              groupAssignments.localized.info,\n                infoEmpty:         groupAssignments.localized.infoEmpty,\n                infoFiltered:      groupAssignments.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupAssignments.localized.loadingRecords,\n                zeroRecords:       groupAssignments.localized.zeroRecords,\n                emptyTable:        groupAssignments.localized.emptyTable,\n                paginate: {\n                    first:         groupAssignments.localized.paginate.first,\n                    previous:      groupAssignments.localized.paginate.previous,\n                    next:          groupAssignments.localized.paginate.next,\n                    last:          groupAssignments.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupAssignments.localized.sortAscending,\n                    sortDescending: groupAssignments.localized.sortDescending\n                }\n            };\n\n            if ( jQuery('#uo-lesson-report-table-hidden').length > 0 ){\n                try {\n                    // Remove problematic properties for DataTables 2.x\n                    if (tableVars.headerRows !== undefined) {\n                        delete tableVars.headerRows;\n                    }\n                    \n                    // Add ColReorder to hidden table as well\n                    tableVars.colReorder = {\n                        enable: true\n                    };\n                    \n                    this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden').DataTable(tableVars);\n                } catch (error) {\n                    console.error('Error initializing hidden DataTable:', error.message);\n                }\n            }\n\n            $('.buttons-csv').show();\n\n        },\n\n        flattenArray: function (array, remove_stats) {\n\n            var flatArray = [];\n\n            jQuery.each(array, function (key, value) {\n\n                var lesson_name = value;\n                jQuery.each(value.question, function (key2, value2) {\n                    flatArray.push({\n                        \"title\": value.title,\n\t\t\t\t\t\t\"student\": value.student,\n                        \"first_name\": value.first_name,\n                        \"last_name\": value.last_name,\n                        \"author\": value.author,\n                        \"status\": value.status,\n                        \"points\": value.points,\n                        \"assignedCourse\": value.assignedCourse,\n                        \"assignedlesson\": value.assignedlesson,\n                        \"comments\": value.comments,\n                        \"date\": value.date,\n                    })\n                });\n\n            });\n\n            return flatArray;\n\n        },\n        addColumnsFilter: function (state) {\n            var colFilter_container = $( `<div id=\"${ state.sInstance }-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${ state.sInstance }-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${ state.sInstance }-filter-columns-field\" data-label-enable=\"${ groupAssignments.localized.customizeColumns }\" data-label-disable=\"${ groupAssignments.localized.hideCustomizeColumns }\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n            __this = window.ulgmGroupManagement.Assignments;\n            \n            try {\n                // DataTables 2.x uses different property structure\n                // First try DataTables 2.x structure\n                if (state.aoColumns) {\n                    jQuery.each(state.aoColumns, function (key, value) {\n                        if (key > 0) {\n                            var title = value.sTitle;\n                            var visible = value.bVisible;\n                            colFilter_container.find('.dataTables-filter-columns__fields').append(__this.addColumnCheckbox(title, key, visible));\n                        }\n                    });\n                } \n                // Fallback to saved state if available\n                else if (state.oSavedState && state.oSavedState.columns) {\n                    jQuery.each(state.oSavedState.columns, function (key, value) {\n                        if (key > 0) {\n                            // Find the column title from the table header\n                            var title = jQuery('#uo-group-assignments-table th').eq(key).text();\n                            var visible = value.visible;\n                            colFilter_container.find('.dataTables-filter-columns__fields').append(__this.addColumnCheckbox(title, key, visible));\n                        }\n                    });\n                }\n                // As a last resort, get columns directly from API\n                else if (__this.uoTable) {\n                    var columns = __this.uoTable.settings().init().columns;\n                    jQuery.each(columns, function (key, value) {\n                        if (key > 0) {\n                            var title = value.title;\n                            var visible = value.visible !== false;\n                            colFilter_container.find('.dataTables-filter-columns__fields').append(__this.addColumnCheckbox(title, key, visible));\n                        }\n                    });\n                }\n            } catch (error) {\n                console.error('Error building column filter:', error.message);\n            }\n\n            return colFilter_container;\n        },\n        addColumnCheckbox: function (label, column_key, is_visible) {\n            var checkbox = jQuery('<input />', {\n                type: 'checkbox',\n                id: 'dt_' + column_key,\n                value: label,\n                checked: is_visible\n            });\n            checkbox.on('change', function (e) {\n                // Get the column API object\n                var headers = window.ulgmGroupManagement.Assignments.uoTable.columns().header();\n                var current_check = jQuery(this).attr('value');\n                var is_checked = jQuery(this).is(':checked');\n\n                jQuery.each(headers, function (key, selectot) {\n                    if (jQuery(selectot).html() === current_check) {\n                        var column = window.ulgmGroupManagement.Assignments.uoTable.column(key);\n                        if (is_checked) {\n                            // Toggle the visibility\n                            column.visible(true);\n                        } else {\n                            column.visible(false);\n                        }\n\t\t\t\t\t\t// Trigger Resize\n\t\t\t\t\t\twindow.ulgmGroupManagement.Assignments.uoTable.columns.adjust().recalc();\n                    }\n                });\n\n            });\n            var $label = jQuery('<label/>').append(checkbox).append(label);\n            return $label;\n        },\n        create_options: function( source, ids ){\n            /*\n            * @param source string, values \"group\", \"course\", \"lesson\"\n            * @param ids    array,  ids of options that have to be shown\n            *\n            * @return array of jQuery DOM elements with the option elements\n            */\n\n            let options = [];\n\n            // Convert parameters to int\n            ids = ids.map( Number );\n\n            // Add empty option\n            // if there are more then one option\n            if( ids.length > 1 ){\n                ids.push(0);\n            }\n\n\n            // Get options by ID\n            this.elements.select[source].options.each(function(){\n                let $this   = $(this),\n                    id      = parseInt( $this.val() );\n                $this.show();\n                if ( ids.indexOf( id ) != -1 ){\n                    options.push( $this );\n                }\n            });\n\n            // Return options\n            return options;\n        },\n\n        select_option: function( $select, value ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n        },\n        __select_option: function( $select, index ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[' + index + ']' ).prop( 'selected', true );\n        },\n        addEvents: function (){\n            var _this = this;\n\n            // Handle click on \"Select all\" control\n            $('#uo-groups-assignments-management').on('click','#uo-assignments-select-all', function(){\n                // Check/uncheck checkboxes for all rows in the table\n                $('input[name=\"post[]\"]').prop('checked', this.checked);\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-assignments-buttons').show();\n                } else {\n                    $('.group-assignments-buttons').hide();\n                    $('#uo-assignments-select-all').prop('checked', false);\n                }\n            });\n\n            // Handle click on checkbox to set state of \"Select all\" control\n            $('#uo-group-assignments-table tbody').on('change', 'input[name=\"post[]\"]', function(){\n                // If checkbox is not checked\n                if(!this.checked){\n                    var el = $('#uo-assignments-select-all').get(0);\n                    // If \"Select all\" control is checked and has 'indeterminate' property\n                    if(el && el.checked && ('indeterminate' in el)){\n                        // Set visual state of \"Select all\" control\n                        // as 'indeterminate'\n                        el.indeterminate = true;\n                    }\n                }\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-assignments-buttons').show();\n                } else {\n                    $('.group-assignments-buttons').hide();\n                    $('#uo-assignments-select-all').prop('checked', false);\n                }\n            });\n\n            $('#uo-groups-assignments-management').on('click','#group-approve-assignments-button',function(){\n                if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('approve_assignment');\n                }\n                //jQuery('form#uo-groups-assignments-management-form').submit();\n            });\n\n            $('#uo-groups-assignments-management').on('click','#group-trash-assignments-button',function(){\n                if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('trash_assignment');\n                }\n                //jQuery('form#uo-groups-assignments-management-form').submit();\n\n            });\n\n            this.elements.select.group.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // Hide lesson select\n                //_this.elements.select.lesson.element.hide();\n                _this.elements.select.course.element.show();\n\n                // Group ID\n                let group_id = $this.val();\n                // Return if course id is 0\n                if( group_id == 0 || group_id == null ){\n                    _this.elements.select.course.element.empty();\n                    let options_course = _this.create_options( 'course', [0] );\n                    _this.elements.select.course.element.html(options_course);\n                    _this.elements.select.course.element.attr('disabled','disabled');\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    return;\n                }\n                // Get relationships\n                let courses_to_show = groupAssignments.courseGrouplessons[ group_id ];\n                courses_to_show = courses_to_show === undefined ? [] : courses_to_show;\n\n                // Create options\n                let options = _this.create_options( 'course', courses_to_show );\n\n                if ( options.length > 0 ){\n                     // Show \"Select course\" dropdown\n                    _this.elements.select.course.element.show();\n                    _this.elements.select.course.element.html( options );\n                    _this.elements.select.course.no_element.hide();\n                    //_this.elements.select.course.element.html(_this.elements.select.course.element.find('option').sort(function(x, y) {\n                        // to change to descending order switch \"<\" for \">\"\n                    //    return $(x).text() > $(y).text() ? 1 : -1;\n                    //}));\n                    _this.elements.select.course.element.removeAttr('disabled');\n\n                    // Select empty option\n\n                    _this.__select_option( _this.elements.select.course.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.groupId = group_id;\n                    // trigger change after value set on load\n                    _this.elements.select.course.element.trigger('change');\n                }\n                else {\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.course.element.empty();\n                    let options_course = _this.create_options( 'course', [0] );\n                    _this.elements.select.course.element.html(options_course);\n                    _this.elements.select.course.element.attr('disabled','disabled');\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.groupId = group_id;\n                }\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, 0, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n            });\n\n            this.elements.select.course.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // Course ID\n                let course_id = $this.val();\n                // Return if course id is 0\n                if( course_id == 0){\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    return;\n                }\n\n                // Get relationships\n                let lessons_to_show = groupAssignments.relationships[ window.ulgmGroupManagement.Assignments.groupId ][ course_id ];\n                lessons_to_show = lessons_to_show === undefined ? [] : lessons_to_show;\n\n                // Create options\n                let options = _this.create_options( 'lesson', lessons_to_show );\n\n                if ( options.length > 0 ) {\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.lesson.element.show();\n                    _this.elements.select.lesson.element.html(options);\n                    jQuery('#uo-group-report-lessons option').show();\n                    _this.elements.select.lesson.no_element.hide();\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.lesson.element, 0 );\n                    _this.elements.select.lesson.element.removeAttr('disabled');\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.lesson.element.trigger('change');\n                }else{\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n                }\n\n            });\n\n            this.elements.select.lesson.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // lesson ID\n                let lesson_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Assignments.lessonId = lesson_id;\n\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( lesson_id, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n            });\n\n            this.elements.select.status.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // lesson ID\n                let status = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Assignments.status = status;\n\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( window.ulgmGroupManagement.Assignments.lessonId, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, status );\n            });\n\n            // Add event listener for opening and closing details\n            $('#uo-lesson-report-table').on('click', 'td.details-control', function () {\n\n                var tr = $(this).closest('tr');\n                var row = window.ulgmGroupManagement.Assignments.uoTable.row(tr);\n\n                if (row.child.isShown()) {\n                    // This row is already open - close it\n                    row.child.hide();\n                    tr.removeClass('shown');\n                }\n                else {\n                    // Open this row\n                    row.child(window.ulgmGroupManagement.Assignments.format(row.data())).show();\n                    tr.addClass('shown');\n                }\n            });\n\n        },\n\n        format: function (d) {\n\n            var rows = '';\n            $.each(d.answer, function (key, value) {\n                rows +=\n                    '<tr>' +\n                    '<td>' + d.question[key] + '</td>' +\n                    '<td>' + value + '</td>' +\n                    '</tr>';\n            });\n            // `d` is the original data object for the row\n            return '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n        },\n        isNormalInteger: function (str) {\n            var n = ~~Number(str);\n            return String(n) === str && n > 0;\n        },\n\n        getAssignmentsData: function (lessonId, courseId, groupId, status) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var i = 0;\n\n            var loading = setInterval(function () {\n                i = ++i % 4;\n                $(\"#uo-group-assignments-table tbody\").html(\"<div id='group-loader'>\" + groupAssignments.localized.loadingRecords + new Array(i + 1).join(\".\") + \"</div>\");\n            }, 500);\n\n\n            var dataVars = {\n                groupId: groupId,\n                lessonId: lessonId,\n                courseId: courseId,\n                status: status,\n            };\n\n            $.ajax({\n\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'get_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    clearInterval(loading);\n                    $('#group-loader').remove();\n\n                    window.ulgmGroupManagement.Assignments.createTable(response);\n                    window.ulgmGroupManagement.Assignments.createTableHidden(response);\n\n\n                },\n                fail: function (response) {\n                    alert('Rest Call Failed');\n                }\n\n            });\n\n        },\n        editAssignmentsData: function (postId) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var dataVars = {\n                assignment_id: postId,\n                action: 'edit_assignments',\n                post_type:'sfwd-assignment',\n                security:groupAssignments.ajax_nonce\n            };\n\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'edit_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    $(\".modal\").remove();\n\n                    const modal = $(response.html);\n\n                    modal.appendTo( 'body' );\n\n                    modal.on( 'modal:open.uncanny-groups-modal', () => {\n                        // Focus on the first field\n                        const fieldField = $( modal ).find( 'input:visible, select:visible' ).first();\n                        \n                        if ( fieldField.length > 0 ) {\n                            fieldField.trigger( 'focus' );\n                        } else {\n                            $( modal ).find( 'button:visible:first' ).trigger( 'focus' );\n                        }\n\n                        modal.off( 'modal:open.uncanny-groups-modal' );\n                    } );\n\n                    modal.modal();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        saveAssignmentsData: function () {\n            var dataVars = $('#edit_assignment_form').serialize();\n            var spinner = $('.uo-modal-spinner');\n            //$('#group-management-message').hide();\n            $('.uo-groups-message-ok').hide();\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'save_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger('change');\n                    //$('#group-management-message').html(response.message).show();\n                    $('.uo-groups-message-ok').html(response.message).show();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        actionsAssignment: function ( dataVars ) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'save_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger('change');\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        }\n    };\n\n\n})(jQuery);\n","(function ($) { // Self Executing function with $ alias for jQuery\n\n    /**\n     *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n     *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n     */\n    $(document).ready(function () {\n\n        if ($('#uo-group-essays-table').length > 0 ){\n            window.ulgmGroupManagement.Essays.constructor();\n\n            jQuery('form#uo-groups-essays-management-form').on('click', 'button.essay_approve_single,a.essay_approve_single', function (e) {\n                e.preventDefault();\n                var essay_id = jQuery(this).attr('id').replace('essay_approve_', '');\n                essay_id = essay_id.replace('a_', '');\n                if ((typeof essay_id !== 'undefined') && (essay_id != '')) {\n                    var input_essay_points = jQuery('form#uo-groups-essays-management-form input#essay_points_' + essay_id);\n                    var essay_points = document.getElementById('essay_points_' + essay_id);\n                    if( input_essay_points.length ) {\n                        var value = parseFloat(input_essay_points.val());\n                        var min = parseFloat(input_essay_points.attr('min'));\n                        var max = parseFloat(input_essay_points.attr('max'));\n                        if ( isNaN(value) || value < min || value > max ) {\n                            alert( groupEssays.i18n.invalid_points_input );\n                            essay_points.focus();\n                            return;\n                        }\n                    }\n\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').val(essay_id);\n                    }\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('graded');\n                    }\n                    //jQuery('form#uo-groups-essays-management-form').submit();\n                    var dataVars = $('form#uo-groups-essays-management-form').serialize();\n                    window.ulgmGroupManagement.Essays.actionsEssays(dataVars);\n                }\n            });\n            jQuery('form#uo-groups-essays-management-form').on('click','a.delete_essay_single',function(e) {\n                e.preventDefault();\n                var essay_id = jQuery(this).attr('id').replace('a_essay_trash_', '');\n\n                if ( ( typeof essay_id !== 'undefined' ) && ( essay_id != '' ) ) {\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').val(essay_id);\n                    }\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('trash_essay');\n                    }\n                    var dataVars = $('form#uo-groups-essays-management-form').serialize();\n                    window.ulgmGroupManagement.Essays.actionsEssays(dataVars);\n                }\n            });\n\n\n            $('#uo-group-essays-table').on('click','a.edit_essay_single',function(){\n                var post_id = $(this).data('essay-id');\n                window.ulgmGroupManagement.Essays.editEssaysData(post_id);\n            });\n            $('body').on('click','button#uo-essay-edit-button',function(){\n                window.ulgmGroupManagement.Essays.saveEssaysData();\n            });\n            $('body').on('click','#uo-essay-update-button',function(){\n                window.ulgmGroupManagement.Essays.saveEssaysData();\n            });\n\n            var transitionTimeout;\n            $( '#uo-group-essays-table tbody' ).on({\n                mouseenter: function() {\n                    clearTimeout( transitionTimeout );\n                    focusedRowActions = $( this ).find( '.row-actions' );\n                    // transitionTimeout is necessary for Firefox, but Chrome won't remove the CSS class without a little help.\n                    $( '.row-actions' ).not( this ).removeClass( 'visible' );\n                    focusedRowActions.addClass( 'visible' );\n                },\n                mouseleave: function() {\n                    // Tabbing between post title and .row-actions links needs a brief pause, otherwise\n                    // the .row-actions div gets hidden in transit in some browsers (ahem, Firefox).\n                    transitionTimeout = setTimeout( function() {\n                        focusedRowActions.removeClass( 'visible' );\n                    }, 30 );\n                }\n            }, 'tr' );\n        }\n    });\n\n\n    window.ulgmGroupManagement.Essays = {\n\n        uoTable: null,\n\n        uoTableHidden: null,\n\n        lessonId: 0,\n\n        groupId: 0,\n\n        courseId: 0,\n\n        quizId: 0,\n\n        status: 'ungraded',\n\n        elements: {\n            select: {\n                group: {\n                    element: null,\n                    options: null\n                },\n                course: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                lesson: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                quiz: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                status: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n            }\n        },\n\n        constructor: function () {\n            this.elements.select.group.element = $('#uo-group-report-group');\n            this.elements.select.course.element = $('#uo-group-report-courses');\n            this.elements.select.lesson.element = $('#uo-group-report-lessons');\n            this.elements.select.quiz.element = $('#uo-group-report-quizzes');\n            this.elements.select.status.element = $('#uo-group-report-status');\n            this.elements.select.course.no_element = $('#uo-group-report-nocourses');\n            this.elements.select.lesson.no_element = $('#uo-group-report-nolessons');\n            this.elements.select.quiz.no_element = $('#uo-group-report-noquizzes');\n\n            this.elements.select.group.options  = $('#uo-group-report-group option');\n            this.elements.select.course.options = $('#uo-group-report-courses option');\n            this.elements.select.lesson.options   = $('#uo-group-report-lessons option');\n            this.elements.select.quiz.options   = $('#uo-group-report-quizzes option');\n            this.elements.select.status.options   = $('#uo-group-report-status option');\n            this.status = this.elements.select.status.element.val();\n            this.createTable();\n            this.createTableHidden();\n            this.addEvents();\n\n            // Maybe request initial data.\n            if ( ulgmEssayReportShortcode.loadOnRender === 'yes' ) {\n\t\t\t    window.ulgmGroupManagement.Essays.getEssaysData( 0, 0, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status );\n            }\n        },\n\n\t\tgetParam: function(name) {\n\t\t\tname = name.replace(/[[]/, \"\\[\").replace(/[]]/, \"\\]\");\n\t\t\tvar regex = new RegExp(\"[\\?&]\" + name + \"=([^&#]*)\"),\n\t\t\t\tresults = regex.exec(location.search);\n\t\t\treturn results === null ? \"\" : decodeURIComponent(results[1].replace(\"+\", \" \"));\n\t\t},\n        createTable: function (data) {\n\n            const $table = document.getElementById( 'uo-group-essays-table' );\n\n            var columns = [\n                {\n                    data:      'id',\n                    title:     groupEssays.localized.idColumn,\n                    className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                },\n                {\n                    data:      'student',\n                    title:     groupEssays.localized.student,\n                    visible:   groupEssays.columns_visibilities.student,\n                    className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--student',\n                },\n                {\n                    data:      'title',\n                    title:     groupEssays.localized.title,\n                    visible:   groupEssays.columns_visibilities.title,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                },\n                {\n                    data:      'first_name',\n                    title:     groupEssays.localized.first_name,\n                    visible:   groupEssays.columns_visibilities.first_name,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                },\n                {\n                    data:      'last_name',\n                    title:     groupEssays.localized.last_name,\n                    visible:   groupEssays.columns_visibilities.last_name,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                },\n                {\n                    data:      'author',\n                    title:     groupEssays.localized.author,\n                    visible:   groupEssays.columns_visibilities.author,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                },\n                {\n                    data:      'status',\n                    title:     groupEssays.localized.status,\n                    visible:   groupEssays.columns_visibilities.status,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                },\n                {\n                    data:      'points',\n                    title:     groupEssays.localized.points,\n                    visible:   groupEssays.columns_visibilities.points,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                },\n                {\n                    data:      'question_text',\n                    title:     groupEssays.localized.question_text,\n                    visible:   groupEssays.columns_visibilities.question_text,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                },\n                {\n                    data:      'content',\n                    title:     groupEssays.localized.content,\n                    visible:   groupEssays.columns_visibilities.content,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                },\n                {\n                    data:      'assignedCourse',\n                    title:     groupEssays.localized.assignedCourse,\n                    visible:   groupEssays.columns_visibilities.assignedCourse,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                },\n                {\n                    data:      'assignedlesson',\n                    title:     groupEssays.localized.assignedlesson,\n                    visible:   groupEssays.columns_visibilities.assignedlesson,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                },\n                {\n                    data:      'assignedquiz',\n                    title:     groupEssays.localized.assignedquiz,\n                    visible:   groupEssays.columns_visibilities.assignedquiz,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                },\n                {\n                    data:      'comments',\n                    title:     groupEssays.localized.comments,\n                    visible:   groupEssays.columns_visibilities.comments,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                },\n                {\n                    data:      'date',\n                    title:     groupEssays.localized.date,\n                    visible:   groupEssays.columns_visibilities.date,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                },\n            ];\n\n            // Check what column has to be used to sort the table\n            let tableOrder = [];\n            // Find the index of the column we have to use to sort\n            let tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmEssayReportShortcode.table.orderBy );\n\n            // If the column doesn't exist, then try to get the default one\n            if ( tableOrderByIndex === -1 ) {\n                tableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date' );\n            }\n            // If the one defined by the user, or the default one exists, add it\n            if ( tableOrderByIndex !== -1 ) {\n                tableOrder = [\n                    [\n                        tableOrderByIndex, // The ID of the column used to sort, defaults to `date`\n                        ulgmEssayReportShortcode.table.order, // Designates the ascending or descending order of the 'orderby' parameter, defaults to `desc`\n                    ]\n                ];\n            }\n\n            const buttonsShared = {\n                exportOptions: {\n                    columns: ( id, data, node ) => {\n                        return this.uoTable.column( id ).visible();\n                    },\n\n                    format: {\n                        body: function ( data, row, column, node ) {\n                            // Check if it's the \"Status\" column\n                            if ( node.classList.contains( 'ulg-report-essays-cell--status' ) ) {\n                                // Check if it has the \"Approve\" button inside\n                                if ( node.querySelector( 'button.essay_approve_single' ) ) {\n                                    // Replace data. If it has the button, then it's \"Ungraded\"\n                                    data = groupEssays.i18n.ungraded;\n                                }\n                            }\n                            // Check if it's the \"Points\" column\n                            else if ( node.classList.contains( 'ulg-report-essays-cell--points' ) ) {\n                                // Check if it has an input\n                                const $input = node.querySelector( 'input' );\n                                if ( $input ) {\n                                    // Format data\n                                    data = `${ $input.value } ${ node.innerText.trim() }`;\n                                }\n                            }\n                            // Check if it's the \"Date\" column\n                            else if ( node.classList.contains( 'ulg-report-essays-cell--date' ) ) {\n                                // Strips hidden timestamp <span>\n                                return data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n                            }\n                            // Format all other columns\n                            else {\n                                // Remove HTML\n                                data = node.innerText.trim();\n                            }\n\n                            // Remove HTML\n                            return data;\n                        }\n                    }\n                },\n\n                filename: () => {\n                    // File name parts\n                    const filenameParts = [\n                        // Base name\n                        groupEssays.i18n.reportBaseName\n                    ];\n\n                    // Get the ID of the dropdowns used to set the filters\n                    const filtersFields = [\n                        'uo-group-report-group',\n                        'uo-group-report-courses',\n                        'uo-group-report-lessons',\n                        'uo-group-report-quizzes',\n                        'uo-group-report-status'\n                    ];\n\n                    // Get the value of the filters\n                    filtersFields.forEach( ( filterID ) => {\n                        // Get the field of the filter\n                        const $filter = document.getElementById( filterID );\n\n                        try {\n                            // Check if it exists\n                            if ( $filter ) {\n                                // Get the value\n                                const filterValue = $filter.value;\n\n                                // Make sure the value is not empty\n                                if (\n                                    filterValue !== ''\n                                    && filterValue != '0'\n                                ) {\n                                    // Get the TEXT of the option\n                                    filenameParts.push(\n                                        $filter.querySelector( `option[value=\"${ filterValue }\"]` )\n                                            .innerText\n                                            .trim()\n                                    );\n                                }\n                            }\n                        } catch ( e ) {}\n                    } );\n\n                    // Return the name\n                    return filenameParts.join( ' - ' );\n                }, \n            }\n\n            let exportButtons = [];\n            if ($table.dataset.csv == 'show') {\n                exportButtons.push({\n                    extend: 'csv',\n                    text: groupEssays.i18n.exportCSV\n                });\n            }\n            if ($table.dataset.excel == 'show') {\n                exportButtons.push({\n                    extend: 'excelHtml5',\n                    text: groupEssays.i18n.exportExcel\n                });\n            }\n\n            // Log table attributes and buttons configuration\n            // console.log('Table dataset attributes:', $table.dataset);\n            // console.log('Report buttons:', exportButtons);\n\n            var tableVars = {\n                lengthMenu: [\n                    [15, 30, 60, -1],\n                    [15, 30, 60, groupEssays.localized.all]\n                ],\n                order: tableOrder,\n                responsive: true,\n                iDisplayLength: 30,\n                columns: columns,\n                columnDefs: [{\n                    \"targets\": 0,\n                    \"orderable\": false,\n                    \"searchable\": false,\n                    'render': function (data, type, full, meta){\n                        return '<input type=\"checkbox\" name=\"post[]\" value=\"' + $('<div/>').text(data).html() + '\">';\n                    },\n                    'checkboxes': {\n                        'selectRow': true\n                    }\n                }],\n                select: {\n                    style: 'multi',\n                    selector: 'td:first-child'\n                },\n                stateSave: true,\n\n                dom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n                buttons: exportButtons,\n            };\n\n            if (null !== this.uoTable) {\n                this.uoTable.destroy();\n\n                tableVars.data = data;\n\n                tableVars.columnDefs = [{\n                    className: 'uo-groups__cell-checkbox',\n                    targets:   [0]\n                }];\n\n                tableVars.columns = [\n                    {\n                        data:      'id',\n                        title:     groupEssays.localized.idColumn,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                    },\n                    {\n                        data:      'student',\n                        title:     groupEssays.localized.student,\n                        visible:   groupEssays.columns_visibilities.student,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--student',\n                    },\n                    {\n                        data:      'title',\n                        title:     groupEssays.localized.title,\n                        visible:   groupEssays.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                    },\n                    {\n                        data:      'first_name',\n                        title:     groupEssays.localized.first_name,\n                        visible:   groupEssays.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                    },\n                    {\n                        data:      'last_name',\n                        title:     groupEssays.localized.last_name,\n                        visible:   groupEssays.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                    },\n                    {\n                        data:      'author',\n                        title:     groupEssays.localized.author,\n                        visible:   groupEssays.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                    },\n                    {\n                        data:      'status',\n                        title:     groupEssays.localized.status,\n                        visible:   groupEssays.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                    },\n                    {\n                        data:      'points',\n                        title:     groupEssays.localized.points,\n                        visible:   groupEssays.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                    },\n                    {\n                        data:      'question_text',\n                        title:     groupEssays.localized.question_text,\n                        visible:   groupEssays.columns_visibilities.question_text,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                    },\n                    {\n                        data:      'content',\n                        title:     groupEssays.localized.content,\n                        visible:   groupEssays.columns_visibilities.content,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                    },\n                    {\n                        data:      'assignedCourse',\n                        title:     groupEssays.localized.assignedCourse,\n                        visible:   groupEssays.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                    },\n                    {\n                        data:      'assignedlesson',\n                        title:     groupEssays.localized.assignedlesson,\n                        visible:   groupEssays.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                    },\n                    {\n                        data:      'assignedquiz',\n                        title:     groupEssays.localized.assignedquiz,\n                        visible:   groupEssays.columns_visibilities.assignedquiz,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                    },\n                    {\n                        data:      'comments',\n                        title:     groupEssays.localized.comments,\n                        visible:   groupEssays.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                    },\n                    {\n                        data:      'date',\n                        title:     groupEssays.localized.date,\n                        visible:   groupEssays.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                    },\n                ];\n            }\n\n            tableVars.language = {\n                processing:        groupEssays.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupEssays.localized.searchPlaceholder,\n                lengthMenu:        groupEssays.localized.lengthMenu,\n                info:              groupEssays.localized.info,\n                infoEmpty:         groupEssays.localized.infoEmpty,\n                infoFiltered:      groupEssays.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupEssays.localized.loadingRecords,\n                zeroRecords:       groupEssays.localized.zeroRecords,\n                emptyTable:        groupEssays.localized.emptyTable,\n                paginate: {\n                    first:         groupEssays.localized.paginate.first,\n                    previous:      groupEssays.localized.paginate.previous,\n                    next:          groupEssays.localized.paginate.next,\n                    last:          groupEssays.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupEssays.localized.sortAscending,\n                    sortDescending: groupEssays.localized.sortDescending\n                }\n            };\n\n            tableVars.initComplete = function(settings, json) {\n                // console.log('initComplete called');\n                \n                try {\n                    // Insert column filter after search box\n                    var $filterContainer = window.ulgmGroupManagement.Essays.addColumnsFilter(settings);\n                    // console.log('Filter container created:', $filterContainer.length > 0);\n                    \n                    var $searchBox = jQuery('.dt-search');\n                    // console.log('Search box found:', $searchBox.length > 0);\n                    \n                    // Insert after search box\n                    if ($searchBox.length > 0 && $filterContainer.length > 0) {\n                        $filterContainer.insertAfter($searchBox);\n                        // console.log('Filter container inserted after search box');\n                    } else {\n                        // Fallback - insert at the end of the datatable header\n                        $filterContainer.appendTo('.uo-groups-datatable-header');\n                        // console.log('Filter container inserted as fallback');\n                    }\n                    \n                    // Ensure column visibility toggles are working with DataTables 2.x\n                    jQuery('.dataTables-filter-columns input[type=\"checkbox\"]').on('change', function() {\n                        var columnIndex = jQuery(this).attr('id').replace('dt_', '');\n                        var column = window.ulgmGroupManagement.Essays.uoTable.column(columnIndex);\n                        var isChecked = jQuery(this).is(':checked');\n                        \n                        // console.log('Toggling column visibility:', columnIndex, isChecked);\n                        column.visible(isChecked);\n                    });\n                    \n                    // Add a class to make the customize columns UI visible\n                    setTimeout(function() {\n                        jQuery('.dataTables-filter-columns').addClass('dt-initialized');\n                    }, 100);\n                } catch (error) {\n                    console.error('Error in initComplete:', error.message);\n                }\n            };\n\n            this.uoTable = jQuery('#uo-group-essays-table');\n\n            // Check for existing DataTable and properly destroy it\n            if ($.fn.DataTable.isDataTable('#uo-group-essays-table')) {\n                console.log('Destroying existing DataTable instance');\n                $('#uo-group-essays-table').DataTable().destroy();\n            }\n\n            if (jQuery('#uo-group-essays-table').length > 0) {\n                try {\n                    // console.log('Initializing DataTable with configuration');\n                    \n                    // Remove problematic properties for DataTables 2.x\n                    if (tableVars.headerRows !== undefined) {\n                        // console.log('Removing headerRows property');\n                        delete tableVars.headerRows;\n                    }\n                    \n                    // Add ColReorder to the configuration\n                    tableVars.colReorder = {\n                        enable: true,\n                        fixedColumnsLeft: 1  // Keep checkbox column fixed\n                    };\n                    \n                    // Initialize DataTable with ColReorder included\n                    this.uoTable = jQuery('#uo-group-essays-table').DataTable(tableVars);\n                    // console.log('DataTable initialized successfully');\n                    \n                    // Verify ColReorder is available\n                    if (!jQuery.fn.dataTable.ColReorder) {\n                        console.warn('ColReorder extension not available despite being configured');\n                    } else {\n                        // console.log('ColReorder extension initialized with DataTable');\n                    }\n                    \n                    var search = window.ulgmGroupManagement.Essays.getParam('search');\n                    if (search) window.ulgmGroupManagement.Essays.uoTable.search(search).draw();\n                } catch (error) {\n                    console.error('Error initializing DataTable:', error.message);\n                    \n                    // Try with minimal configuration\n                    try {\n                        console.log('Trying minimal configuration');\n                        this.uoTable = jQuery('#uo-group-essays-table').DataTable({\n                            responsive: true,\n                            columns: tableVars.columns\n                        });\n                    } catch (fallbackError) {\n                        console.error('Fallback initialization failed:', fallbackError.message);\n                    }\n                }\n            }\n        },\n\n        createTableHidden: function (data) {\n\n            var columns = [\n                {\n                    title:     groupEssays.localized.title,\n                    data:      'title',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                },\n                {\n                    title:     groupEssays.localized.student,\n                    data:      'student',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--student',\n                },\n                {\n                    title:     groupEssays.localized.first_name,\n                    data:      'first_name',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                },\n                {\n                    title:     groupEssays.localized.last_name,\n                    data:      'last_name',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                },\n                {\n                    title:     groupEssays.localized.author,\n                    data:      'author',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                },\n                {\n                    title:     groupEssays.localized.status,\n                    data:      'status',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                },\n                {\n                    title:     groupEssays.localized.points,\n                    data:      'points',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                },\n                {\n                    title:     groupEssays.localized.question_text,\n                    data:      'question_text',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                },\n                {\n                    title:     groupEssays.localized.content,\n                    data:      'content',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                },\n                {\n                    title:     groupEssays.localized.assignedCourse,\n                    data:      'assignedCourse',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                },\n                {\n                    title:     groupEssays.localized.assignedlesson,\n                    data:      'assignedlesson',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                },\n                {\n                    title:     groupEssays.localized.assignedquiz,\n                    data:      'assignedquiz',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                },\n                {\n                    title:     groupEssays.localized.comments,\n                    data:      'comments',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                },\n                {\n                    title:     groupEssays.localized.date,\n                    data:      'date',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                },\n            ];\n\n            var tableVars = {\n                iDisplayLength: -1,\n                columns: columns,\n                dom: 'Bfrtip',\n                buttons: [\n                    {\n                        extend: 'csv',\n                        text: groupEssays.localized.buttons.csvExport,\n                        title: 'lesson-report'\n                    }\n                ],\n                stateSave: true,\n                responsive: true,\n            };\n\n            if ( $.fn.DataTable.isDataTable( '#uo-lesson-report-table-hidden' ) ){\n\n                $( '#uo-lesson-report-table-hidden' ).DataTable().destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {\n                        data:      'id',\n                        title:     groupEssays.localized.idColumn,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                    },\n                    {\n                        data:      'title',\n                        title:     groupEssays.localized.title,\n                        visible:   groupEssays.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                    },\n                    {\n                        data:      'student',\n                        title:     groupEssays.localized.student,\n                        visible:   groupEssays.columns_visibilities.student,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--student',\n                    },\n                    {\n                        data:      'first_name',\n                        title:     groupEssays.localized.first_name,\n                        visible:   groupEssays.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                    },\n                    {\n                        data:      'last_name',\n                        title:     groupEssays.localized.last_name,\n                        visible:   groupEssays.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                    },\n                    {\n                        data:      'author',\n                        title:     groupEssays.localized.author,\n                        visible:   groupEssays.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                    },\n                    {\n                        data:      'status',\n                        title:     groupEssays.localized.status,\n                        visible:   groupEssays.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                    },\n                    {\n                        data:      'points',\n                        title:     groupEssays.localized.points,\n                        visible:   groupEssays.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                    },\n                    {\n                        data:      'question_text',\n                        title:     groupEssays.localized.question_text,\n                        visible:   groupEssays.columns_visibilities.question_text,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                    },\n                    {\n                        data:      'content',\n                        title:     groupEssays.localized.content,\n                        visible:   groupEssays.columns_visibilities.content,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                    },\n                    {\n                        data:      'assignedCourse',\n                        title:     groupEssays.localized.assignedCourse,\n                        visible:   groupEssays.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                    },\n                    {\n                        data:      'assignedlesson',\n                        title:     groupEssays.localized.assignedlesson,\n                        visible:   groupEssays.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                    },\n                    {\n                        data:      'assignedquiz',\n                        title:     groupEssays.localized.assignedquiz,\n                        visible:   groupEssays.columns_visibilities.assignedquiz,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                    },\n                    {\n                        data:      'comments',\n                        title:     groupEssays.localized.comments,\n                        visible:   groupEssays.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                    },\n                    {\n                        data:      'date',\n                        title:     groupEssays.localized.date,\n                        visible:   groupEssays.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                    },\n                ];\n\n            }\n\n            tableVars.language = {\n                processing:        groupEssays.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupEssays.localized.searchPlaceholder,\n                lengthMenu:        groupEssays.localized.lengthMenu,\n                info:              groupEssays.localized.info,\n                infoEmpty:         groupEssays.localized.infoEmpty,\n                infoFiltered:      groupEssays.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupEssays.localized.loadingRecords,\n                zeroRecords:       groupEssays.localized.zeroRecords,\n                emptyTable:        groupEssays.localized.emptyTable,\n                paginate: {\n                    first:         groupEssays.localized.paginate.first,\n                    previous:      groupEssays.localized.paginate.previous,\n                    next:          groupEssays.localized.paginate.next,\n                    last:          groupEssays.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupEssays.localized.sortAscending,\n                    sortDescending: groupEssays.localized.sortDescending\n                }\n            };\n\n            this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden');\n\n            if ( jQuery('#uo-lesson-report-table-hidden').length > 0 ){\n                try {\n                    // Use the same technique for hidden table\n                    if (tableVars.headerRows !== undefined) {\n                        delete tableVars.headerRows;\n                    }\n                    \n                    // Add ColReorder to hidden table as well\n                    tableVars.colReorder = {\n                        enable: true\n                    };\n                    \n                    this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden').DataTable(tableVars);\n                } catch (error) {\n                    console.error('Error initializing hidden DataTable:', error.message);\n                }\n            }\n\n            $('.buttons-csv').show();\n\n        },\n\n        flattenArray: function (array, remove_stats) {\n\n            var flatArray = [];\n\n            jQuery.each(array, function (key, value) {\n\n                var lesson_name = value;\n                jQuery.each(value.question, function (key2, value2) {\n                    flatArray.push({\n                        \"title\": value.title,\n                        \"author\": value.author,\n                        \"status\": value.status,\n                        \"points\": value.points,\n                        \"question_text\": value.question_text,\n                        \"student\": value.student,\n                        \"content\": value.content,\n                        \"assignedCourse\": value.assignedCourse,\n                        \"assignedlesson\": value.assignedlesson,\n                        \"assignedquiz\": value.assignedquiz,\n                        \"comments\": value.comments,\n                        \"date\": value.date,\n                    })\n                });\n\n            });\n\n            return flatArray;\n\n        },\n\n        create_options: function( source, ids = [] ){\n            /*\n            * @param source string, values \"group\", \"course\", \"lesson\"\n            * @param ids    array,  ids of options that have to be shown\n            *\n            * @return array of jQuery DOM elements with the option elements\n            */\n\n            let options = [];\n\n            // Convert parameters to int\n            ids = ids.map( Number );\n\n            // Add empty option\n            // if there are more then one option\n            if ( ids.length > 1 ){\n                ids.push( 0 );\n            }\n\n            // Get options by ID\n            this.elements.select[ source ].options.each(function(){\n                let $this   = $(this).clone(),\n                    id      = parseInt( $this.val() );\n\n                $this.show();\n                if ( ids.indexOf( id ) != -1 ){\n                    options.push( $this );\n                }\n            });\n\n            // If there is only one option and it's a \"Select a x\" option\n            // Then don't return any option\n            if ( options.length == 1 && parseInt( options[ 0 ].val() ) == 0 ){\n                options = [];\n            }\n\n            // Check if there aren't options selected\n            if ( options.length == 0 ){\n                // Add the no option\n                options.push( this.elements.select[ source ].options.filter( '.ulgm-essays-no-results' ) );\n            }\n\n            // Return options\n            return options;\n        },\n\n        select_option: function( $select, value ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n        },\n        __select_option: function( $select, index ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[' + index + ']' ).prop( 'selected', true );\n        },\n        addColumnsFilter: function (state) {\n            // console.log('addColumnsFilter called with state:', state.sInstance);\n            \n            var colFilter_container = $( `<div id=\"${ state.sInstance }-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${ state.sInstance }-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${ state.sInstance }-filter-columns-field\" data-label-enable=\"${ groupEssays.localized.customizeColumns }\" data-label-disable=\"${ groupEssays.localized.hideCustomizeColumns }\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n            __this = window.ulgmGroupManagement.Essays;\n            \n            try {\n                // DataTables 2.x uses different property structure\n                // First try DataTables 2.x structure\n                if (state.aoColumns) {\n                    // console.log('Using aoColumns structure');\n                    jQuery.each(state.aoColumns, function (key, value) {\n                        if (key > 0) {\n                            var title = value.sTitle;\n                            var visible = value.bVisible;\n                            // console.log(`Adding checkbox for column ${key}: \"${title}\", visible: ${visible}`);\n                            colFilter_container.find('.dataTables-filter-columns__fields').append(__this.addColumnCheckbox(title, key, visible));\n                        }\n                    });\n                } \n                // Fallback to saved state if available\n                else if (state.oSavedState && state.oSavedState.columns) {\n                    // console.log('Using oSavedState structure');\n                    jQuery.each(state.oSavedState.columns, function (key, value) {\n                        if (key > 0) {\n                            // Find the column title from the table header\n                            var title = jQuery('#uo-group-essays-table th').eq(key).text();\n                            var visible = value.visible;\n                            // console.log(`Adding checkbox for column ${key}: \"${title}\", visible: ${visible}`);\n                            colFilter_container.find('.dataTables-filter-columns__fields').append(__this.addColumnCheckbox(title, key, visible));\n                        }\n                    });\n                }\n                // As a last resort, get columns directly from API\n                else if (__this.uoTable) {\n                    // console.log('Using uoTable API directly');\n                    var columns = __this.uoTable.settings().init().columns;\n                    jQuery.each(columns, function (key, value) {\n                        if (key > 0) {\n                            var title = value.title;\n                            var visible = value.visible !== false;\n                            // console.log(`Adding checkbox for column ${key}: \"${title}\", visible: ${visible}`);\n                            colFilter_container.find('.dataTables-filter-columns__fields').append(__this.addColumnCheckbox(title, key, visible));\n                        }\n                    });\n                }\n                \n                // console.log('Column filter container created with', colFilter_container.find('.dataTables-filter-columns__fields input').length, 'checkboxes');\n            } catch (error) {\n                console.error('Error building column filter:', error.message);\n            }\n\n            return colFilter_container;\n        },\n        addColumnCheckbox: function (label, column_key, is_visible) {\n            var checkbox = jQuery('<input />', {\n                type: 'checkbox',\n                id: 'dt_' + column_key,\n                value: label,\n                checked: is_visible\n            });\n            checkbox.on('change', function (e) {\n                // Get the column API object\n                var headers = window.ulgmGroupManagement.Essays.uoTable.columns().header();\n                var current_check = jQuery(this).attr('value');\n                var is_checked = jQuery(this).is(':checked');\n\n                jQuery.each(headers, function (key, selectot) {\n                    if (jQuery(selectot).html() === current_check) {\n                        var column = window.ulgmGroupManagement.Essays.uoTable.column(key);\n                        if (is_checked) {\n                            // Toggle the visibility\n                            column.visible(true);\n                        } else {\n                            column.visible(false);\n                        }\n                    }\n                });\n\n            });\n            var $label = jQuery('<label/>').append(checkbox).append(label);\n            return $label;\n        },\n        addEvents: function (){\n            var _this = this;\n\n            // Handle click on \"Select all\" control\n            $('#uo-groups-essays-management').on('click',' #uo-essays-select-all', function(){\n                // Check/uncheck checkboxes for all rows in the table\n                $('input[name=\"post[]\"]').prop('checked', this.checked);\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-essays-buttons').show();\n                } else {\n                    $('.group-essays-buttons').hide();\n                    $('#uo-essays-select-all').prop('checked', false);\n                }\n            });\n\n            // Handle click on checkbox to set state of \"Select all\" control\n            $('#uo-group-essays-table tbody').on('change', 'input[name=\"post[]\"]', function(){\n                // If checkbox is not checked\n                if(!this.checked){\n                    var el = $('#uo-essays-select-all').get(0);\n                    // If \"Select all\" control is checked and has 'indeterminate' property\n                    if(el && el.checked && ('indeterminate' in el)){\n                        // Set visual state of \"Select all\" control\n                        // as 'indeterminate'\n                        el.indeterminate = true;\n                    }\n                }\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-essays-buttons').show();\n                } else {\n                    $('.group-essays-buttons').hide();\n                    $('#uo-essays-select-all').prop('checked', false);\n                }\n            });\n\n            $('#uo-groups-essays-management').on('click','#group-approve-essays-button',function(){\n                if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('approve_essay');\n                }\n                jQuery('form#uo-groups-essays-management-form').submit();\n            });\n\n            $('#uo-groups-essays-management').on('click','#group-trash-essays-button',function(){\n                if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('trash_essay');\n                }\n                jQuery('form#uo-groups-essays-management-form').submit();\n            });\n\n            // Listen changes to the \"Group\" dropdown\n            this.elements.select.group.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $( this );\n\n                // DEBUG: console.log( '--------- GROUP ---------' );\n                // DEBUG: console.log( '-- GROUP: Value changed' );\n\n                // COURSE: Show\n                // _this.elements.select.course.element.show();\n\n                // Group ID\n                let group_id = $this.val();\n\n                // Check if the group ID is empty (\"Select an option\")\n                if ( group_id == 0 || group_id == null ){\n                    // COURSE: Remove all the options\n                    _this.elements.select.course.element.empty();\n                    // COURSE: Get the \"Select course\" option\n                    let options_course = _this.create_options( 'course' );\n                    // COURSE: Set the options\n                    _this.elements.select.course.element.html( options_course );\n\n                    // LESSON: Remove all the options\n                    _this.elements.select.lesson.element.empty();\n                    // LESSON: Get the \"Select lesson\" option\n                    let options = _this.create_options( 'lesson' );\n                    // LESSON: Set the options\n                    _this.elements.select.lesson.element.html( options );\n\n                    // QUIZ: Get the \"Select lesson\" option\n                    let options_quiz = _this.create_options( 'quiz' );\n                    // QUIZ: Get the \"Select lesson\" option\n                    _this.elements.select.quiz.element.html( options_quiz );\n\n                    // Render the tables again\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n\n                    // Return\n                    return;\n                }\n\n                // Get the relationships\n                let courses_to_show = groupEssays.courseGrouplessons[ group_id ];\n                courses_to_show     = courses_to_show === undefined ? [] : courses_to_show;\n\n                // Create the options\n                let options = _this.create_options( 'course', courses_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptions = options.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptions && options.length > 0 ){\n                    // DEBUG: console.log( '-- COURSES: There are courses' );\n                    // DEBUG: console.log( '-- COURSES: Hide the no results option' );\n\n                    // COURSE: Hide the \"no results\" option\n                    $noResultsOption = _this.elements.select[ 'course' ].element.find( '.ulgm-essays-no-results' );\n                    $noResultsOption.hide();\n\n                    // Add the options to the COURSE dropdown\n                    _this.elements.select.course.element.html( options );\n                    _this.elements.select.course.no_element.hide();\n\n                    // Select the empty option\n                    _this.__select_option( _this.elements.select.course.element, 0 );\n\n                    // Check if there is only one available course\n                    if ( options.length == 1 ){\n                        // DEBUG: console.log( '---- COURSES: Only one course found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'course' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.course.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'course' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.course.element.prop( 'disabled', false );\n                    }\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.groupId = group_id;\n                    // Trigger change after value set on load\n                    _this.elements.select.course.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- COURSES: There are NOT courses' );\n\n                    // Remove the \"h3-select\" class, so it looks like a select\n                    _this.elements.select[ 'course' ].element.removeClass( 'h3-select' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    // _this.elements.select.course.element.empty();\n\n                    let options_course = _this.create_options( 'course' );\n                    _this.elements.select.course.element.html( options_course );\n                    _this.elements.select.course.element.prop( 'disabled', true );\n\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    let options_quiz = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options_quiz );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n\n                    // Render the table again\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.groupId = group_id;\n\n                    // COURSE: Show the \"no results\" option\n                    $noResultsOption = _this.elements.select[ 'course' ].element.find( '.ulgm-essays-no-results' );\n                    $noResultsOption.show();\n                }\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( 0, 0, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status );\n            });\n\n            this.elements.select.course.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // DEBUG: console.log( '--------- COURSE ---------' );\n                // DEBUG: console.log( '-- COURSE: Value changed' );\n\n                // Course ID\n                let course_id = $this.val();\n\n                // Return if course id is 0\n                if ( course_id == 0 || course_id == '' ){\n                    _this.elements.select.lesson.element.empty();\n\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    let options_quiz = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options_quiz );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n                    return;\n                }\n\n                // Check if this group has at least one course with lessons\n                let lessons_to_show = [];\n                if ( \n                    typeof groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ] !== 'undefined' && \n                    typeof groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] !== 'undefined' && \n                    Array.isArray( groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] )\n                ) {\n                    // Get relationships\n                    lessons_to_show = groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ];\n                }\n\n                // Create options\n                let options = _this.create_options( 'lesson', lessons_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptions = options.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptions && options.length > 0 ){\n                    // DEBUG: console.log( '-- LESSONS: There are lessons' );\n\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.lesson.element.show();\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', false );\n\n                    jQuery( '#uo-group-report-lessons option' ).show();\n                    _this.elements.select.lesson.no_element.hide();\n\n                    // Check if there is only one available course\n                    if ( options.length == 1 ){\n                        // DEBUG: console.log( '---- LESSON: Only one lesson found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'lesson' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.lesson.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'lesson' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.lesson.element.prop( 'disabled', false );\n                    }\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.lesson.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.lesson.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- LESSONS: There are NOT lessons' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n                }\n            });\n\n            this.elements.select.lesson.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // DEBUG: console.log( '--------- LESSON ---------' );\n                // DEBUG: console.log( '-- LESSON: Value changed' );\n\n                // lesson ID\n                let lesson_id = parseInt( $this.val() );\n                let course_id = parseInt( _this.elements.select.course.element.val() );\n                let group_id = parseInt( _this.elements.select.group.element.val() );\n\t\t\t\t\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.lessonId = lesson_id;\n\n                // Reset Quiz ID\n                let current_quiz_id = parseInt( window.ulgmGroupManagement.Essays.quizId );\n                window.ulgmGroupManagement.Essays.quizId = 0;\n                _this.elements.select.quiz.element.val( 0 );\n\n                let group_quizzes = typeof groupEssays.lesson_quizzes[ group_id ] !== 'undefined' ? groupEssays.lesson_quizzes[ group_id ] : {};\n                let course_quizzes = typeof group_quizzes[ course_id ] !== 'undefined' ? group_quizzes[ course_id ] : {};\n                let lesson_quizzes = typeof course_quizzes[ lesson_id ] !== 'undefined' ? course_quizzes[ lesson_id ] : {};\n\t\t\t\tlet ommitted_group_quizzes = typeof groupEssays.omitted_topic_quizzes[ group_id ] !== 'undefined' ? groupEssays.omitted_topic_quizzes[ group_id ] : {};\n                let quizzes_to_show = [];\n\n                if (  group_id > 0 && course_id > 0 && lesson_id > 0 ) {\n                    // Update Quiz Options based on Group, Course and Lesson\n                    quizzes_to_show = lesson_quizzes && Object.keys(lesson_quizzes).length > 0  ? Object.values(lesson_quizzes) : [];\n\t\t\t\t\t// Check if topic quizzes were omitted.\n\t\t\t\t\tlet omitted_topic_quizzes = ommitted_group_quizzes && ommitted_group_quizzes.hasOwnProperty( course_id + '-' + lesson_id ) ? ommitted_group_quizzes[ course_id + '-' + lesson_id ] : [];\n\t\t\t\t\t// Remove omitted topic quizzes from quizzes_to_show\n\t\t\t\t\tif ( omitted_topic_quizzes.length > 0 ) {\n\t\t\t\t\t\tquizzes_to_show = quizzes_to_show.filter( function( quiz ) {\n\t\t\t\t\t\t\treturn !omitted_topic_quizzes.includes( quiz );\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n                } else if ( group_id > 0 && course_id > 0 ) {\n                    // Update Quiz Options based on Group and Course\n                    quizzes_to_show = Object.values( course_quizzes ).reduce( ( accumulator, currentValue ) => {\n                        return accumulator.concat( Object.values( currentValue ) );\n                    }, [] );\n\n                } else if ( group_id > 0 ) {\n                    // Update Quiz Options based on Group\n                    quizzes_to_show = Object.values( group_quizzes ).reduce( ( accumulator, currentValue ) => {\n                        return accumulator.concat( Object.values( currentValue ) );\n                    }, [] );\n\n                }\n\n                if ( quizzes_to_show.length > 0 ) {\n                    let options_quizzes = _this.create_options( 'quiz', quizzes_to_show );\n                    _this.elements.select.quiz.element.show();\n                    _this.elements.select.quiz.element.html( options_quizzes );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                    jQuery('#uo-group-report-quizzes option').show();\n\n                    // Reset Quiz ID if it's in the list of quizzes to show.\n                    if ( quizzes_to_show.includes( current_quiz_id ) ) {\n                        _this.elements.select.quiz.element.val( current_quiz_id );\n                        window.ulgmGroupManagement.Essays.quizId = current_quiz_id;\n                    }\n\n                } else {\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                }\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( lesson_id, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n            });\n\n            this.elements.select.quiz.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n                // lesson ID\n                let quiz_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.quizId = quiz_id;\n\n                // DEBUG: console.log( '--------- QUIZ ---------' );\n                // DEBUG: console.log( '-- QUIZ: Value changed' );\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( window.ulgmGroupManagement.Essays.lessonId, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, window.ulgmGroupManagement.Essays.quizId, window.ulgmGroupManagement.Essays.status );\n            });\n\n            this.elements.select.status.element.on( 'change', function(){\n                // DEBUG: console.log( '--------- STATUS ---------' );\n                // DEBUG: console.log( '-- STATUS: Value changed' );\n\n                // Save this DOM element\n                let $this = $(this);\n                // lesson ID\n                let status = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.status = status;\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( window.ulgmGroupManagement.Essays.lessonId, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, window.ulgmGroupManagement.Essays.quizId, window.ulgmGroupManagement.Essays.status );\n            });\n\n            // Trigger a change event on the groups dropdown on page load\n            this.elements.select.group.element.trigger( 'change' );\n\n            // Add event listener for opening and closing details\n            $('#uo-lesson-report-table').on('click', 'td.details-control', function () {\n\n                var tr = $(this).closest('tr');\n                var row = window.ulgmGroupManagement.Essays.uoTable.row(tr);\n\n                if (row.child.isShown()) {\n                    // This row is already open - close it\n                    row.child.hide();\n                    tr.removeClass('shown');\n                }\n                else {\n                    // Open this row\n                    row.child(window.ulgmGroupManagement.Essays.format(row.data())).show();\n                    tr.addClass('shown');\n                }\n            });\n\n        },\n\n        format: function (d) {\n\n            var rows = '';\n            $.each(d.answer, function (key, value) {\n                rows +=\n                    '<tr>' +\n                    '<td>' + d.question[key] + '</td>' +\n                    '<td>' + value + '</td>' +\n                    '</tr>';\n            });\n            // `d` is the original data object for the row\n            return '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n        },\n        isNormalInteger: function (str) {\n            var n = ~~Number(str);\n            return String(n) === str && n > 0;\n        },\n\n        getEssaysData: function (lessonId, courseId, groupId, quizId, status) {\n\n            var i = 0;\n\n            var loading = setInterval(function () {\n                i = ++i % 4;\n                $(\"#uo-group-essays-table tbody\").html(\"<div id='group-loader'>\" + groupEssays.localized.loadingRecords + new Array(i + 1).join(\".\") + \"</div>\");\n            }, 500);\n\n\n            var dataVars = {\n                groupId: groupId,\n                lessonId: lessonId,\n                quizId: quizId,\n                courseId: courseId,\n                status:status,\n            };\n\n            $.ajax({\n\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'get_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n\n                    clearInterval(loading);\n                    $('#group-loader').remove();\n\n                    window.ulgmGroupManagement.Essays.createTable(response);\n                    window.ulgmGroupManagement.Essays.createTableHidden(response);\n\n\n                },\n                fail: function (response) {\n                    alert('Rest Call Failed');\n                }\n\n            });\n\n        },\n        editEssaysData: function (postId) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var dataVars = {\n                essay_id: postId,\n                action: 'edit_essays',\n                post_type:'sfwd-essay',\n                security:groupEssays.ajax_nonce\n            };\n\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'edit_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    $(\".modal\").remove();\n                    \n                    const modal = $(response.html);\n\n                    modal.appendTo( 'body' );\n\n                    modal.on( 'modal:open.uncanny-groups-modal', () => {\n                        // Focus on the first field\n                        const fieldField = $( modal ).find( 'input:visible, select:visible' ).first();\n                        \n                        if ( fieldField.length > 0 ) {\n                            fieldField.trigger( 'focus' );\n                        } else {\n                            $( modal ).find( 'button:visible:first' ).trigger( 'focus' );\n                        }\n\n                        modal.off( 'modal:open.uncanny-groups-modal' );\n                    } );\n\n                    modal.modal();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        saveEssaysData: function () {\n            if (typeof tinymce !== 'undefined') {\n                for (edId in tinyMCE.editors) {\n                    if (\n                        typeof tinyMCE.editors[edId] !== 'undefined' &&\n                        typeof tinyMCE.editors[edId].save !== 'undefined' &&\n                        tinyMCE.editors[edId].save instanceof Function) {\n                        tinyMCE.editors[edId].save();\n                    }\n                }\n\n            }\n            var dataVars = $('#edit_essay_form').serialize();\n            var spinner = $('.uo-modal-spinner');\n            //$('#group-management-message').hide();\n            var gm_modal_message = $('.group-management-modal-message');\n            gm_modal_message.hide();\n            gm_modal_message.removeClass('uo-groups-message-ok');\n            gm_modal_message.removeClass('uo-groups-message-error');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'save_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    if( response.success ) {\n                       gm_modal_message.addClass('uo-groups-message-ok');\n                       window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger('change');\n                    } else {\n                       gm_modal_message.addClass('uo-groups-message-error');\n                    }\n                    gm_modal_message.html(response.message).show();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        actionsEssays: function ( dataVars ) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'save_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger('change');\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        }\n    };\n\n\n})(jQuery);\n","( function ( $ ){ // Self Executing function with $ alias for jQuery\n\n\t/**\n\t *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n\t *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n\t */\n\t$( document ).ready( function (){\n\n\t\tif ($( '#group-report' ).length > 0) {\n\t\t\twindow.ulgmGroupManagement.reportingTemplating.constructor();\n\t\t}\n\n\t\tif ($( '#uo-quiz-report-table' ).length > 0) {\n\t\t\twindow.ulgmGroupManagement.quizReport.constructor();\n\t\t}\n\n\t\tif ($( '#uo-group-report-course' ) > 0) {\n\t\t\t$( '#uo-group-report-course' ).select2();\n\t\t}\n\n\t} );\n\n\twindow.ulgmGroupManagement.reportingTemplating = {\n\n\t\trowTemplate: '',\n\t\titemTemplate: '',\n\t\tliTemplate: '',\n\t\titems: [],\n\t\titemsEl: [],\n\t\tjpL: false,\n\n\t\t// initialize the code\n\t\tconstructor: function (){\n\t\t\tif ($( '#group-report' ).length > 0) {\n\t\t\t\t// Get Template\n\t\t\t\tthis.itemTemplate = $( 'script[data-template=\"item\"]' ).text().split( /\\$\\{(.+?)\\}/g );\n\t\t\t}\n\t\t},\n\n\t\tsetItems: function ( items ){\n\n\t\t\tvar _this = this;\n\n\t\t\t// Reset Items\n\t\t\tthis.itemsEl = [];\n\n\t\t\t// Create items from JSON\n\t\t\titems.map( function ( item ){\n\t\t\t\t_this.itemsEl.push( $( '<div class=\"uo-tbl-item body-row\">' + _this.itemTemplate.map( _this.render( item ) ).join( '' ) + '</div>' ) );\n\t\t\t\treturn '<div class=\"uo-tbl-item body-row\">' + _this.itemTemplate.map( _this.render( item ) ).join( '' ) + '</div>';\n\t\t\t} );\n\n\t\t},\n\n\t\trender: function ( props ){\n\t\t\treturn function ( tok, i ){\n\t\t\t\treturn ( i % 2 ) ? props[tok] : tok;\n\t\t\t};\n\t\t}\n\t};\n\n\twindow.ulgmGroupManagement.populateCoursesDropDown = function ( data ){\n\n\t\tvar courseDropDown = $( '#uo-group-report-course' );\n\t\tcourseDropDown.empty();\n\n\t\t$( '#course-group-id' ).val( data.group_id );\n\n\t\tif (data.group_courses.length > 1) {\n\t\t\tcourseDropDown.append(\n\t\t\t\t$( '<option>', {\n\t\t\t\t\tvalue: '0',\n\t\t\t\t\ttext: ulgmRestApiSetup.localized.selectCourse\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t\t/**/\n\n\t\t$.each( data.group_courses, function ( i, course ){\n\n\t\t\tcourseDropDown.append(\n\t\t\t\t$( '<option>', {\n\t\t\t\t\tvalue: course.ID,\n\t\t\t\t\ttext: course.post_title\n\t\t\t\t} )\n\t\t\t);\n\n\t\t} );\n\n\t\tcourseDropDown.show().trigger( 'change' );\n\n\t};\n\n\n\twindow.ulgmGroupManagement.quizReport = {\n\n\t\tuoTable: null,\n\n\t\tuoTableHidden: null,\n\n\t\tquizId: 0,\n\n\t\tgroupId: 0,\n\n\t\tcourseId: 0,\n\n\t\tconstructor: function (){\n\t\t\tthis.$elements = {\n\t\t\t\tfilters: {\n\t\t\t\t\tgroup: document.getElementById( 'uo-group-report-group' ),\n\t\t\t\t\tcourse: document.getElementById( 'uo-group-report-courses' ),\n\t\t\t\t\tquiz: document.getElementById( 'uo-group-report-quizzes' ),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.createTable();\n\t\t\tthis.createTableHidden();\n\t\t\tthis.addEvents();\n\n\t\t\t// Trigger change on the first dropdown on load\n\t\t\tthis.$elements.filters.group.dispatchEvent( new Event( 'change' ) );\n\t\t},\n\n\t\tinitSelect2: function() {\n\t\t\ttry {\n\t\t\t\t[ this.$elements.filters.group, this.$elements.filters.course, this.$elements.filters.quiz ].forEach( ( $element ) => {\n\t\t\t\t\t$element.select2();\n\t\t\t\t} );\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.error( e );\n\t\t\t}\n\t\t},\n\n\t\tcreateTable: function ( data ){\n\n\t\t\tulgmQuizReportShortcode.table = ulgmQuizReportShortcode.table || {};\n\n\t\t\tlet columnsVisibility = jQuery( '#uo-quiz-report-table' ).data( 'table_columns' );\n\t\t\tcolumnsVisibility     = columnsVisibility.split( ',' );\n\n\t\t\tvar columnsConfig = ulgmQuizReportShortcode.table.columnsConfig;\n\t\t\tvar columns = Object.entries(columnsConfig).map(([key, value], i) => {\n\t\t\t\tvar column = {\n\t\t\t\t\ttitle: value,\n\t\t\t\t\ttargets: i,\n\t\t\t\t\tdata: key,\n\t\t\t\t\tvisible: columnsVisibility.includes(key),\n\t\t\t\t\torderable: true,\n\t\t\t\t\tsearchable: true\n\t\t\t\t};\n\t\t\t\tif (key === 'quiz_modal') {\n\t\t\t\t\tcolumn = {...column, orderable: false, searchable: false, defaultContent: ''};\n\t\t\t\t}\n\t\t\t\treturn column;\n\t\t\t});\n\n\t\t\t// Check what column has to be used to sort the table\n\t\t\tlet tableOrder = [];\n\t\t\t// Find the index of the column we have to use to sort\n\t\t\tlet tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmQuizReportShortcode.table.orderBy );\n\n\t\t\t// If the column doesn't exist, then try to get the default one\n\t\t\tif ( tableOrderByIndex === -1 ) {\n\t\t\t\ttableOrderByIndex = columns.findIndex( columnData => columnData.data == 'quiz_date' );\n\t\t\t}\n\t\t\t// If the one defined by the user, or the default one exists, add it\n\t\t\tif ( tableOrderByIndex !== -1 ) {\n\t\t\t\ttableOrder = [\n\t\t\t\t\t[\n\t\t\t\t\t\ttableOrderByIndex, // The ID of the column used to sort, defaults to `quiz_date`\n\t\t\t\t\t\tulgmQuizReportShortcode.table.order, // Designates the ascending or descending order of the 'orderby' parameter, defaults to `desc`\n\t\t\t\t\t]\n\t\t\t\t];\n\t\t\t}\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n\t\t\t\t\tcolumns: ( id, data, node ) => {\n                        return this.uoTable.column( id ).visible();\n                    },\n                    \n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tlet exportButtons = [];\n\t\t\tif ( ulgmQuizReportShortcode.table.showCSVExportButton ) {\n\t\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportCSV,\n\t\t\t\t} ) );\n\t\t\t}\n\t\t\tif ( ulgmQuizReportShortcode.table.showExcelExportButton ) {\n\t\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportExcel,\n\t\t\t\t}) );\n\t\t\t}\n\n\t\t\tvar tableVars = {\n\t\t\t\taLengthMenu: [\n\t\t\t\t\t[15, 30, 60, -1],\n\t\t\t\t\t[15, 30, 60, groupQuizReportSetup.localized.all]\n\t\t\t\t],\n\t\t\t\torder: tableOrder,\n\t\t\t\tiDisplayLength: 30,\n\t\t\t\tcolumns: columns,\n\t\t\t\tcolumnDefs: [],\n\t\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\t\tbuttons: exportButtons,\n\t\t\t};\n\n\t\t\tlet initComplete = ( settings, d ) => {\n\n\t\t\t\tlet table = settings.oInstance.api();\n\t\t\t\tlet _this = this;\n\n\t\t\t\tvar colFilter_container = $( `<div id=\"${settings.sInstance}-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${settings.sInstance}-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${settings.sInstance}-filter-columns-field\" data-label-enable=\"${groupQuizReportSetup.localized.customizeColumns}\" data-label-disable=\"${groupQuizReportSetup.localized.hideCustomizeColumns}\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n\n\t\t\t\tif (settings.oSavedState !== null) {\n\t\t\t\t\tjQuery.each( settings.oSavedState.columns, function ( key, value ){\n\t\t\t\t\t\tvar col       = settings.aoColumns[key];\n\t\t\t\t\t\tvar configKey = col.data;\n\t\t\t\t\t\tif ( ! columnsConfig.hasOwnProperty( configKey ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar title = col.sTitle;\n\t\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.visible, table ) );\n\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery.each( settings.aoColumns, function ( key, value ){\n\t\t\t\t\t\tvar col       = settings.aoColumns[key];\n\t\t\t\t\t\tvar configKey = col.data;\n\t\t\t\t\t\tif ( ! columnsConfig.hasOwnProperty( configKey ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar title = col.sTitle;\n\t\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.bVisible, table ) );\n\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t$( colFilter_container ).insertAfter( '#uo-quiz-report-table_filter' );\n\n\n\t\t\t};\n\n\t\t\ttableVars.initComplete = initComplete;\n\t\t\ttableVars.stateSave    = true;\n\n\t\t\tif (null !== this.uoTable) {\n\n\t\t\t\tthis.uoTable.destroy();\n\n\t\t\t\ttableVars.data = data;\n\t\t\t}\n\n\t\t\ttableVars.language = groupQuizReportSetup.localized.tableLanguage;\n\t\t\tthis.uoTable = jQuery( '#uo-quiz-report-table' );\n\n\t\t\tif (jQuery( '#uo-quiz-report-table' ).length > 0) {\n\t\t\t\tthis.uoTable = jQuery( '#uo-quiz-report-table' ).DataTable( tableVars );\n\t\t\t}\n\n\n\t\t},\n\n\t\tcreateTableHidden: function ( data ){\n\t\t\tvar columnsConfig = ulgmQuizReportShortcode.table.columnsConfig;\n\t\t\tvar columns = Object.entries(columnsConfig).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\ttitle: value,\n\t\t\t\t\tdata: key\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n\t\t\t\t\tcolumns: ( id, data, node ) => {\n                        return this.uoTable.column( id ).visible();\n                    },\n                    \n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tlet exportButtons = [];\n\t\t\tif ( ulgmQuizReportShortcode.table.showCSVExportButton ) {\n\t\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportCSV,\n\t\t\t\t} ) );\n\t\t\t}\n\t\t\tif ( ulgmQuizReportShortcode.table.showExcelExportButton ) {\n\t\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportExcel,\n\t\t\t\t}) );\n\t\t\t}\n\n\t\t\tvar tableVars = {\n\t\t\t\tiDisplayLength: -1,\n\t\t\t\tcolumns: columns,\n\t\t\t\tdom: 'Bfrtip',\n\t\t\t\tbuttons: exportButtons\n\t\t\t};\n\n\t\t\tif ($.fn.DataTable.isDataTable( '#uo-quiz-report-table-hidden' )) {\n\n\t\t\t\t$( '#uo-quiz-report-table-hidden' ).DataTable().destroy();\n\n\t\t\t\ttableVars.data    = data;\n\t\t\t\ttableVars.columns = Object.entries(columnsConfig).map(([key, value]) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttitle: value,\n\t\t\t\t\t\tdata: key\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\ttableVars.language = groupQuizReportSetup.localized.tableLanguage;\n\t\t\tthis.uoTableHidden = jQuery( '#uo-quiz-report-table-hidden' );\n\n\t\t\tif (this.uoTableHidden.length > 0) {\n\t\t\t\tthis.uoTableHidden = jQuery( '#uo-quiz-report-table-hidden' ).DataTable( tableVars );\n\t\t\t}\n\n\t\t\t$( '.buttons-csv' ).show();\n\n\t\t\t// Add CSS to hide the hidden table's wrapper\n\t\t\tjQuery(function() {\n\t\t\t  jQuery('#uo-quiz-report-table-hidden_wrapper').css('display', 'none');\n\t\t\t});\n\n\t\t},\n\n\t\taddColumnCourseCheckbox: function ( label, column_key, is_visible, table ){\n\n\t\t\tvar checkbox = jQuery( '<input />', {\n\t\t\t\ttype: 'checkbox',\n\t\t\t\tid: 'dt_' + column_key,\n\t\t\t\tvalue: column_key,\n\t\t\t\tchecked: is_visible\n\t\t\t} );\n\n\t\t\tcheckbox.on( 'change', function ( e ){\n\t\t\t\t// Get the column API object\n\t\t\t\tvar current_check = jQuery( this ).attr( 'value' );\n\t\t\t\tvar is_checked    = jQuery( this ).is( ':checked' );\n\n\t\t\t\ttable.columns().every( function ( index ){\n\n\t\t\t\t\tvar column = table.column( index );\n\n\t\t\t\t\t// ... do something with data(), or this.nodes(), etc\n\n\t\t\t\t\tif (index == current_check) {\n\t\t\t\t\t\tif (is_checked) {\n\t\t\t\t\t\t\t// Toggle the visibility\n\t\t\t\t\t\t\tcolumn.visible( true );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcolumn.visible( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\tvar $label = jQuery( '<label/>' ).append( checkbox ).append( label );\n\t\t\treturn $label;\n\t\t},\n\n\t\taddEvents: function (){\n\t\t\t// Listen changes to the \"Group\" dropdown\n\t\t\tthis.$elements.filters.group.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Set loading animation in the course dropdown\n\t\t\t\tthis.setLoading( {\n\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\tisLoading: true\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call to get courses\n\t\t\t\t$.ajax( {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { group_id: this.$elements.filters.group.value },\n\t\t\t\t\turl: groupQuizReportSetup.root + 'quiz-report-get-courses/',\n\t\t\t\t\tbeforeSend: xhr => xhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce ),\n\t\t\t\t\tsuccess: ( response ) => {\n\t\t\t\t\t\t// Check if the call is valid\n\t\t\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the returned data is valid\n\t\t\t\t\t\tif ( ! Array.isArray( response.options ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Set new options\n\t\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\t\tthis.$elements.filters.course,\n\t\t\t\t\t\t\tresponse.options,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tplaceholder: groupQuizReportSetup.i18n.coursePlaceholder\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Check if it has options\n\t\t\t\t\t\tif ( response.options.length === 0 ) {\n\t\t\t\t\t\t\t// Enable the dropdown\n\t\t\t\t\t\t\tthis.$elements.filters.course\n\t\t\t\t\t\t\t\t.setAttribute( 'disabled', 'disabled' );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Listen changes to the \"Course\" dropdown\n\t\t\tthis.$elements.filters.course.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Check if the course ID is valid\n\t\t\t\tif ( parseInt( this.$elements.filters.course.value ) === 0 ) {\n\t\t\t\t\t// Clear the \"Quiz\" dropdown\n\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\tthis.$elements.filters.quiz,\n\t\t\t\t\t\t[]\n\t\t\t\t\t);\n\n\t\t\t\t\t// Clear data on the table\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.uoTable.clear().draw();\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tconsole.error( e );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Set loading animation in the quiz dropdown\n\t\t\t\tthis.setLoading( {\n\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\tisLoading: true\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call to get quizzes\n\t\t\t\t$.ajax( {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { \n\t\t\t\t\t\tgroup_id: this.$elements.filters.group.value,\n\t\t\t\t\t\tcourse_id: this.$elements.filters.course.value\n\t\t\t\t\t},\n\t\t\t\t\turl: groupQuizReportSetup.root + 'quiz-report-get-quizzes/',\n\t\t\t\t\tbeforeSend: xhr => xhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce ),\n\t\t\t\t\tsuccess: ( response ) => {\n\t\t\t\t\t\t// Check if the call is valid\n\t\t\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the returned data is valid\n\t\t\t\t\t\tif ( ! Array.isArray( response.options ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Set new options\n\t\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\t\tthis.$elements.filters.quiz,\n\t\t\t\t\t\t\tresponse.options,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tplaceholder: groupQuizReportSetup.i18n.quizPlaceholder\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Check if it has options\n\t\t\t\t\t\tif ( response.options.length === 0 ) {\n\t\t\t\t\t\t\t// Enable the dropdown\n\t\t\t\t\t\t\tthis.$elements.filters.quiz\n\t\t\t\t\t\t\t\t.setAttribute( 'disabled', 'disabled' );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Listen changes to the \"Quiz\" dropdown\n\t\t\tthis.$elements.filters.quiz.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Request data\n\t\t\t\twindow.ulgmGroupManagement.quizReport.getQuizData(\n\t\t\t\t\t// Quiz ID\n\t\t\t\t\tthis.$elements.filters.quiz.value,\n\t\t\t\t\t// Group ID\n\t\t\t\t\tthis.$elements.filters.group.value,\n\t\t\t\t\t// Score type\n\t\t\t\t\tgroupQuizReportSetupScoreType\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\n\t\tsetOptions: ( $dropdown, options = [], dropdownSettings = {} ) => {\n\t\t\t// Empty the dropdown\n\t\t\t$dropdown.innerHTML = '';\n\n\t\t\t// Check if it doesn't have any options\n\t\t\tif ( options.length === 0 ) {\n\t\t\t\t$dropdown.innerHTML = `\n\t\t\t\t\t<option>${ groupQuizReportSetup.i18n.noResults }</option>\n\t\t\t\t`;\n\n\t\t\t\t$dropdown.classList.add( 'uo-groups-select-filter-select--empty' );\n\t\t\t} else {\n\t\t\t\t// Check if there is more than one option and if we should add a placeholder\n\t\t\t\tif ( options.length > 1 && typeof dropdownSettings.placeholder !== 'undefined' && dropdownSettings.placeholder !== '' ) {\n\t\t\t\t\t$dropdown.insertAdjacentHTML( 'beforeEnd', `<option value=\"0\">${ dropdownSettings.placeholder }</option>` );\n\t\t\t\t}\n\n\t\t\t\t// Add options\n\t\t\t\toptions.forEach( option => $dropdown.insertAdjacentHTML( 'beforeEnd', `<option value=\"${ option.value }\">${ option.text }</option>` ) );\n\n\t\t\t\t$dropdown.classList.remove( 'uo-groups-select-filter-select--empty' );\n\t\t\t}\n\n\t\t\t// Trigger change event, there are new options\n\t\t\t$dropdown.dispatchEvent( new Event( 'change' ) );\n\t\t},\n\n\t\tsetLoading: function( { isLoading, $dropdown } ) {\n\t\t\t// Get wrapper\n\t\t\tconst $wrapper = $dropdown.closest( '.uo-groups-select-filter' );\n\n\t\t\tif ( ! $wrapper ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isLoading ) {\n\t\t\t\t// Add loading class\n\t\t\t\t$wrapper.classList.add( 'uo-groups-select-filter--loading' );\n\n\t\t\t\t// Disable the dropdown\n\t\t\t\t$dropdown.setAttribute( 'disabled', 'disabled' );\n\t\t\t} else {\n\t\t\t\t// Add the loading class\n\t\t\t\t$wrapper.classList.remove( 'uo-groups-select-filter--loading' );\n\n\t\t\t\t// Enable the dropdown\n\t\t\t\t$dropdown.removeAttribute( 'disabled' );\n\t\t\t}\n\t\t},\n\n\t\tformat: function ( d ){\n\n\t\t\tvar rows = '';\n\t\t\t$.each( d.answer, function ( key, value ){\n\t\t\t\trows +=\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t'<td>' + d.question[key] + '</td>' +\n\t\t\t\t\t'<td>' + value + '</td>' +\n\t\t\t\t\t'</tr>';\n\t\t\t} );\n\t\t\t// `d` is the original data object for the row\n\t\t\treturn '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n\t\t},\n\n\t\tgetQuizData: function ( quizId, groupId, scoreType ){\n\t\t\t// Clear data on the table\n\t\t\ttry {\n\t\t\t\tthis.uoTable.clear().draw();\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.error( e );\n\t\t\t}\n\n\t\t\tif (!window.ulgmGroupManagement.reporting.isNormalInteger( quizId )) {\n\t\t\t\t$( '#uo-group-report-course' ).addClass( 'missing' );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!window.ulgmGroupManagement.reporting.isNormalInteger( String( groupId ) )) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$( '#uo-group-report-course' ).removeClass( 'missing' );\n\n\t\t\tvar i = 0;\n\n\t\t\tvar loading = setInterval( function (){\n\t\t\t\ti = ++i % 4;\n\t\t\t\t$( \"#uo-quiz-report-table tbody\" ).html( \"<div id='group-loader'>\" + groupQuizReportSetup.localized.loadingRecords + new Array( i + 1 ).join( \".\" ) + \"</div>\" );\n\t\t\t}, 500 );\n\n\n\t\t\tvar dataVars = {\n\t\t\t\tgroupId: groupId,\n\t\t\t\tquizId: quizId,\n\t\t\t\tscoreType: scoreType\n\t\t\t};\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupQuizReportSetup.root + 'get_quiz_data/',\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce );\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ){\n\t\t\t\t\tclearInterval( loading );\n\t\t\t\t\t$( '#group-loader' ).remove();\n\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTable( response );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTableHidden( response );\n\n\n\t\t\t\t},\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\talert( 'Rest Call Failed' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t};\n\n\twindow.ulgmGroupManagement.reporting = {\n\n\t\tgroupLeaderId: 0,\n\n\t\tgroupId: 0,\n\n\t\tgetGroupCourses: function ( groupId ){\n\n\t\t\tvar dataVars = {groupId: groupId};\n\n\t\t\tif (this.getQueryVariable( 'user_id' )) {\n\t\t\t\twindow.ulgmGroupManagement.reporting.groupLeaderId = this.getQueryVariable( 'user_id' );\n\t\t\t\tdataVars.userId                                    = window.ulgmGroupManagement.reporting.groupLeaderId;\n\t\t\t}\n\n\t\t\t$( '#uo-group-report-course' ).hide();\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupQuizReportSetup.root + 'get_group_courses/',\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce );\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ){\n\t\t\t\t\twindow.ulgmGroupManagement.reporting.createCourseDropDown( response.courses );\n\n\t\t\t\t\tif ($( '#uo-quiz-report-table' ).length) {\n\t\t\t\t\t\twindow.ulgmGroupManagement.reporting.createUserDropDown( response.users );\n\t\t\t\t\t}\n\n\n\t\t\t\t},\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\talert( 'Rest Call Failed' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\tcreateCourseDropDown: function ( posts ){\n\t\t\tvar dropDown = $( '#uo-group-report-course' ),\n\t\t\t\toptions  = '<option value=\"0\">' + ulgmRestApiSetup.localized.selectCourse + '</option>';\n\n\t\t\tif (0 === posts.post_count) {\n\t\t\t\tdropDown.html( '<option value=\"0\">' + ulgmRestApiSetup.localized.noCourse + '</option>' );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$.each( posts.posts, function ( key, post ){\n\t\t\t\toptions += '<option value=\"' + post.ID + '\">' + post.post_title + '</option>';\n\t\t\t} );\n\n\t\t\tdropDown.html( options );\n\t\t\tdropDown.show();\n\n\t\t},\n\n\t\tcreateUserDropDown: function ( users ){\n\n\t\t\tvar dropDown = $( '#uo-group-report-user' ),\n\t\t\t\toptions  = '<option value=\"0\">' + groupQuizReportSetup.localized.selectUser + '</option>';\n\n\t\t\tif (0 === users.length) {\n\t\t\t\tdropDown.html( '<option value=\"0\">' + groupQuizReportSetup.localized.noUsers + '/option>' );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$.each( users, function ( key, user ){\n\t\t\t\toptions += '<option value=\"' + user.ID + '\">' + user.data.display_name + '</option>';\n\t\t\t} );\n\n\t\t\tdropDown.html( options );\n\t\t\tdropDown.show();\n\n\t\t},\n\n\t\tisNormalInteger: function ( str ){\n\t\t\tvar n = Math.trunc( str );\n\t\t\tn = isNaN( n ) ? 0 : n;\n\n\t\t\treturn String( n ) == str && n > 0;\n\t\t},\n\n\t\tgetQueryVariable: function ( variable ){\n\t\t\tvar query = window.location.search.substring( 1 );\n\t\t\tvar vars  = query.split( \"&\" );\n\t\t\tfor (var i = 0; i < vars.length; i++) {\n\t\t\t\tvar pair = vars[i].split( \"=\" );\n\t\t\t\tif (pair[0] == variable) {\n\t\t\t\t\treturn pair[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ( false );\n\t\t}\n\n\t}\n\n\n} )( jQuery );\n","( function ( $ ){ // Self Executing function with $ alias for jQuery\n\n\t/**\n\t *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n\t *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n\t */\n\t$( document ).ready( function (){\n\t\twindow.ulgmGroupManagement.restForms.constructor();\n\n\t\tvar file_frame;\n\n\t\tvar uploadedUsers;\n\n\t\tjQuery( '#ulgm_group_upload_image_button' ).on( 'click', function ( event ){\n\t\t\tevent.preventDefault();\n\n\t\t\tif (file_frame) {\n\n\t\t\t\tfile_frame.open();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Create the media frame.\n\t\t\tfile_frame = wp.media.frames.file_frame = wp.media( {\n\t\t\t\ttitle: 'Select a image to upload',\n\t\t\t\tbutton: {\n\t\t\t\t\ttext: 'Use this image',\n\t\t\t\t},\n\t\t\t\tmultiple: false\n\t\t\t} );\n\t\t\t// When an image is selected, run a callback.\n\t\t\tfile_frame.on( 'select', function (){\n\t\t\t\tattachment = file_frame.state().get( 'selection' ).first().toJSON();\n\t\t\t\t$( '#ulgm_group_image_preview' ).attr( 'src', attachment.url ).css( 'width', 'auto' ).show();\n\t\t\t\t$( '#ulgm_group_image_attachment_id' ).val( attachment.id );\n\t\t\t} );\n\n\t\t\tfile_frame.open();\n\t\t} );\n\n\t\tjQuery( '#ulgm_group_edit_upload_image_button' ).on( 'click', function ( event ){\n\t\t\tevent.preventDefault();\n\n\t\t\tif (file_frame) {\n\n\t\t\t\tfile_frame.open();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Create the media frame.\n\t\t\tfile_frame = wp.media.frames.file_frame = wp.media( {\n\t\t\t\ttitle: 'Select a image to upload',\n\t\t\t\tbutton: {\n\t\t\t\t\ttext: 'Use this image',\n\t\t\t\t},\n\t\t\t\tmultiple: false\n\t\t\t} );\n\t\t\t// When an image is selected, run a callback.\n\t\t\tfile_frame.on( 'select', function (){\n\t\t\t\t$( '#ulgm_group_edit_image' ).hide();\n\t\t\t\tattachment = file_frame.state().get( 'selection' ).first().toJSON();\n\t\t\t\t$( '#ulgm_group_edit_image_preview' ).attr( 'src', attachment.url ).css( 'width', 'auto' ).show();\n\t\t\t\t$( '#ulgm_group_edit_image_attachment_id' ).val( attachment.id );\n\t\t\t} );\n\n\t\t\tfile_frame.open();\n\t\t} );\n\n\t} );\n\n\twindow.ulgmGroupManagement.restForms = {\n\n\t\t// initialize the code\n\t\tconstructor: function (){\n\n\t\t\tif (typeof window.ulgmRestApiSetup !== 'undefined') {\n\t\t\t\t// Add events for the group management page\n\t\t\t\tthis.addFormSubmitEvents();\n\n\t\t\t\ttry {\n\t\t\t\t\t$( '#ulgm_font_color' ).wpColorPicker();\n\t\t\t\t\t$( '#ulgm_main_color' ).wpColorPicker();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Handle error(s) here\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tmakeAjaxCall: function ( endPoint, restData, associatedForm ){\n\n\t\t\tvar $title_container = associatedForm.find( '#group-management-title' );\n\n\t\t\tvar $error_container = associatedForm.find( '.group-management-rest-message' );\n\n\t\t\tvar spinner = $( '.uo-modal-spinner' );\n\n\t\t\tif ('upload_users' === endPoint) {\n\t\t\t\tuploadedUsers++;\n\t\t\t\trestData.uploaded_users = uploadedUsers;\n\t\t\t}\n\n\n\t\t\tvar _this = this;\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: ulgmRestApiSetup.root + endPoint + '/',\n\t\t\t\tdata: restData,\n\n\t\t\t\t// Attach Nonce the the header of the request\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', ulgmRestApiSetup.nonce );\n\t\t\t\t},\n\n\t\t\t\tstatusCode: {\n\t\t\t\t\t403: function ( response ){\n\t\t\t\t\t\tspinner.hide();\n\t\t\t\t\t\t$error_container.html( ulgmRestApiSetup.i18n.youCantDoThat ).show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\tif (true === response.success) {\n\n\t\t\t\t\t\t$( '#uo-group-report-course' ).show();\n\t\t\t\t\t\t$error_container.hide();\n\n\t\t\t\t\t\tvar url = window.location.href;\n\n\t\t\t\t\t\t//append rest message to url\n\t\t\t\t\t\tif (url.indexOf( '?' ) > -1) {\n\t\t\t\t\t\t\turl += '&message=' + encodeURIComponent( response.data.message );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turl += '?message=' + encodeURIComponent( response.data.message );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof response.data.reload === 'undefined') {\n\n\t\t\t\t\t\t\tvar name  = 'message';\n\t\t\t\t\t\t\tvar value = response.data.message;\n\n\t\t\t\t\t\t\tvar str = location.search;\n\t\t\t\t\t\t\tif (new RegExp( \"[&?]\" + name + \"([=&].+)?$\" ).test( str )) {\n\t\t\t\t\t\t\t\tstr = str.replace( new RegExp( \"(?:[&?])\" + name + \"[^&]*\", \"g\" ), \"\" )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr += \"&\";\n\t\t\t\t\t\t\tstr += name + \"=\" + value;\n\t\t\t\t\t\t\tstr = \"?\" + str.slice( 1 );\n\n\t\t\t\t\t\t\t// there is an official order for the query and the hash if you didn't know.\n\t\t\t\t\t\t\tlocation.assign( location.origin + location.pathname + str + location.hash );\n\n\t\t\t\t\t\t} else if (typeof response.data.call_function !== 'undefined') {\n\n\t\t\t\t\t\t\tif (typeof response.data.function_vars !== 'undefined') {\n\t\t\t\t\t\t\t\twindow.ulgmGroupManagement[response.data.call_function]( response.data.function_vars );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.ulgmGroupManagement[response.data.call_function]();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\ttypeof response.data.reload !== 'undefined' &&\n\t\t\t\t\t\t\ttypeof response.data.endpoint !== 'undefined' &&\n\t\t\t\t\t\t\tresponse.data.reload === false &&\n\t\t\t\t\t\t\t( response.data.endpoint === 'upload_users' || response.data.endpoint === 'send-enrollment' )\n\t\t\t\t\t\t) {\n\n\t\t\t\t\t\t\tif( 1 === response.data.uploaded_users ){\n\t\t\t\t\t\t\t\t// first time the upload ran\n\t\t\t\t\t\t\t\t$([document.documentElement, document.body]).animate({\n\t\t\t\t\t\t\t\t\tscrollTop: $(\"#group-management-users\").offset().top\n\t\t\t\t\t\t\t\t}, 2000);\n\n\t\t\t\t\t\t\t\t// Hide modal\n\t\t\t\t\t\t\t\t$( \"#group-management-upload-users .uo-close-modal\" ).click();\n\t\t\t\t\t\t\t\t// Show CSV log\n\t\t\t\t\t\t\t\t$( '#uo-groups-upload-summary' ).show();\n\t\t\t\t\t\t\t\t// Hide Users table to force page reload\n\t\t\t\t\t\t\t\t$( '.uo-groups-group-courses' ).hide();\n\t\t\t\t\t\t\t\t$( '.uo-groups-enrolled-users' ).hide();\n\t\t\t\t\t\t\t\t$( '#group-management-leaders' ).hide();\n\t\t\t\t\t\t\t}\n\n\n\n\n\t\t\t\t\t\t\t// Set summary info in heading\n\t\t\t\t\t\t\t$( '#uo-groups-upload-summary .uo-header-subtitle' ).text( response.data.message );\n\t\t\t\t\t\t\t$( '#csv-result-total' ).text( response.data.total_rows );\n\n\t\t\t\t\t\t\tconsole.log( 'this is the upload' );\n\t\t\t\t\t\t\tconsole.log( response );\n\n\t\t\t\t\t\t\tlet results = response.data.results;\n\t\t\t\t\t\t\tresults.forEach( function ( entry ){\n\n\t\t\t\t\t\t\t\tlet row = document.createElement( 'div' );\n\t\t\t\t\t\t\t\trow.setAttribute( \"class\", \"uo-row uo-table-content uo-tbl-item body-row\" );\n\n\t\t\t\t\t\t\t\tlet emailCol = document.createElement( 'div' );\n\t\t\t\t\t\t\t\temailCol.setAttribute( \"class\", \"content-leaders-email uo-table-cell uo-table-cell-3\" );\n\n\t\t\t\t\t\t\t\tlet statusCol = document.createElement( 'div' );\n\t\t\t\t\t\t\t\tstatusCol.setAttribute( \"class\", \"content-leaders-statu uo-table-cell uo-table-cell-7\" );\n\n\t\t\t\t\t\t\t\temailCol.innerText  = entry.email;\n\t\t\t\t\t\t\t\tstatusCol.innerText = ( 'use_error_code' === entry.status.reason ) ? entry.message : entry.status.reason;\n\n\t\t\t\t\t\t\t\trow.appendChild( emailCol );\n\n\t\t\t\t\t\t\t\trow.appendChild( statusCol );\n\n\t\t\t\t\t\t\t\tlet resultsDiv = document.getElementById( 'uo-groups-upload-result-rows' );\n\n\t\t\t\t\t\t\t\tif (null !== resultsDiv) {\n\t\t\t\t\t\t\t\t\tresultsDiv.appendChild( row );\n\n\t\t\t\t\t\t\t\t\t// new_created_added_to_group, new_failed, existing_added_to_group, existing_already_member, existing_failed\n\n\t\t\t\t\t\t\t\t\tif ('new_created_added_to_group' === entry.status.user ||\n\t\t\t\t\t\t\t\t\t\t'existing_added_to_group' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-added' ).text( parseInt( $( '#csv-result-added' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ('existing_already_member' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-member' ).text( parseInt( $( '#csv-result-member' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ('new_failed' === entry.status.user ||\n\t\t\t\t\t\t\t\t\t\t'existing_failed' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-unprocessed' ).text( parseInt( $( '#csv-result-unprocessed' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tif (false === response.data.completed) {\n\t\t\t\t\t\t\t\tspinner.show();\n\t\t\t\t\t\t\t\tulgmGroupManagement.restForms.makeAjaxCall( endPoint, restData, associatedForm );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\t\tif (ulgmRestApiSetup.hasOwnProperty( 'localized' )) {\n\t\t\t\t\t\t\tif ('invalid-course-id' !== response.data.error) {\n\t\t\t\t\t\t\t\t$( '#uo-group-report-course' ).empty().append(\n\t\t\t\t\t\t\t\t\t$( '<option>', {\n\t\t\t\t\t\t\t\t\t\tvalue: '0',\n\t\t\t\t\t\t\t\t\t\ttext: ulgmRestApiSetup.localized.selectCourse\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$error_container\n\t\t\t\t\t\t\t.html( response.data.message )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\tspinner.hide();\n\t\t\t\t\t$error_container.html( response.data.message );\n\t\t\t\t}\n\n\t\t\t} );\n\t\t},\n\n\t\taddFormSubmitEvents: function (){\n\n\t\t\t// Add rest call to all link with a rest call attached\n\t\t\t$( '.submit-group-management-form' ).on( 'click', this.sendRestCall );\n\n\t\t\t// Add rest call to all link with a rest call attached\n\t\t\t$( '.change-group-management-form' ).on( 'change', this.sendRestCall );\n\n\t\t\t// Add rest call to all inputs of modal if enter is pressed\n\t\t\t$( '.group-management-modal input' ).on( 'keypress', this.sendRestCall );\n\n\t\t\t$( 'input[type=radio][name=action]' ).on( 'change', function (){\n\t\t\t\tvar selected_value = this.value;\n\t\t\t\tif (selected_value === 'add-invite') {\n\t\t\t\t\t$( '#uo-import-user-note' ).show();\n\t\t\t\t} else if (selected_value === 'send-enrollment') {\n\t\t\t\t\t$( '#uo-import-user-note' ).hide();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\tsendRestCall: function ( e ){\n\n\t\t\tvar _currentTarget = e.currentTarget;\n\n\t\t\t// if the current target is a input then we assume the user pressed enter\n\t\t\tif ($( _currentTarget ).is( 'input' )) {\n\t\t\t\tif (e.key !== \"Enter\") {\n\t\t\t\t\t// Do more work\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// switch current target to the forms submit button to extract needed data\n\t\t\t\tlet _associatedForm = $( _currentTarget ).closest( '.group-management-form' );\n\t\t\t\t// Enter is only pressed inside th modal window\n\t\t\t\t_currentTarget      = _associatedForm.find( '.submit-group-management-form' );\n\t\t\t}\n\n\t\t\tvar spinner = $( '.uo-modal-spinner' );\n\n\t\t\t// The form or container of the input data\n\t\t\tvar associatedForm   = $( _currentTarget ).closest( '.group-management-form' );\n\t\t\tvar $error_container = associatedForm.find( '.group-management-rest-message' );\n\t\t\t$error_container.hide();\n\t\t\t$( '#uo-group-progress-report' ).hide();\n\n\t\t\t// Get the end point for the rest call from the clicked element\n\t\t\tvar endPoint = $( _currentTarget ).data( 'end-point' );\n\n\t\t\tif (typeof endPoint === 'undefined') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (endPoint == 'add_user') {\n\t\t\t\tdocument.getElementById( \"group-management-add-user-frm\" ).onsubmit = function ( e ){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!document.getElementById( \"group-management-add-user-frm\" ).checkValidity()) {\n\t\t\t\t\tdocument.getElementById( \"group-management-add-user-frm\" ).reportValidity();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (endPoint == 'edit_user') {\n\t\t\t\tdocument.getElementById( \"group-management-edit-user-frm\" ).onsubmit = function ( e ){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!document.getElementById( \"group-management-edit-user-frm\" ).checkValidity()) {\n\t\t\t\t\tdocument.getElementById( \"group-management-edit-user-frm\" ).reportValidity();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($( _currentTarget ).attr( 'id' ) === \"group-id\" && $( _currentTarget ).val() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ($( _currentTarget ).attr( 'id' ) === \"uo-group-report-course\" && $( _currentTarget ).val() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Sometimes wp editor doesn't update the textarea input rigth way.\n\t\t\t// Let's save iFrame editors to textarea so we can serialize\n\t\t\tif (typeof tinymce !== 'undefined') {\n\t\t\t\tfor (edId in tinyMCE.editors) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof tinyMCE.editors[edId] !== 'undefined' &&\n\t\t\t\t\t\ttypeof tinyMCE.editors[edId].save !== 'undefined' &&\n\t\t\t\t\t\ttinyMCE.editors[edId].save instanceof Function) {\n\t\t\t\t\t\ttinyMCE.editors[edId].save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Create object that will save the data that's\n\t\t\t// going to be send to the AJAX call\n\t\t\tvar restData = {};\n\n\t\t\t// Get the fields\n\t\t\tvar fields = associatedForm.find( ':input' );\n\n\t\t\t// Get an array of objects with the name and value of the fields,\n\t\t\t// iterate each element, and add it to the restData object,\n\t\t\t// using the field name as the key, and field value as the value\n\t\t\t$.each( fields.serializeArray(), function ( index, field ){\n\t\t\t\trestData[field.name] = field.value;\n\t\t\t} );\n\n\t\t\tif (endPoint == 'email_users') {\n\t\t\t\trestData = fields.serializeArray();\n\t\t\t}\n\n\t\t\tspinner.show();\n\n\t\t\tif ('upload_users' === endPoint) {\n\t\t\t\tuploadedUsers = 0;\n\t\t\t}\n\n\t\t\tulgmGroupManagement.restForms.makeAjaxCall( endPoint, restData, associatedForm );\n\n\t\t}\n\t};\n\n\t/**\n\t * Extend serialize array to create a serialized object. This is the format that the rest call expects\n\t *\n\t * @returns object Returns key value pairs where the key is the input name and the value is the input value\n\t */\n\t// Extend serialize array to create an serialized object\n\t$.fn.serializeObject = function (){\n\t\tvar o = {};\n\t\tvar a = this.serializeArray();\n\t\t$.each( a, function (){\n\t\t\tif (o[this.name] !== undefined) {\n\t\t\t\tif (!o[this.name].push) {\n\t\t\t\t\to[this.name] = [o[this.name]];\n\t\t\t\t}\n\t\t\t\to[this.name].push( this.value || '' );\n\t\t\t} else {\n\t\t\t\to[this.name] = this.value || '';\n\t\t\t}\n\t\t} );\n\t\treturn o;\n\t};\n\n\n} )( jQuery );\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['./ResizeSensor.js'], factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require('./ResizeSensor.js'));\n    } else {\n        root.ElementQueries = factory(root.ResizeSensor);\n        root.ElementQueries.listen();\n    }\n}(typeof window !== 'undefined' ? window : this, function (ResizeSensor) {\n\n    /**\n     *\n     * @type {Function}\n     * @constructor\n     */\n    var ElementQueries = function () {\n        //<style> element with our dynamically created styles\n        var cssStyleElement;\n\n        //all rules found for element queries\n        var allQueries = {};\n\n        //association map to identify which selector belongs to a element from the animationstart event.\n        var idToSelectorMapping = [];\n\n        /**\n         *\n         * @param element\n         * @returns {Number}\n         */\n        function getEmSize(element) {\n            if (!element) {\n                element = document.documentElement;\n            }\n            var fontSize = window.getComputedStyle(element, null).fontSize;\n            return parseFloat(fontSize) || 16;\n        }\n\n        /**\n         * Get element size\n         * @param {HTMLElement} element\n         * @returns {Object} {width, height}\n         */\n        function getElementSize(element) {\n            if (!element.getBoundingClientRect) {\n                return {\n                    width: element.offsetWidth,\n                    height: element.offsetHeight\n                }\n            }\n\n            var rect = element.getBoundingClientRect();\n            return {\n                width: Math.round(rect.width),\n                height: Math.round(rect.height)\n            }\n        }\n\n        /**\n         *\n         * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\n         *\n         * @param {HTMLElement} element\n         * @param {*} value\n         * @returns {*}\n         */\n        function convertToPx(element, value) {\n            var numbers = value.split(/\\d/);\n            var units = numbers[numbers.length - 1];\n            value = parseFloat(value);\n            switch (units) {\n                case \"px\":\n                    return value;\n                case \"em\":\n                    return value * getEmSize(element);\n                case \"rem\":\n                    return value * getEmSize();\n                // Viewport units!\n                // According to http://quirksmode.org/mobile/tableViewport.html\n                // documentElement.clientWidth/Height gets us the most reliable info\n                case \"vw\":\n                    return value * document.documentElement.clientWidth / 100;\n                case \"vh\":\n                    return value * document.documentElement.clientHeight / 100;\n                case \"vmin\":\n                case \"vmax\":\n                    var vw = document.documentElement.clientWidth / 100;\n                    var vh = document.documentElement.clientHeight / 100;\n                    var chooser = Math[units === \"vmin\" ? \"min\" : \"max\"];\n                    return value * chooser(vw, vh);\n                default:\n                    return value;\n                // for now, not supporting physical units (since they are just a set number of px)\n                // or ex/ch (getting accurate measurements is hard)\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {String} id\n         * @constructor\n         */\n        function SetupInformation(element, id) {\n            this.element = element;\n            var key, option, elementSize, value, actualValue, attrValues, attrValue, attrName;\n\n            var attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\n\n            /**\n             * Extracts the computed width/height and sets to min/max- attribute.\n             */\n            this.call = function () {\n                // extract current dimensions\n                elementSize = getElementSize(this.element);\n\n                attrValues = {};\n\n                for (key in allQueries[id]) {\n                    if (!allQueries[id].hasOwnProperty(key)) {\n                        continue;\n                    }\n                    option = allQueries[id][key];\n\n                    value = convertToPx(this.element, option.value);\n\n                    actualValue = option.property === 'width' ? elementSize.width : elementSize.height;\n                    attrName = option.mode + '-' + option.property;\n                    attrValue = '';\n\n                    if (option.mode === 'min' && actualValue >= value) {\n                        attrValue += option.value;\n                    }\n\n                    if (option.mode === 'max' && actualValue <= value) {\n                        attrValue += option.value;\n                    }\n\n                    if (!attrValues[attrName]) attrValues[attrName] = '';\n                    if (attrValue && -1 === (' ' + attrValues[attrName] + ' ').indexOf(' ' + attrValue + ' ')) {\n                        attrValues[attrName] += ' ' + attrValue;\n                    }\n                }\n\n                for (var k in attributes) {\n                    if (!attributes.hasOwnProperty(k)) continue;\n\n                    if (attrValues[attributes[k]]) {\n                        this.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1));\n                    } else {\n                        this.element.removeAttribute(attributes[k]);\n                    }\n                }\n            };\n        }\n\n        /**\n         * @param {HTMLElement} element\n         * @param {Object}      id\n         */\n        function setupElement(element, id) {\n            if (!element.elementQueriesSetupInformation) {\n                element.elementQueriesSetupInformation = new SetupInformation(element, id);\n            }\n\n            if (!element.elementQueriesSensor) {\n                element.elementQueriesSensor = new ResizeSensor(element, function () {\n                    element.elementQueriesSetupInformation.call();\n                });\n            }\n        }\n\n        /**\n         * Stores rules to the selector that should be applied once resized.\n         *\n         * @param {String} selector\n         * @param {String} mode min|max\n         * @param {String} property width|height\n         * @param {String} value\n         */\n        function queueQuery(selector, mode, property, value) {\n            if (typeof(allQueries[selector]) === 'undefined') {\n                allQueries[selector] = [];\n                // add animation to trigger animationstart event, so we know exactly when a element appears in the DOM\n\n                var id = idToSelectorMapping.length;\n                cssStyleElement.innerHTML += '\\n' + selector + ' {animation: 0.1s element-queries;}';\n                cssStyleElement.innerHTML += '\\n' + selector + ' > .resize-sensor {min-width: '+id+'px;}';\n                idToSelectorMapping.push(selector);\n            }\n\n            allQueries[selector].push({\n                mode: mode,\n                property: property,\n                value: value\n            });\n        }\n\n        function getQuery(container) {\n            var query;\n            if (document.querySelectorAll) query = (container) ? container.querySelectorAll.bind(container) : document.querySelectorAll.bind(document);\n            if (!query && 'undefined' !== typeof $$) query = $$;\n            if (!query && 'undefined' !== typeof jQuery) query = jQuery;\n\n            if (!query) {\n                throw 'No document.querySelectorAll, jQuery or Mootools\\'s $$ found.';\n            }\n\n            return query;\n        }\n\n        /**\n         * If animationStart didn't catch a new element in the DOM, we can manually search for it\n         */\n        function findElementQueriesElements(container) {\n            var query = getQuery(container);\n\n            for (var selector in allQueries) if (allQueries.hasOwnProperty(selector)) {\n                // find all elements based on the extract query selector from the element query rule\n                var elements = query(selector, container);\n\n                for (var i = 0, j = elements.length; i < j; i++) {\n                    setupElement(elements[i], selector);\n                }\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         */\n        function attachResponsiveImage(element) {\n            var children = [];\n            var rules = [];\n            var sources = [];\n            var defaultImageId = 0;\n            var lastActiveImage = -1;\n            var loadedImages = [];\n\n            for (var i in element.children) {\n                if (!element.children.hasOwnProperty(i)) continue;\n\n                if (element.children[i].tagName && element.children[i].tagName.toLowerCase() === 'img') {\n                    children.push(element.children[i]);\n\n                    var minWidth = element.children[i].getAttribute('min-width') || element.children[i].getAttribute('data-min-width');\n                    //var minHeight = element.children[i].getAttribute('min-height') || element.children[i].getAttribute('data-min-height');\n                    var src = element.children[i].getAttribute('data-src') || element.children[i].getAttribute('url');\n\n                    sources.push(src);\n\n                    var rule = {\n                        minWidth: minWidth\n                    };\n\n                    rules.push(rule);\n\n                    if (!minWidth) {\n                        defaultImageId = children.length - 1;\n                        element.children[i].style.display = 'block';\n                    } else {\n                        element.children[i].style.display = 'none';\n                    }\n                }\n            }\n\n            lastActiveImage = defaultImageId;\n\n            function check() {\n                var imageToDisplay = false, i;\n\n                for (i in children) {\n                    if (!children.hasOwnProperty(i)) continue;\n\n                    if (rules[i].minWidth) {\n                        if (element.offsetWidth > rules[i].minWidth) {\n                            imageToDisplay = i;\n                        }\n                    }\n                }\n\n                if (!imageToDisplay) {\n                    //no rule matched, show default\n                    imageToDisplay = defaultImageId;\n                }\n\n                if (lastActiveImage !== imageToDisplay) {\n                    //image change\n\n                    if (!loadedImages[imageToDisplay]) {\n                        //image has not been loaded yet, we need to load the image first in memory to prevent flash of\n                        //no content\n\n                        var image = new Image();\n                        image.onload = function () {\n                            children[imageToDisplay].src = sources[imageToDisplay];\n\n                            children[lastActiveImage].style.display = 'none';\n                            children[imageToDisplay].style.display = 'block';\n\n                            loadedImages[imageToDisplay] = true;\n\n                            lastActiveImage = imageToDisplay;\n                        };\n\n                        image.src = sources[imageToDisplay];\n                    } else {\n                        children[lastActiveImage].style.display = 'none';\n                        children[imageToDisplay].style.display = 'block';\n                        lastActiveImage = imageToDisplay;\n                    }\n                } else {\n                    //make sure for initial check call the .src is set correctly\n                    children[imageToDisplay].src = sources[imageToDisplay];\n                }\n            }\n\n            element.resizeSensorInstance = new ResizeSensor(element, check);\n            check();\n        }\n\n        function findResponsiveImages() {\n            var query = getQuery();\n\n            var elements = query('[data-responsive-image],[responsive-image]');\n            for (var i = 0, j = elements.length; i < j; i++) {\n                attachResponsiveImage(elements[i]);\n            }\n        }\n\n        var regex = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:min|max)-(?:width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/mgi;\n        var attrRegex = /\\[[\\s\\t]*?(min|max)-(width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/mgi;\n\n        /**\n         * @param {String} css\n         */\n        function extractQuery(css) {\n            var match, smatch, attrs, attrMatch;\n\n            css = css.replace(/'/g, '\"');\n            while (null !== (match = regex.exec(css))) {\n                smatch = match[1] + match[3];\n                attrs = match[2];\n\n                while (null !== (attrMatch = attrRegex.exec(attrs))) {\n                    queueQuery(smatch, attrMatch[1], attrMatch[2], attrMatch[3]);\n                }\n            }\n        }\n\n        /**\n         * @param {CssRule[]|String} rules\n         */\n        function readRules(rules) {\n            var selector = '';\n\n            if (!rules) {\n                return;\n            }\n\n            if ('string' === typeof rules) {\n                rules = rules.toLowerCase();\n                if (-1 !== rules.indexOf('min-width') || -1 !== rules.indexOf('max-width')) {\n                    extractQuery(rules);\n                }\n            } else {\n                for (var i = 0, j = rules.length; i < j; i++) {\n                    if (1 === rules[i].type) {\n                        selector = rules[i].selectorText || rules[i].cssText;\n                        if (-1 !== selector.indexOf('min-height') || -1 !== selector.indexOf('max-height')) {\n                            extractQuery(selector);\n                        } else if (-1 !== selector.indexOf('min-width') || -1 !== selector.indexOf('max-width')) {\n                            extractQuery(selector);\n                        }\n                    } else if (4 === rules[i].type) {\n                        readRules(rules[i].cssRules || rules[i].rules);\n                    } else if (3 === rules[i].type) {\n                        if(rules[i].styleSheet.hasOwnProperty(\"cssRules\")) {\n                            readRules(rules[i].styleSheet.cssRules);\n                        }\n                    }\n                }\n            }\n        }\n\n        var defaultCssInjected = false;\n\n        /**\n         * Searches all css rules and setups the event listener to all elements with element query rules..\n         */\n        this.init = function () {\n            var animationStart = 'animationstart';\n            if (typeof document.documentElement.style['webkitAnimationName'] !== 'undefined') {\n                animationStart = 'webkitAnimationStart';\n            } else if (typeof document.documentElement.style['MozAnimationName'] !== 'undefined') {\n                animationStart = 'mozanimationstart';\n            } else if (typeof document.documentElement.style['OAnimationName'] !== 'undefined') {\n                animationStart = 'oanimationstart';\n            }\n\n            document.body.addEventListener(animationStart, function (e) {\n                var element = e.target;\n                var styles = element && window.getComputedStyle(element, null);\n                var animationName = styles && styles.getPropertyValue('animation-name');\n                var requiresSetup = animationName && (-1 !== animationName.indexOf('element-queries'));\n\n                if (requiresSetup) {\n                    element.elementQueriesSensor = new ResizeSensor(element, function () {\n                        if (element.elementQueriesSetupInformation) {\n                            element.elementQueriesSetupInformation.call();\n                        }\n                    });\n\n                    var sensorStyles = window.getComputedStyle(element.resizeSensor, null);\n                    var id = sensorStyles.getPropertyValue('min-width');\n                    id = parseInt(id.replace('px', ''));\n                    setupElement(e.target, idToSelectorMapping[id]);\n                }\n            });\n\n            if (!defaultCssInjected) {\n                cssStyleElement = document.createElement('style');\n                cssStyleElement.type = 'text/css';\n                cssStyleElement.innerHTML = '[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}';\n\n                //safari wants at least one rule in keyframes to start working\n                cssStyleElement.innerHTML += '\\n@keyframes element-queries { 0% { visibility: inherit; } }';\n                document.getElementsByTagName('head')[0].appendChild(cssStyleElement);\n                defaultCssInjected = true;\n            }\n\n            for (var i = 0, j = document.styleSheets.length; i < j; i++) {\n                try {\n                    if (document.styleSheets[i].href && 0 === document.styleSheets[i].href.indexOf('file://')) {\n                        console.warn(\"CssElementQueries: unable to parse local css files, \" + document.styleSheets[i].href);\n                    }\n\n                    readRules(document.styleSheets[i].cssRules || document.styleSheets[i].rules || document.styleSheets[i].cssText);\n                } catch (e) {\n                }\n            }\n\n            findResponsiveImages();\n        };\n\n        /**\n         * Go through all collected rules (readRules()) and attach the resize-listener.\n         * Not necessary to call it manually, since we detect automatically when new elements\n         * are available in the DOM. However, sometimes handy for dirty DOM modifications.\n         *\n         * @param {HTMLElement} container only elements of the container are considered (document.body if not set)\n         */\n        this.findElementQueriesElements = function (container) {\n            findElementQueriesElements(container);\n        };\n\n        this.update = function () {\n            this.init();\n        };\n    };\n\n    ElementQueries.update = function () {\n        ElementQueries.instance.update();\n    };\n\n    /**\n     * Removes all sensor and elementquery information from the element.\n     *\n     * @param {HTMLElement} element\n     */\n    ElementQueries.detach = function (element) {\n        if (element.elementQueriesSetupInformation) {\n            //element queries\n            element.elementQueriesSensor.detach();\n            delete element.elementQueriesSetupInformation;\n            delete element.elementQueriesSensor;\n\n        } else if (element.resizeSensorInstance) {\n            //responsive image\n\n            element.resizeSensorInstance.detach();\n            delete element.resizeSensorInstance;\n        }\n    };\n\n    ElementQueries.init = function () {\n        if (!ElementQueries.instance) {\n            ElementQueries.instance = new ElementQueries();\n        }\n\n        ElementQueries.instance.init();\n    };\n\n    var domLoaded = function (callback) {\n        /* Mozilla, Chrome, Opera */\n        if (document.addEventListener) {\n            document.addEventListener('DOMContentLoaded', callback, false);\n        }\n        /* Safari, iCab, Konqueror */\n        else if (/KHTML|WebKit|iCab/i.test(navigator.userAgent)) {\n            var DOMLoadTimer = setInterval(function () {\n                if (/loaded|complete/i.test(document.readyState)) {\n                    callback();\n                    clearInterval(DOMLoadTimer);\n                }\n            }, 10);\n        }\n        /* Other web browsers */\n        else window.onload = callback;\n    };\n\n    ElementQueries.findElementQueriesElements = function (container) {\n        ElementQueries.instance.findElementQueriesElements(container);\n    };\n\n    ElementQueries.listen = function () {\n        domLoaded(ElementQueries.init);\n    };\n\n    return ElementQueries;\n\n}));\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory();\n    } else {\n        root.ResizeSensor = factory();\n    }\n}(typeof window !== 'undefined' ? window : this, function () {\n\n    // Make sure it does not throw in a SSR (Server Side Rendering) situation\n    if (typeof window === \"undefined\") {\n        return null;\n    }\n    // https://github.com/Semantic-Org/Semantic-UI/issues/3855\n    // https://github.com/marcj/css-element-queries/issues/257\n    var globalWindow = typeof window != 'undefined' && window.Math == Math\n        ? window\n        : typeof self != 'undefined' && self.Math == Math\n            ? self\n            : Function('return this')();\n    // Only used for the dirty checking, so the event callback count is limited to max 1 call per fps per sensor.\n    // In combination with the event based resize sensor this saves cpu time, because the sensor is too fast and\n    // would generate too many unnecessary events.\n    var requestAnimationFrame = globalWindow.requestAnimationFrame ||\n        globalWindow.mozRequestAnimationFrame ||\n        globalWindow.webkitRequestAnimationFrame ||\n        function (fn) {\n            return globalWindow.setTimeout(fn, 20);\n        };\n\n    var cancelAnimationFrame = globalWindow.cancelAnimationFrame ||\n        globalWindow.mozCancelAnimationFrame ||\n        globalWindow.webkitCancelAnimationFrame ||\n        function (timer) {\n            globalWindow.clearTimeout(timer);\n        };\n\n    /**\n     * Iterate over each of the provided element(s).\n     *\n     * @param {HTMLElement|HTMLElement[]} elements\n     * @param {Function}                  callback\n     */\n    function forEachElement(elements, callback){\n        var elementsType = Object.prototype.toString.call(elements);\n        var isCollectionTyped = ('[object Array]' === elementsType\n            || ('[object NodeList]' === elementsType)\n            || ('[object HTMLCollection]' === elementsType)\n            || ('[object Object]' === elementsType)\n            || ('undefined' !== typeof jQuery && elements instanceof jQuery) //jquery\n            || ('undefined' !== typeof Elements && elements instanceof Elements) //mootools\n        );\n        var i = 0, j = elements.length;\n        if (isCollectionTyped) {\n            for (; i < j; i++) {\n                callback(elements[i]);\n            }\n        } else {\n            callback(elements);\n        }\n    }\n\n    /**\n    * Get element size\n    * @param {HTMLElement} element\n    * @returns {Object} {width, height}\n    */\n    function getElementSize(element) {\n        if (!element.getBoundingClientRect) {\n            return {\n                width: element.offsetWidth,\n                height: element.offsetHeight\n            }\n        }\n\n        var rect = element.getBoundingClientRect();\n        return {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height)\n        }\n    }\n\n    /**\n     * Apply CSS styles to element.\n     *\n     * @param {HTMLElement} element\n     * @param {Object} style\n     */\n    function setStyle(element, style) {\n        Object.keys(style).forEach(function(key) {\n            element.style[key] = style[key];\n        });\n    }\n\n    /**\n     * Class for dimension change detection.\n     *\n     * @param {Element|Element[]|Elements|jQuery} element\n     * @param {Function} callback\n     *\n     * @constructor\n     */\n    var ResizeSensor = function(element, callback) {\n        //Is used when checking in reset() only for invisible elements\n        var lastAnimationFrameForInvisibleCheck = 0;\n\n        /**\n         *\n         * @constructor\n         */\n        function EventQueue() {\n            var q = [];\n            this.add = function(ev) {\n                q.push(ev);\n            };\n\n            var i, j;\n            this.call = function(sizeInfo) {\n                for (i = 0, j = q.length; i < j; i++) {\n                    q[i].call(this, sizeInfo);\n                }\n            };\n\n            this.remove = function(ev) {\n                var newQueue = [];\n                for(i = 0, j = q.length; i < j; i++) {\n                    if(q[i] !== ev) newQueue.push(q[i]);\n                }\n                q = newQueue;\n            };\n\n            this.length = function() {\n                return q.length;\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {Function}    resized\n         */\n        function attachResizeEvent(element, resized) {\n            if (!element) return;\n            if (element.resizedAttached) {\n                element.resizedAttached.add(resized);\n                return;\n            }\n\n            element.resizedAttached = new EventQueue();\n            element.resizedAttached.add(resized);\n\n            element.resizeSensor = document.createElement('div');\n            element.resizeSensor.dir = 'ltr';\n            element.resizeSensor.className = 'resize-sensor';\n\n            var style = {\n                pointerEvents: 'none',\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                overflow: 'hidden',\n                zIndex: '-1',\n                visibility: 'hidden',\n                maxWidth: '100%'\n            };\n            var styleChild = {\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                transition: '0s',\n            };\n\n            setStyle(element.resizeSensor, style);\n\n            var expand = document.createElement('div');\n            expand.className = 'resize-sensor-expand';\n            setStyle(expand, style);\n\n            var expandChild = document.createElement('div');\n            setStyle(expandChild, styleChild);\n            expand.appendChild(expandChild);\n\n            var shrink = document.createElement('div');\n            shrink.className = 'resize-sensor-shrink';\n            setStyle(shrink, style);\n\n            var shrinkChild = document.createElement('div');\n            setStyle(shrinkChild, styleChild);\n            setStyle(shrinkChild, { width: '200%', height: '200%' });\n            shrink.appendChild(shrinkChild);\n\n            element.resizeSensor.appendChild(expand);\n            element.resizeSensor.appendChild(shrink);\n            element.appendChild(element.resizeSensor);\n\n            var computedStyle = window.getComputedStyle(element);\n            var position = computedStyle ? computedStyle.getPropertyValue('position') : null;\n            if ('absolute' !== position && 'relative' !== position && 'fixed' !== position && 'sticky' !== position) {\n                element.style.position = 'relative';\n            }\n\n            var dirty = false;\n\n            //last request animation frame id used in onscroll event\n            var rafId = 0;\n            var size = getElementSize(element);\n            var lastWidth = 0;\n            var lastHeight = 0;\n            var initialHiddenCheck = true;\n            lastAnimationFrameForInvisibleCheck = 0;\n\n            var resetExpandShrink = function () {\n                var width = element.offsetWidth;\n                var height = element.offsetHeight;\n\n                expandChild.style.width = (width + 10) + 'px';\n                expandChild.style.height = (height + 10) + 'px';\n\n                expand.scrollLeft = width + 10;\n                expand.scrollTop = height + 10;\n\n                shrink.scrollLeft = width + 10;\n                shrink.scrollTop = height + 10;\n            };\n\n            var reset = function() {\n                // Check if element is hidden\n                if (initialHiddenCheck) {\n                    var invisible = element.offsetWidth === 0 && element.offsetHeight === 0;\n                    if (invisible) {\n                        // Check in next frame\n                        if (!lastAnimationFrameForInvisibleCheck){\n                            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                                lastAnimationFrameForInvisibleCheck = 0;\n                                reset();\n                            });\n                        }\n\n                        return;\n                    } else {\n                        // Stop checking\n                        initialHiddenCheck = false;\n                    }\n                }\n\n                resetExpandShrink();\n            };\n            element.resizeSensor.resetSensor = reset;\n\n            var onResized = function() {\n                rafId = 0;\n\n                if (!dirty) return;\n\n                lastWidth = size.width;\n                lastHeight = size.height;\n\n                if (element.resizedAttached) {\n                    element.resizedAttached.call(size);\n                }\n            };\n\n            var onScroll = function() {\n                size = getElementSize(element);\n                dirty = size.width !== lastWidth || size.height !== lastHeight;\n\n                if (dirty && !rafId) {\n                    rafId = requestAnimationFrame(onResized);\n                }\n\n                reset();\n            };\n\n            var addEvent = function(el, name, cb) {\n                if (el.attachEvent) {\n                    el.attachEvent('on' + name, cb);\n                } else {\n                    el.addEventListener(name, cb);\n                }\n            };\n\n            addEvent(expand, 'scroll', onScroll);\n            addEvent(shrink, 'scroll', onScroll);\n\n            // Fix for custom Elements and invisible elements\n            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                lastAnimationFrameForInvisibleCheck = 0;\n                reset();\n            });\n        }\n\n        forEachElement(element, function(elem){\n            attachResizeEvent(elem, callback);\n        });\n\n        this.detach = function(ev) {\n            // clean up the unfinished animation frame to prevent a potential endless requestAnimationFrame of reset\n            if (!lastAnimationFrameForInvisibleCheck) {\n                cancelAnimationFrame(lastAnimationFrameForInvisibleCheck);\n                lastAnimationFrameForInvisibleCheck = 0;\n            }\n            ResizeSensor.detach(element, ev);\n        };\n\n        this.reset = function() {\n            element.resizeSensor.resetSensor();\n        };\n    };\n\n    ResizeSensor.reset = function(element) {\n        forEachElement(element, function(elem){\n            elem.resizeSensor.resetSensor();\n        });\n    };\n\n    ResizeSensor.detach = function(element, ev) {\n        forEachElement(element, function(elem){\n            if (!elem) return;\n            if(elem.resizedAttached && typeof ev === \"function\"){\n                elem.resizedAttached.remove(ev);\n                if(elem.resizedAttached.length()) return;\n            }\n            if (elem.resizeSensor) {\n                if (elem.contains(elem.resizeSensor)) {\n                    elem.removeChild(elem.resizeSensor);\n                }\n                delete elem.resizeSensor;\n                delete elem.resizedAttached;\n            }\n        });\n    };\n\n    if (typeof MutationObserver !== \"undefined\") {\n        var observer = new MutationObserver(function (mutations) {\n            for (var i in mutations) {\n                if (mutations.hasOwnProperty(i)) {\n                    var items = mutations[i].addedNodes;\n                    for (var j = 0; j < items.length; j++) {\n                        if (items[j].resizeSensor) {\n                            ResizeSensor.reset(items[j]);\n                        }\n                    }\n                }\n            }\n        });\n\n        document.addEventListener(\"DOMContentLoaded\", function (event) {\n            observer.observe(document.body, {\n                childList: true,\n                subtree: true,\n            });\n        });\n    }\n\n    return ResizeSensor;\n\n}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import $ from 'jquery';\n\n/**\n * Performs a REST Call\n * \n * @return null\n */\n\nexport function restCall( parameters ){\n    // Define the valid endpoints\n    let validEndpoints = [ 'change_user_progress' ];\n\n    // Check if the endPoint parameter is a valid endpoint\n    if ( validEndpoints.includes( parameters.endpoint ) ){\n        // Do AJAX\n        $.ajax({\n            method: 'POST',\n            url:    parameters.url + parameters.endpoint + '/',\n            data:   $.param( parameters.data ) + '&' + $.param({ doing_rest: 1 }),\n\n            // Attach Nonce the the header of the request\n            beforeSend: function( xhr ){\n                xhr.setRequestHeader( 'X-WP-Nonce', parameters.nonce );\n            },\n\n            success: function( response ){\n\n                // Check if onDone is defined\n                if ( isDefined( parameters.onDone ) ){\n                    // Invoke callback\n                    parameters.onDone( response );\n                }\n\n                // Check if onSuccess is defined\n                if ( isDefined( parameters.onSuccess ) ){\n                    // Invoke callback\n                    parameters.onSuccess( response );\n                }\n            },\n\n            statusCode: {\n                403: function(){\n                    location.reload();\n                }\n            },\n\n            fail: function ( response ){\n                // Check if onDone is defined\n                if ( isDefined( parameters.onDone ) ){\n                    // Invoke callback\n                    parameters.onDone( response );\n                }\n                \n                if ( isDefined( parameters.onFail ) ){\n                    parameters.onFail( response );\n                }\n            },\n        });\n    }\n    else {\n        console.error( `The ${ parameters.endpoint } endPoint does not exists` );\n    }\n}\n\n/**\n * Determine if a variable is set and is not NULL\n *\n * @param  {mixed}      variable - The variable being evaluated\n * @return {boolean}    TRUE if the variable is defined\n */\n\nexport const isDefined = ( variable ) => {\n\t// Returns true if the variable is undefined\n    return typeof variable !== 'undefined' && variable !== null;\n}\n\n/**\n * Determine whether a variable is empty\n *\n * @param   {mixed}     variable - The variable being evaluated\n * @return  {boolean}   TRUE if the variable is empty\n */\n\nexport const isEmpty = ( variable ) => {\n    let response = true;\n\n    // Check if the variable is defined, otherwise is empty\n    if ( isDefined( variable ) ){\n        // Check if it's array\n        if ( variable.isArray ){\n            response = variable.length == 0;\n        }\n        else if ( isObject( variable ) ){\n            response = Object.keys( variable ).length;\n        }\n        else {\n            response = variable == '';\n        }\n    }\n\n    return response;\n}\n\n/**\n * Determine whether a variable is an object\n *\n * @param   {mixed}     variable - The variable being evaluated\n * @return  {boolean}   TRUE if the variable is an object\n */\n\nexport const isObject = ( variable ) => {\n    return typeof variable === 'object' && variable !== null;\n}\n\n/**\n * Format number\n * @param  {float}  amount        The number\n * @param  {int}    decimalCount  Number of decimals\n * @param  {string} decimal       The decimal separator\n * @param  {string} thousands     The thousands separator\n * @return {string}               Formatted number\n */\n\nexport const formatNumber = ( amount, decimalCount = 2, decimal = '.', thousands = ',' ) => {\n    decimalCount = Math.abs( decimalCount );\n    decimalCount = isNaN( decimalCount ) ? 2 : decimalCount;\n\n    let i = parseInt( amount = Math.abs( Number( amount ) || 0 ).toFixed( decimalCount ) ).toString();\n    let j = ( i.length > 3 ) ? i.length % 3 : 0;\n\n    return ( j ? i.substr( 0, j ) + thousands : '' ) + i.substr( j ).replace( /(\\d{3})(?=\\d)/g, '$1' + thousands ) + ( decimalCount ? decimal + Math.abs( amount - i ).toFixed( decimalCount ).slice( 2 ) : '' );\n};\n\n/**\n * Destroy iCheck\n */\n\nexport const destroyiCheck = () => {\n    // Check iCheck\n    if ( typeof jQuery.fn.iCheck !== 'undefined' ){\n        // Destroy iCheck checkboxes\n        jQuery( '.uo-checkbox input' ).iCheck( 'destroy' );\n        jQuery( '.uo-checkbox input' ).on( 'ifCreated', function( event ){\n            // Destroy iCheck\n            setTimeout(function(){\n                jQuery( event.currentTarget ).iCheck( 'destroy' );\n            }, 100 );\n        });\n    }  \n}\n\n/**\n * Debounces a function\n *\n * @param {Function} func     The function to debounce\n * @param {Integer}  interval The interval, in milliseconds\n * @return {Function}         The function debounced\n */\nexport const debounce = ( func, interval ) => {\n\tlet lastCall = -1;\n\n\treturn () => {\n\t\tclearTimeout( lastCall );\n\t\t// eslint-disable-next-line no-undef\n\t\tconst args = arguments;\n\t\tconst self = this;\n\t\tlastCall = setTimeout( () => {\n\t\t\tfunc.apply( self, args );\n\t\t}, interval );\n\t};\n};\n","import {\n\tdestroyiCheck\n} from './utilities';\n\n(function($){\n\t$(document).ready(function(){\n\t\thide_sort_buttons();\n\t\tcopy_to_clipboard();\n\t\tux_buttons();\n\t\thide_tables_while_loading();\n\n\t\tdestroyiCheck();\n\t});\n\n\tfunction hide_sort_buttons(){\n\t\tvar sort_buttons_container = $('.uo-table-sort-buttons');\n\t\tsort_buttons_container.on('click', '.uo-table-sort-btn', function(){\n\t\t\tvar closest_group = $(this).closest('.uo-table-sort-buttons'),\n\t\t\t\tdirection = $(this).data('direction');\n\t\t\t$(this).hide();\n\t\t\tclosest_group.find('.uo-table-sort-btn:not([data-direction=\"'+direction+'\"])').show();\n\t\t});\n\t}\n\n\tfunction copy_to_clipboard(){\n\t\tvar button = $('.uo-copy-to-clipboard-button');\n\t\tbutton.click(function(){\n\t\t\tvar container = $(this).closest('.uo-copy-to-clipboard'),\n\t\t\t\tinput = $(container.find('input'));\n\t\t\tinput.select();\n\t\t\tdocument.execCommand('Copy');\n\t\t});\n\t}\n\n\tfunction ux_buttons(){\n\t\t// group-management > enrolled users Hide \"Add user\" when an user is selected in the table\n\t\tvar btn_add_users = $('#uo_add_users_button');\n\n\t\t/* enrolled_user_checkboxes.change(function(){\n\t\t\tvar at_least_one_selected = enrolled_user_checkboxes.is(':checked');\n\n\t\t\tif (at_least_one_selected) {\n                //btn_add_users.hide();\n            }else {\n                //btn_add_users.show();\n            }\n\t\t}); */\n\n\t\t$( '#uo-open-bulk-add' ).on( 'click', function(){\n\t\t\tlet container = $( '.uo-groups-bulk' );\n\t\t\tcontainer.slideToggle( 500 );\n\n\t\t\t$( 'html, body' ).animate({\n\t\t\t\tscrollTop: container.offset().top - 100\n\t\t\t}, 500);\n\t\t});\n\n\t\t$( '.uo-groups-bulk-close' ).on( 'click', function(){\n\t\t\tlet container = $( '.uo-groups-bulk' );\n\t\t\tcontainer.slideToggle( 500 );\n\t\t});\n\n\t\t// group-management > group leaders Hide \"Add group leader\" when a leader is selected in the table\n\t\tvar group_leaders_checkboxes = $('.uo-groups-group-leaders input[name=\"group-leader-id[]\"], .uo-groups-enrolled-users input#select-all-group-leaders'),\n\t\t\tbtn_add_leader = $('.uo-groups-group-leaders .uo-btn[data-modal-id=\"#group-management-add-group-leader\"]');\n\n\t\tgroup_leaders_checkboxes.on('change', function(){\n\t\t\tvar at_least_one_selected = group_leaders_checkboxes.is(':checked');\n\n\t\t\tif (at_least_one_selected)\n\t\t\t\tbtn_add_leader.hide();\n\t\t\telse\n\t\t\t\tbtn_add_leader.show();\n\t\t});\n\n\t\t// Group buttons in small devices\n\t\t$( '.uo-groups-list-of-btns-main' ).click( function( event ){\n\t\t\t// Get the clicked button\n\t\t\tvar $currentButton    = $( event.currentTarget ),\n\t\t\t// then get the group id\n\t\t\t\tgroupId           = $currentButton.data( 'id' ),\n\t\t\t// and get the direction\n\t\t\t\tdropdownDirection = typeof $currentButton.data( 'direction' ) == 'undefined' ? 'right' : $currentButton.data( 'direction' );\n\n\t\t\t// Once we have the group id, get the main container, which contains the items to show\n\t\t\tvar $targetGroup   = $( '.uo-groups-list-of-btns[data-id=\"' + groupId + '\"]' );\n\n\t\t\t// Check if the group exists\n\t\t\tif ( $targetGroup.length == 1 ){\n\t\t\t\t// Check if it's open\n\t\t\t\tvar isGroupOpen = $targetGroup.hasClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t// Check if it's closed\n\t\t\t\tif ( ! isGroupOpen ){\n\t\t\t\t\t// Add class to show it\n\t\t\t\t\t$targetGroup.addClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t\t// Add the class to set the direction\n\t\t\t\t\tif ( dropdownDirection == 'left' || dropdownDirection == 'right' ){\n\t\t\t\t\t\t$targetGroup.addClass( 'uo-groups-list-of-btns--' + dropdownDirection );\n\t\t\t\t\t}\n\n\t\t\t\t\tbind_click_outside();\n\t\t\t\t\tbind_escape_button();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Remove class to show the group\n\t\t\t\t\t$targetGroup.removeClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t\tunbind_click_outside();\n\t\t\t\t\tunbind_escape_button();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.error( 'We couldn\\'t find the dropdown' );\n\t\t\t}\n\t\t});\n\n\t\t// Close if clicks on a button inside a list of buttons\n\t\tvar btns_inside_list = $('.uo-groups-list-of-btns .uo-groups-list .uo-btn');\n\t\tbtns_inside_list.click(function(){\n\t\t\tvar group = $(this).closest('.uo-groups-list-of-btns');\n\t\t\tgroup.removeClass('uo-groups-list-of-btns-open')\n\t\t});\n\n\t\tfunction bind_click_outside(){\n\t\t\t// Close if user taps outside\n\t\t\t$( document ).on( 'mouseup.uncanny-groups-buttons-dropdown', function(e){\n\t\t\t\tvar container = $('.uo-groups-list-of-btns');\n\n\t\t\t\t// if the target of the click isn't the container nor a descendant of the container\n\t\t\t\tif (!container.is(e.target) && container.has(e.target).length === 0){\n\t\t\t\t\tcontainer.removeClass('uo-groups-list-of-btns-open');\n\t\t\t\t\tunbind_click_outside();\n\t\t\t\t\tunbind_escape_button();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction unbind_click_outside(){\n\t\t\t// Stop listening clicks outside .uo-groups-list-of-btns\n\t\t\t$( document ).off( 'mouseup.uncanny-groups-buttons-dropdown' );\n\t\t}\n\n\t\tfunction bind_escape_button(){\n\t\t\t// Close if user presses escape\n\t\t\t$( document ).on( 'keyup.uncanny-groups-buttons-dropdown', function(e){\n\t\t\t\tif ( e.key === 'Escape' ) {\n\t\t\t\t\t$('.uo-groups-list-of-btns').removeClass('uo-groups-list-of-btns-open');\n\t\t\t\t\tunbind_escape_button();\n\t\t\t\t\tunbind_click_outside();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction unbind_escape_button(){\n\t\t\t// Stop listening escape key\n\t\t\t$( document ).off( 'keyup.uncanny-groups-buttons-dropdown' );\n\t\t}\n\t}\n\n\tfunction hide_tables_while_loading(){\n\t\t// /group-management-report/\n\t\tvar progress_report = $('#uo-group-progress-report'),\n\t\t\ttriggers = $('.uo-groups.uo-reports #group-report select.change-group-management-form');\n\n\t\ttriggers.change(function(){\n\t\t\tprogress_report.hide();\n\t\t});\n\t}\n})(jQuery);\n","import $ from 'jquery';\n\nimport { debounce, isEmpty } from './utilities';\n\nclass GroupManagement {\n\tconstructor(){\n\t\t// Check if it's the group management page\n\t\tif (this.isGroupManagement()) {\n\t\t\t// Create enrolled users table\n\t\t\tnew EnrolledUsersTable();\n\t\t\tnew EmailUsers();\n\n\t\t\t// Setup modal popups\n\t\t\twindow.ulgmGroupManagement.groupManagementModal = new modals();\n\t\t}\n\t}\n\n\tisGroupManagement(){\n\t\treturn $( '#group-management' ).length == 1;\n\t}\n}\n\nclass modals {\n\tconstructor(){\n\t\t$( document ).on( 'modal:open', function ( e ){\n\t\t\tif (e.target.id === 'group-management-email-users') {\n\t\t\t\tdocument.dispatchEvent( new CustomEvent( 'uncanny-groups/group-management/email-users/open-options' ) );\n\n\t\t\t\twp.editor.remove( 'group_email_text' );\n\t\t\t\twp.editor.initialize( 'group_email_text',\n\t\t\t\t\t{\n\t\t\t\t\t\ttinymce: {\n\t\t\t\t\t\t\tmin_height: 300,\n\t\t\t\t\t\t\tformats: {\n\t\t\t\t\t\t\t\talignleft: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"left\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"alignleft\"}],\n\t\t\t\t\t\t\t\taligncenter: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"center\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"aligncenter\"}],\n\t\t\t\t\t\t\t\talignright: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"right\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"alignright\"}],\n\t\t\t\t\t\t\t\tstrikethrough: {inline: \"del\"}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttoolbar1: 'formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor emoticons',\n\t\t\t\t\t\t\tplugins: \"charmap colorpicker hr lists media paste tabfocus textcolor fullscreen wordpress wpautoresize wpeditimage wpemoji wpgallery wplink wpdialogs wptextpattern wpview\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tquicktags: {\n\t\t\t\t\t\t\tbuttons: 'strong,em,link,ul,ol,li,code'\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\t// Add events for the group management page\n\t\tthis.addGroupManagementEvents();\n\t}\n\n\taddGroupManagementEvents(){\n\n\t\t// Clear file so we get a fresh copy every time\n\t\t$( \"#csv-file\" ).on( 'click', function (){\n\t\t\t$( this ).val( '' );\n\t\t} );\n\n\t\t// There may be other plugin/themes that are using this modal or using the same trigger. let customize the trigger\n\t\t$( 'body' ).on( 'click', '.ulgm-modal-link', this.openModal );\n\n\t\t// User csv file input change\n\t\t$( '#csv-file' ).on( 'change', this.parseCsv );\n\n\t\t//Hide inupts dependent on radio\n\t\t$( \"input:radio[name=action]\" ).click( function (){\n\t\t\tvar value          = $( this ).val();\n\t\t\tvar modalContainer = $( this ).parent();\n\n\t\t\tmodalContainer.children( '#first-name, #last-name, #email, label[for=first-name], label[for=last-name], label[for=email-name]' ).show();\n            $('#uo_add_user_password').show();\n\n\t\t\tif ('send-enrollment' === value || 'add-existing-user' === value) {\n\t\t\t\tmodalContainer.children( '#first-name, #last-name, label[for=first-name], label[for=last-name]' ).hide();\n\t\t\t\t$('#uo_add_user_password').hide();\n\t\t\t}\n\n\t\t} );\n\n\t\twindow.ulgmGroupManagement.downloadCsv = function ( csv ){\n\t\t\tvar blob = new Blob( [csv.csvDataString], {type: \"text/csv;charset=utf-8\"} );\n\t\t\tsaveAs( blob, csv.fileName + \".csv\" );\n\t\t};\n\t}\n\n\topenModal( e ){\n\t\te.preventDefault();\n\n\t\t// clear any error messages\n\t\t$( '.group-management-form' ).find( '.group-management-rest-message' ).html( '' ).hide();\n\n\t\tvar modalId   = $( this ).data( 'modal-id' );\n\t\tvar modalAjax = $( this ).data( 'modal-ajax' );\n\n\t\tif (modalAjax == true) {\n\t\t\tvar endpoint = $( this ).data( 'endpoint' );\n\t\t\tvar user     = $( this ).data( 'user-id' );\n\t\t\tvar group    = $( this ).data( 'group-id' );\n\t\t\tvar restData = {'action': 'get-user-details', 'user': user, 'group-id': group};\n\t\t\tvar spinner  = $( '.uo-modal-spinner' );\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: ulgmRestApiSetup.root + endpoint + '/',\n\t\t\t\tdata: restData,\n\n\t\t\t\t// Attach Nonce the the header of the request\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', ulgmRestApiSetup.nonce );\n\t\t\t\t},\n\n\t\t\t\tstatusCode: {\n\t\t\t\t\t403: function ( xhr ){\n\t\t\t\t\t\tspinner.hide();\n\t\t\t\t\t\t$error_container.html( ulgmRestApiSetup.i18n.youCantDoThat ).show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tfor (var x in response.data) {\n\t\t\t\t\t\tif ($( '#' + x ).length > 0) {\n\t\t\t\t\t\t\t$( '#' + x ).val( response.data[x].value );\n\t\t\t\t\t\t\tif (response.data[x].is_editable == false) {\n\t\t\t\t\t\t\t\t$( '#' + x ).attr( 'disabled', 'disabled' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\tif (true === response.success) {\n\t\t\t\t\t\tvar modal = $( modalId );\n\n\t\t\t\t\t\tmodal.on( 'modal:open.uncanny-groups-modal', () => {\n\t\t\t\t\t\t\t// Focus on the first field\n\t\t\t\t\t\t\tconst fieldField = $( modal ).find( 'input:visible, select:visible' ).first();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif ( fieldField.length > 0 ) {\n\t\t\t\t\t\t\t\tfieldField.trigger( 'focus' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$( modal ).find( 'button:visible:first' ).trigger( 'focus' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmodal.off( 'modal:open.uncanny-groups-modal' );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tmodal.modal();\n\n\t\t\t\t\t\t$( '#group-management' ).trigger( 'modal-open', [modalId, modal] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\t\t$error_container\n\t\t\t\t\t\t\t.html( response.data.message )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\tspinner.hide();\n\t\t\t\t\t$error_container.html( response.data.message );\n\t\t\t\t},\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\tvar modal = $( modalId );\n\n\t\t\tmodal.on( 'modal:open.uncanny-groups-modal', () => {\n\t\t\t\t// Focus on the first field\n\t\t\t\tconst fieldField = $( modal ).find( 'input:visible, select:visible' ).first();\n\t\t\t\t\n\t\t\t\tif ( fieldField.length > 0 ) {\n\t\t\t\t\tfieldField.trigger( 'focus' );\n\t\t\t\t} else {\n\t\t\t\t\t$( modal ).find( 'button:visible:first' ).trigger( 'focus' );\n\t\t\t\t}\n\n\t\t\t\tmodal.off( 'modal:open.uncanny-groups-modal' );\n\t\t\t} );\n\n\t\t\tmodal.modal();\n\n\t\t\t$( '#group-management' ).trigger( 'modal-open', [modalId, modal] );\n\t\t}\n\t}\n\n\tparseCsv( e ){\n\n\t\tvar input            = $( this );\n\t\tvar messageContainer = $( input.closest( '.group-management-form' ) ).find( '.group-management-rest-message' )\n\n\t\t// Reset Message\n\t\tmessageContainer.hide();\n\t\tmessageContainer.text( '' );\n\n\t\ttry {\n\t\t\tvar reader = new FileReader();\n\t\t\t//do something\n\t\t} catch (e) {\n\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.file_api_is_not_supported ).css( 'display', 'inline-flex' );\n\t\t\treturn false;\n\t\t}\n\n\t\tvar file    = $( '#csv-file' )[0].files[0];\n\t\tvar csvText = false;\n\n\n\t\tif (file) {\n\t\t\t// check is csv extension\n\t\t\tif ('csv' !== file.name.split( '.' ).pop()) {\n\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.select_a_csv ).css( 'display', 'inline-flex' );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treader.readAsText( file );\n\n\t\t\treader.onload = function ( e ){\n\n\t\t\t\tcsvText = e.target.result;\n\n\t\t\t\tif (!csvText) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.csv_file_error ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// split file text on line breaks\n\t\t\t\tvar csvArray = csvText.split( /\\r?\\n/g );\n\n\t\t\t\t// Preliminary checks\n\n\t\t\t\t// Pull out the header and store it\n\n\t\t\t\tvar csvHead = csvArray.shift();\n\n\t\t\t\tlet delimiter = \",\";\n\t\t\t\tif (csvHead.indexOf( \";\" ) !== -1) {\n\t\t\t\t\tdelimiter = \";\";\n\t\t\t\t}\n\n\n\t\t\t\tcsvHead = csvHead.split( delimiter );\n\n\t\t\t\t// Something is off ... create to detect CR only line breaks where CRLF is only supported but may detect other malformations\n\t\t\t\tif (csvHead.length !== 3 && csvArray.length === 0) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.incompatible_format ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Remove last line of csv that is always blank\n\t\t\t\tcsvArray.pop();\n\n\t\t\t\t// Require emails\n\t\t\t\tvar emailIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'user_email' );\n\t\t\t\tif ('error' === emailIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_email ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Require user first name\n\t\t\t\tvar firstNameIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'first_name' );\n\t\t\t\tif ('error' === firstNameIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_first ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Require user first name\n\t\t\t\tvar lastNameIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'last_name' );\n\t\t\t\tif ('error' === lastNameIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_last ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar newArray = csvArray.map( function mapper( v ){\n\t\t\t\t\tif (typeof v == \"string\") {\n\t\t\t\t\t\treturn v.split( delimiter );\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn v.map( mapper );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\n\t\t\t\t// Check for blank lines\n\t\t\t\tvar emptyRows = window.ulgmGroupManagement.groupManagementModal.verifyEmptyRows( newArray, emailIndex );\n\n\t\t\t\tif (emptyRows) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.must_contain_email ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t$( '#csv-text' ).val( csvText );\n\n\n\t\t\t};\n\t\t} else {\n\t\t\t$( input.closest( '.group-management-form' ) ).find( '.group-management-rest-message' ).text( ulgmGroupManagementLocalized.text.choose_file );\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tverifyEmptyRows( array, emailIndex ){\n\n\t\tfor (var i = 0; i < array.length; ++i) {\n\t\t\tif (array[i][emailIndex] === '') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tverifyRequiredHeader( headerArray, type ){\n\n\t\tvar columnsAmount = 0;\n\t\tvar columnIndex   = false;\n\t\tfor (var i = 0; i < headerArray.length; i++) {\n\t\t\tif (headerArray[i] === type) {\n\t\t\t\tcolumnsAmount++;\n\t\t\t\tcolumnIndex = i;\n\t\t\t}\n\t\t}\n\n\t\tif (0 === columnsAmount) {\n\t\t\treturn 'error';\n\n\t\t}\n\n\t\tif (1 !== columnsAmount) {\n\t\t\treturn 'error';\n\t\t}\n\n\t\treturn columnIndex;\n\n\t}\n}\n\nclass EmailUsers {\n\tconstructor() {\n\t\t// Listen when the dialog is opened\n\t\tthis.handleOpenDialog();\n\n\t\t// Listen when the courses and statuses change\n\t\tthis.handleFieldUpdates();\n\t}\n\n\t/**\n\t * Returns the data required to retrieve the number of affected users\n\t */\n\tget emailUsersFormData() {\n\t\treturn {\n\t\t\tgroup_id: this.$groupIDHiddenField.value,\n\t\t\tcourses: jQuery( this.$coursesDropdown ).val(),\n\t\t\tstatuses: jQuery( this.$courseStatuses ).val(),\n\t\t\tinclude_children: this.$includeChildrenCheckbox ? this.$includeChildrenCheckbox.checked : false,\n\t\t}\n\t}\n\n\t/**\n\t * Listens to the dialog and updates the user count when it's opened\n\t */\n\thandleOpenDialog() {\n\t\tdocument.addEventListener( 'uncanny-groups/group-management/email-users/open-options', () => {\n\t\t\t// Update the user count\n\t\t\tthis.updateUserCount();\n\t\t} );\n\t}\n\n\t/**\n\t * Listens when the courses and statuses change\n\t */\n\thandleFieldUpdates() {\n\t\t// Unfortunately, we need to use jQuery here. select2 doesn't fire the native events\n\t\t// https://github.com/select2/select2/issues/4686\n\t\tjQuery( this.$coursesDropdown ).on( 'change', () => { this.updateUserCount() } );\n\t\tjQuery( this.$courseStatuses ).on( 'change', () => { this.updateUserCount() } );\n\t\t// Check if the include children checkbox exists.\n\t\tif ( this.$includeChildrenCheckbox ) {\n\t\t\t// Listen to change and update count accordingly.\n\t\t\tjQuery( this.$includeChildrenCheckbox ).on( 'change', () => { this.updateUserCount() } );\n\t\t}\n\t}\n\n\t/**\n\t * Updates the number of users that'll receive the email\n\t */\n\tupdateUserCount() {\n\t\t// Remove the current number\n\t\tthis.$userCountCounter.innerText = '';\n\n\t\tfetch( `${ ulgmRestApiSetup.root }email_users_get_user_count?${ jQuery.param( this.emailUsersFormData ) }`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'X-WP-Nonce': ulgmRestApiSetup.nonce,\n\t\t\t},\n\t\t})\n\t\t\t.then( response => response.json() )\n\t\t\t.then( response => {\n\t\t\t\tif ( ! response.success || typeof response.data.userCount === 'undefined' ) {\n\t\t\t\t\tthis.$userCountCounter.innerText = `(${ ulgmGroupManagementLocalized.text.error })`;\n\t\t\t\t}\n\n\t\t\t\tthis.$userCountCounter.innerText = response.data.userCount;\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\t// Show error\n\t\t\t\tthis.$userCountCounter.innerText = `? (${ ulgmGroupManagementLocalized.text.error })`;\n\t\t\t\tconsole.error( error );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Returns the node that'll be used to show the user count\n\t */\n\tget $userCountCounter() {\n\t\treturn document.getElementById( 'ulgm-management-email-users-count' );\n\t}\n\n\t/**\n\t * Returns the field \"Group courses\"\n\t */\n\tget $coursesDropdown() {\n\t\treturn document.getElementById( 'ulgm-management-send-email-courses' );\n\t}\n\n\t/**\n\t * Returns the field \"Course status\"\n\t */\n\tget $courseStatuses() {\n\t\treturn document.getElementById( 'ulgm-management-send-email-course-statuses' );\n\t}\n\n\t/**\n\t * Returns the hidden field that contains the group ID\n\t */\n\tget $groupIDHiddenField() {\n\t\treturn document.getElementById( 'group_email_group_id' );\n\t}\n\n\t/**\n\t * Returns the include children checkbox if it exists\n\t */\n\tget $includeChildrenCheckbox() {\n\t\tlet $checkbox = document.getElementById( 'group_email_include_children' );\n\t\treturn $checkbox !== null ? $checkbox : false;\n\t}\n}\n\nclass EnrolledUsersTable {\n\tconstructor(){\n\t\t// Check if it has the enrolled users table\n\t\tif (this.hasEnrolledUsersTable()) {\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Get data\n\t\t\tthis.getData();\n\n\t\t\t// Add select2\n\t\t\tthis.addSelect2();\n\n\t\t\t// Create DataTable\n\t\t\tthis.createDataTables();\n\n\t\t\t// Listen the checkbox to select all the users\n\t\t\tthis.listenCheckboxToSelectAll();\n\n\t\t\t// Listen checkboxes changes\n\t\t\tthis.listenCheckboxesChanges();\n\n\t\t\t// Listen modal open and update data\n\t\t\tthis.updateDataOnModal();\n\n\t\t\t// Check if the \"First name\" and \"Last name\" fields when adding new users must be required\n\t\t\tthis.firstLastNamesRequired();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tcontainer: $( '#group-management' ),\n\t\t\tselectEl: $( '.uo-groups select' ),\n\t\t\tenrolledUsersTableDT: $( '#group-management-enrolled-users-datatable' ),\n\t\t\tenrolledLeaderTableDT: $( '#group-management-enrolled-leader-datatable' ),\n\t\t\tremoveUsersButton: $( '#group-management-enrolled-users-table-remove-users' ),\n\t\t\tremoveLeadersButton: $( '.group-leader-management-buttons' ),\n\t\t\tsendEmailsButton: $( '#group-management-enrolled-users-table-send-password' ),\n\t\t\tnumberOfUsers: $( '#group-management .uo-groups-enrolled-users .amount-users' ),\n\t\t\tsendEmailsModal: $( '#group-management-enrolled-users-table-send-password-modal' ),\n\t\t\tsendEmailsField: $( '#group-management-enrolled-users-table-send-password-field' ),\n\t\t\tremoveUsersField: $( '#group-management-remove-user #removing-users' ),\n\t\t\temailUsersCoursesDropdown: $( '#ulgm-management-send-email-courses' ),\n\t\t}\n\t}\n\n\taddSelect2(){\n\t\t// Init select2 in all dropdowns\n\t\ttry {\n\t\t\t// Iterate dropdowns\n\t\t\tthis.$elements.selectEl.each( ( index, $dropdown ) => {\n\t\t\t\t// Default select2 options\n\t\t\t\tconst select2Options = {}\n\n\t\t\t\t// Check if it's inside a modal\n\t\t\t\tif ( $dropdown.closest( '.group-management-modal' ) ) {\n\t\t\t\t\t// Init select2, but add the main wrapper inside the modal\n\t\t\t\t\tselect2Options.dropdownParent = $( $dropdown.parentNode );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$( $dropdown ).select2( select2Options );\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\tconsole.warn( e );\n\t\t}\n\n\t\tif ($( '#group-id' ).length > 0) {\n\t\t\t$( '#group-id' ).change( function (){\n\t\t\t\t$( this ).closest( 'form' ).submit();\n\t\t\t} );\n\t\t}\n\n\t\t// Set logic of the Email users > Courses dropdown\n\t\t// Cache the field value. We will use this to see what's the latest selected option\n\t\tthis.emailUsersCourses = this.$elements.emailUsersCoursesDropdown.val() || [];\n\t\tthis.$elements.emailUsersCoursesDropdown.on( 'change', () => {\n\n\t\t\t// Nice-to-have, so let's add it inside a try block\n\t\t\t// Even if this doesn't work, everything else will continue working\n\t\t\ttry {\n\t\t\t\t// Set the value of the \"All courses\" option\n\t\t\t\tconst optionAllCoursesValue = '-1';\n\n\t\t\t\t// Create a variable to know later if we changed the value of the dropdown\n\t\t\t\tlet hadWeChangedCoursesValues = false;\n\n\t\t\t\t// Get the values of the dropdown\n\t\t\t\tlet selectedCourses = this.$elements.emailUsersCoursesDropdown.val();\n\n\t\t\t\t// Check if there are courses selected\n\t\t\t\tif ( selectedCourses.length == 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Get the latest selected option\n\t\t\t\t// To do so, get the symmetric difference\n\t\t\t\tconst latestChangedOption = this.emailUsersCourses\n\t\t\t\t\t.filter( courseID => ! selectedCourses.includes( courseID ) )\n\t\t\t\t\t.concat( selectedCourses.filter( courseID => ! this.emailUsersCourses.includes( courseID ) ) )[0];\n\n\t\t\t\t// Check if an option changed\n\t\t\t\tif ( typeof latestChangedOption === 'undefined' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check whether the option was added (true) or removed (false)\n\t\t\t\tconst wasLastOptionAdded = this.emailUsersCourses\n\t\t\t\t\t.filter( courseID => ! selectedCourses.includes( courseID ) )\n\t\t\t\t\t.length == 0;\n\n\t\t\t\t// Check if the \"All courses\" option is selected\n\t\t\t\tconst isOptionAllCoursesSelected = selectedCourses.includes( optionAllCoursesValue );\n\n\t\t\t\tif (\n\t\t\t\t\t// Check if the user added the \"All courses\" option\n\t\t\t\t\tlatestChangedOption == optionAllCoursesValue && wasLastOptionAdded &&\n\t\t\t\t\t// And there are more options selected\n\t\t\t\t\tselectedCourses.length > 1\n\t\t\t\t) {\n\t\t\t\t\t// Select only \"All courses\"\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown.val( '' );\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown\n\t\t\t\t\t\t.find( `option[value=\"${ optionAllCoursesValue }\"]` )\n\t\t\t\t\t\t.prop( 'selected', true );\n\n\t\t\t\t\t// We changed the value, update the flag\n\t\t\t\t\thadWeChangedCoursesValues = true;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t// User added a different option than \"All courses\"\n\t\t\t\t\tlatestChangedOption != optionAllCoursesValue && wasLastOptionAdded &&\n\t\t\t\t\t// And \"All courses\" is seleceted\n\t\t\t\t\tisOptionAllCoursesSelected\n\t\t\t\t) {\n\t\t\t\t\t// Remove \"All courses\"\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown\n\t\t\t\t\t\t.find( `option[value=\"${ optionAllCoursesValue }\"]` )\n\t\t\t\t\t\t.prop( 'selected', false );\n\n\t\t\t\t\t// We changed the value, update the flag\n\t\t\t\t\thadWeChangedCoursesValues = true;\n\t\t\t\t}\n\n\t\t\t\t// Check if the value changed\n\t\t\t\tif ( hadWeChangedCoursesValues ) {\n\t\t\t\t\t// Update selected options\n\t\t\t\t\tthis.emailUsersCourses = this.$elements.emailUsersCoursesDropdown.val();\n\n\t\t\t\t\t// Trigger change event to update select2\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown.trigger( 'change' );\n\t\t\t\t} \n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.warn( e );\n\t\t\t}\n\t\t\t\n\t\t} );\n\t}\n\n\tgetData(){\n\t\t// Get data from DOM elements\n\t\tthis.data = {\n\t\t\tcanRemoveUsers: !!parseInt( this.$elements.enrolledUsersTableDT.data( 'can-remove-users' ) ),\n\t\t\tcanRemoveUsersAnytime: !!parseInt( this.$elements.enrolledUsersTableDT.data( 'can-remove-users-anytime' ) ),\n\t\t\tulgmGroupLeaderData: null !== ulgmGroupLeaderData ? ulgmGroupLeaderData : [],\n\t\t};\n\n\t\t// Set the default array for the selected users on page load\n\t\tthis.selectedUsers   = [];\n\t\tthis.selectedLeaders = [];\n\t}\n\n\tcreateDataTables(){\n\n\t\t/* Create an array with the values of all the input boxes in a column */\n\t\tjQuery.fn.dataTable.ext.type.order['uo-groups-anchor-asc'] = function ( a, b ){\n\t\t\t// Create the HTML element\n\t\t\tlet textA       = document.createElement( 'div' );\n\t\t\t// Insert the row content inside\n\t\t\ttextA.innerHTML = a;\n\t\t\t// Get only the text, not the HTML\n\t\t\ttextA           = textA.textContent;\n\t\t\t// Make it lowercase, and remove extra spaces\n\t\t\ttextA           = textA.toLowerCase().trim();\n\n\t\t\t// Now do the same with B\n\t\t\tlet textB       = document.createElement( 'div' );\n\t\t\ttextB.innerHTML = b;\n\t\t\ttextB           = textB.textContent;\n\t\t\ttextB           = textB.toLowerCase().trim();\n\n\t\t\t// Compare text A with text B\n\t\t\treturn textA.localeCompare( textB );\n\t\t};\n\n\t\tjQuery.fn.dataTable.ext.type.order['uo-groups-anchor-desc'] = function ( a, b ){\n\t\t\t// Create the HTML element\n\t\t\tlet textA       = document.createElement( 'div' );\n\t\t\t// Insert the row content inside\n\t\t\ttextA.innerHTML = a;\n\t\t\t// Get only the text, not the HTML\n\t\t\ttextA           = textA.textContent;\n\t\t\t// Make it lowercase, and remove extra spaces\n\t\t\ttextA           = textA.toLowerCase().trim();\n\n\t\t\t// Now do the same with B\n\t\t\tlet textB       = document.createElement( 'div' );\n\t\t\ttextB.innerHTML = b;\n\t\t\ttextB           = textB.textContent;\n\t\t\ttextB           = textB.toLowerCase().trim();\n\n\t\t\t// Compare text A with text B\n\t\t\treturn textB.localeCompare( textA );\n\t\t};\n\n\t\t// version 4.0- columns are defined in group-management-interface.php\n\t\tlet userColumns = this.data.ulgmGroupLeaderData.enrolled_user_columns;\n\n\t\t// Check if we should add the column with the checkbox\n\t\tif ( 'true' === this.data.ulgmGroupLeaderData.populate_management_features ) {\n\t\t\tuserColumns.unshift( {\n\t\t\t\tdata: 'check',\n\t\t\t\ttitle: this.data.ulgmGroupLeaderData.check_all,\n\t\t\t\tsearchable: false,\n\t\t\t\torderable: false,\n\t\t\t} );\n\t\t}\n\n\t\t// Check if we have to remove the \"Key\" column\n\t\tif ( true !== this.$elements.enrolledUsersTableDT.data( 'key_column' ) ) {\n\t\t\t// Remove it\n\t\t\tuserColumns = userColumns.filter( columnData => columnData.targets != 'key' );\n\t\t}\n\n\t\t// Create shared options applied to all export buttons\n\t\tconst buttonCommon = {\n\t\t\texportOptions: {\n\t\t\t\t// columns: ':visible'\n\t\t\t},\n\t\t\tfilename: () => {\n\t\t\t\tconst filenameParts = [\n\t\t\t\t\t'group-management',\n\t\t\t\t\tdocument.getElementById( 'ulgm_current_managed_group_id' ).value\n\t\t\t\t];\n\n\t\t\t\t// Add the Group name\n\t\t\t\tlet groupName = $( \"#group-id option:selected\" ).text();\n\t\t\t\tgroupName = groupName ? groupName : $( \"#group-name\" ).text();\n\t\t\t\tfilenameParts.push( groupName );\n\n\t\t\t\treturn filenameParts.join( ' - ' );\n\t\t\t}\n\t\t};\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet enrolledUsersOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet enrolledUsersOrderByIndex = userColumns.findIndex( columnData => columnData.title == ulgmGroupManagementShortcode.tables.enrolledUsers.orderBy );\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( enrolledUsersOrderByIndex === -1 ) {\n\t\t\tenrolledUsersOrderByIndex = userColumns.findIndex( columnData => columnData.targets == 'first_name' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( enrolledUsersOrderByIndex !== -1 ) {\n\t\t\tenrolledUsersOrder = [\n\t\t\t\t[\n\t\t\t\t\tenrolledUsersOrderByIndex, // The ID of the column used to sort, defaults to `first_name`\n\t\t\t\t\tulgmGroupManagementShortcode.tables.enrolledUsers.order, // Designates the ascending or descending order of the orderby parameter, defaults to `asc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\tlet userTableVars = {\n\t\t\tdata: this.data.ulgmGroupLeaderData.enrolled_user_data,\n\t\t\tsearchDelay: 400,\n\t\t\tcolumns: userColumns,\n\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\torder: enrolledUsersOrder,\n\t\t\tpageLength: parseInt( this.$elements.enrolledUsersTableDT.data( 'page_length' ) ),\n\t\t\tlengthMenu: [\n\t\t\t\t[10, 25, 50, 100],\n\t\t\t\t[10, 25, 50, 100]\n\t\t\t],\n\t\t\tbuttons: [\n\t\t\t\t$.extend( true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: ulgmRestApiSetup.language.buttons.csvExport,\n\t\t\t\t\t\n\t\t\t\t} ),\n\t\t\t\t$.extend( true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: ulgmRestApiSetup.i18n.exportExcel,\n\t\t\t\t} ),\n\t\t\t],\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.language.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.language.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.language.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.language.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.language.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.language.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.language.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.language.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.language.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.language.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.language.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.language.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.language.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.language.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.language.sortDescending\n\t\t\t\t}\n\t\t\t},\n\t\t\tprocessing: false,\n\t\t\tserverSide: false,\n\n\t\t\tcreatedRow: function( row, data, dataIndex ){\n\t\t\t\t$( row )\n\t\t\t\t\t.addClass( `status_id-${ data.status_id }` )\n\t\t\t},\n\n\t\t\tinitComplete: () => {\n\t\t\t\t// Get the export CSV button\n\t\t\t\tconst $fakeExportCSV = document.getElementById( 'group-management-users-export-csv' );\n\n\t\t\t\t// Get the export Excel button\n\t\t\t\tconst $fakeExportExcel = document.getElementById( 'group-management-users-export-excel' );\n\n\t\t\t\t// Check if the element exists\n\t\t\t\tif ( document.body.contains( $fakeExportCSV ) ){\n\t\t\t\t\t// Add an event listener to listen clicks\n\t\t\t\t\t$fakeExportCSV.addEventListener( 'click', () => {\n\t\t\t\t\t\t// Click the real \"Export CSV\" button\n\t\t\t\t\t\tconst $realExportCSV = document.querySelector( '#group-management-enrolled-users-datatable_wrapper .buttons-csv' );\n\n\t\t\t\t\t\t// Check if the element exists\n\t\t\t\t\t\tif ( document.body.contains( $realExportCSV ) ){\n\t\t\t\t\t\t\t// Click it\n\t\t\t\t\t\t\tconst event = document.createEvent( 'HTMLEvents' );\n\t\t\t\t\t\t\tevent.initEvent( 'click', true, false );\n\t\t\t\t\t\t\t$realExportCSV.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Check if the element exists\n\t\t\t\tif ( document.body.contains( $fakeExportExcel ) ){\n\t\t\t\t\t// Add an event listener to listen clicks\n\t\t\t\t\t$fakeExportExcel.addEventListener( 'click', () => {\n\t\t\t\t\t\t// Click the real \"Export CSV\" button\n\t\t\t\t\t\tconst $realExportExcel = document.querySelector( '#group-management-enrolled-users-datatable_wrapper .buttons-excel' );\n\n\t\t\t\t\t\t// Check if the element exists\n\t\t\t\t\t\tif ( document.body.contains( $realExportExcel ) ){\n\t\t\t\t\t\t\t// Click it\n\t\t\t\t\t\t\tconst event = document.createEvent( 'HTMLEvents' );\n\t\t\t\t\t\t\tevent.initEvent( 'click', true, false );\n\t\t\t\t\t\t\t$realExportExcel.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet userTable = null;\n\n\t\t// User table\n\t\tuserTable = this.$elements.enrolledUsersTableDT.DataTable( userTableVars );\n\n\t\t$( document ).trigger( 'enrolledUsersTableDataTableCreated', {\n\t\t\tuserTableVars: userTableVars,\n\t\t\tuserTable: userTable,\n\t\t\tulgmGroupLeaderData: ulgmGroupLeaderData\n\t\t} );\n\n\t\tlet leaderColumns = this.data.ulgmGroupLeaderData.enrolled_leader_columns;\n\t\tif ('true' === this.data.ulgmGroupLeaderData.populate_management_features) {\n\t\t\tleaderColumns.unshift( {data: 'check', targets: 0, title: this.data.ulgmGroupLeaderData.check_all} );\n\t\t}\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet groupLeadersOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet groupLeadersOrderByIndex = leaderColumns.findIndex( columnData => columnData.title == ulgmGroupManagementShortcode.tables.groupLeaders.orderBy );\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( groupLeadersOrderByIndex === -1 ) {\n\t\t\tgroupLeadersOrderByIndex = leaderColumns.findIndex( columnData => columnData.data == 'first_name' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( groupLeadersOrderByIndex !== -1 ) {\n\t\t\tgroupLeadersOrder = [\n\t\t\t\t[\n\t\t\t\t\tgroupLeadersOrderByIndex, // The ID of the column used to sort, defaults to `first_name`\n\t\t\t\t\tulgmGroupManagementShortcode.tables.groupLeaders.order, // Designates the ascending or descending order of the orderby parameter, defaults to `asc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\tlet leaderTableVars = {\n\t\t\tdata: this.data.ulgmGroupLeaderData.enrolled_leader_data,\n\t\t\tcolumns: leaderColumns,\n\t\t\tcolumnDefs: [{\n\t\t\t\ttargets: 0,\n\t\t\t\tsearchable: false,\n\t\t\t\torderable: false,\n\t\t\t}],\n\t\t\tdom: 'frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\torder: groupLeadersOrder,\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.language.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.language.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.language.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.language.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.language.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.language.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.language.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.language.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.language.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.language.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.language.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.language.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.language.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.language.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.language.sortDescending\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet leaderTable;\n\n\t\t// Try to set the custom page length and length menu attributes\n\t\t// This will work only if the user didn't override the uo-groups template\n\t\t// before Groups 3.7.3\n\t\ttry {\n\t\t\t// Set custom page length\n\t\t\tleaderTableVars.pageLength = parseInt( this.$elements.enrolledLeaderTableDT.data( 'page_length' ) );\n\n\t\t\t// Set custom page length\n\t\t\tleaderTableVars.lengthMenu = this.$elements.enrolledLeaderTableDT.data( 'length_menu' );\n\n\t\t\t// Leader table\n\t\t\tleaderTable = this.$elements.enrolledLeaderTableDT.DataTable( leaderTableVars );\n\t\t} catch (e) {\n\t\t\tconsole.log( 'Beta: Could not set custom page length and custom menu length' );\n\t\t\tconsole.log( e );\n\n\t\t\t// Leader table\n\t\t\tleaderTable = this.$elements.enrolledLeaderTableDT.DataTable( leaderTableVars );\n\t\t}\n\n\t\t$( document ).trigger( 'enrolledLeaderTableDataTableCreated', {\n\t\t\tleaderTableVars: leaderTableVars,\n\t\t\tleaderTable: leaderTable,\n\t\t\tulgmGroupLeaderData: ulgmGroupLeaderData\n\t\t} );\n\t}\n\n\tlistenCheckboxToSelectAll(){\n\t\t// Listen changes to this checkbox\n\t\tthis.$elements.container.on( 'change', '.group-management-enrolled-select-all', ( event ) => {\n\n\t\t\t// Get checkbox status\n\t\t\tconst checkAllEl = $( event.currentTarget );\n\t\t\tconst isChecked  = checkAllEl.is( ':checked' );\n\n\t\t\t// Get all checkboxes\n\t\t\tconst $allCheckboxes = checkAllEl.closest( 'table' ).find( '.select-user' );\n\n\t\t\t// Check if it's checked\n\t\t\tif (isChecked) {\n\t\t\t\t// Select all users\n\t\t\t\t$allCheckboxes.prop( 'checked', true );\n\t\t\t} else {\n\t\t\t\t// Unselect all users\n\t\t\t\t$allCheckboxes.prop( 'checked', false );\n\t\t\t}\n\n\t\t\t// Get the current selected users\n\t\t\tthis.updateSelectedUsers();\n\n\t\t\t// Evalute the visibility of the \"Remove users\" button\n\t\t\tthis.evaluateRemoveUsersButtonVisiblity();\n\n\t\t\t// Evalute the visibility of the \"Remove leaders\" button\n\t\t\tthis.evaluateRemoveLeadersButtonVisiblity();\n\n\t\t\t// Evaluate the visibility of the \"Send emails\" button\n\t\t\tthis.evaluateSendEmailsButtonVisiblity();\n\t\t} );\n\t}\n\n\tlistenCheckboxesChanges(){\n\t\t// Add event listener to the checkboxes\n\t\tthis.$elements.container.on( 'change', 'input[type=\"checkbox\"].select-user', ( event ) => {\n\t\t\t// Get the current selected users\n\t\t\tthis.updateSelectedUsers();\n\n\t\t\t// Evalute the visibility of the \"Remove users\" button\n\t\t\tthis.evaluateRemoveUsersButtonVisiblity();\n\n\t\t\t// Evalute the visibility of the \"Remove leaders\" button\n\t\t\tthis.evaluateRemoveLeadersButtonVisiblity();\n\n\t\t\t// Evaluate the visibility of the \"Send emails\" button\n\t\t\tthis.evaluateSendEmailsButtonVisiblity();\n\t\t} );\n\t}\n\n\tupdateSelectedUsers(){\n\t\t// Create array to save selected users\n\t\tlet selectedUsers   = [];\n\t\tlet selectedLeaders = [];\n\n\t\t// Get all the checkboxes\n\t\tconst $allUserCheckboxes   = this.$elements.enrolledUsersTableDT.find( 'input[type=\"checkbox\"].select-user' );\n\t\tconst $allLeaderCheckboxes = this.$elements.enrolledLeaderTableDT.find( 'input[type=\"checkbox\"].select-user' );\n\n\t\t// Filter all checked and unchecked checkboxes\n\t\tconst allCheckedCheckboxes = {\n\t\t\tusers: $allUserCheckboxes.filter( ':checked' ),\n\t\t\tleaders: $allLeaderCheckboxes.filter( ':checked' ),\n\t\t};\n\n\t\t// Get the selected checkboxes\n\t\t$.each( allCheckedCheckboxes, ( type, $checkedCheckboxes ) => {\n\t\t\t$.each( $checkedCheckboxes, ( index, checkbox ) => {\n\t\t\t\t// Get the checkbox\n\t\t\t\tlet $checkbox = $( checkbox );\n\n\t\t\t\tlet $row = $checkbox.closest( 'tr' );\n\n\t\t\t\tif ('users' === type) {\n\t\t\t\t\tlet status = $row.find( '.status' ).data( 'status' );\n\n\t\t\t\t\tlet progressIsNotStarted;\n\t\t\t\t\tif ('not-started' === status) {\n\t\t\t\t\t\tprogressIsNotStarted = 1;\n\t\t\t\t\t} else if ('not-enrolled' === status) {\n\t\t\t\t\t\tprogressIsNotStarted = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprogressIsNotStarted = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add data to the selectedUsers array\n\t\t\t\t\tselectedUsers.push( {\n\t\t\t\t\t\tuserId: $checkbox.val(),\n\t\t\t\t\t\tprogressIsNotStarted: progressIsNotStarted,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tif ('leaders' === type) {\n\t\t\t\t\t// Add data to the selectedUsers array\n\t\t\t\t\tselectedLeaders.push( {\n\t\t\t\t\t\tuserId: $checkbox.val()\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\t// Update selected property\n\t\tthis.selectedUsers   = selectedUsers;\n\t\tthis.selectedLeaders = selectedLeaders;\n\t}\n\n\tevaluateRemoveUsersButtonVisiblity(){\n\t\t// Create the variable we're going to use to finally\n\t\t// decide if we have to show or not the button\n\t\tlet showRemoveUsersButton = false;\n\n\t\t// Check if there are selected rows\n\t\tif (this.selectedUsers.length > 0) {\n\t\t\t// Check if the option to remove users is enabled\n\t\t\tif (this.data.canRemoveUsers) {\n\t\t\t\t// Check if they can remove users anytime\n\t\t\t\tif (this.data.canRemoveUsersAnytime) {\n\t\t\t\t\t// Set variable to true to show the button later\n\t\t\t\t\tshowRemoveUsersButton = true;\n\t\t\t\t} else {\n\t\t\t\t\t// Check the progress status of the selected users\n\t\t\t\t\t// To do that, first set the main variable to true\n\t\t\t\t\t// We're going to iterate each selected row and if\n\t\t\t\t\t// at least of the checks fail we're going to set\n\t\t\t\t\t// it back to false\n\t\t\t\t\tshowRemoveUsersButton = true;\n\n\t\t\t\t\t// iterate each one\n\t\t\t\t\tthis.selectedUsers.forEach( ( user ) => {\n\t\t\t\t\t\t// Check if the progress is \"Not started\"\n\t\t\t\t\t\tshowRemoveUsersButton = showRemoveUsersButton && user.progressIsNotStarted;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Now show or hide the button\n\t\tif (showRemoveUsersButton) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.removeUsersButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.removeUsersButton.hide();\n\t\t}\n\t}\n\n\tevaluateRemoveLeadersButtonVisiblity(){\n\t\t// Create the variable we're going to use to finally\n\t\t// decide if we have to show or not the button\n\t\tlet showRemoveLeadersButton = false;\n\n\t\t// Check if there are selected rows\n\t\tif (this.selectedLeaders.length > 0) {\n\t\t\tshowRemoveLeadersButton = true;\n\t\t}\n\n\t\t// Now show or hide the button\n\t\tif (showRemoveLeadersButton) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.removeLeadersButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.removeLeadersButton.hide();\n\t\t}\n\n\t\t// Add amount of users being removed to modal\n\t\t$( '.amount-group-leaders' ).text( this.selectedLeaders.length );\n\n\t\tlet groupLeaderIds = [];\n\t\t$.each( this.selectedLeaders, ( index, user ) => {\n\t\t\tgroupLeaderIds.push( user.userId );\n\t\t} );\n\n\t\t// Add all ids to button\n\t\t$( '#removing-group-leaders' ).val( groupLeaderIds.join( \",\" ) );\n\t}\n\n\tevaluateSendEmailsButtonVisiblity(){\n\t\t// For this one, just check if there are selected users\n\t\tif (this.selectedUsers.length > 0) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.sendEmailsButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.sendEmailsButton.hide();\n\t\t}\n\t}\n\n\tupdateDataOnModal(){\n\t\t// Listen when the modal is being opened\n\t\tthis.$elements.container.on( 'modal-open', ( event, modalId, modal ) => {\n\n\t\t\t// Create an array with the list of users\n\t\t\tconst selectedUsers = this.selectedUsers.map( ( user ) => {\n\t\t\t\treturn user.userId;\n\t\t\t} );\n\n\t\t\t// Update number of users selected users\n\t\t\tthis.$elements.numberOfUsers.text( selectedUsers.length );\n\n\n\t\t\t// Check if the modal id the the ID of the \"Send emails\" modal\n\t\t\tif (modalId == '#group-management-enrolled-users-table-send-password-modal') {\n\t\t\t\t// Add the array as a string to a hidden field inside the Send password reset modal\n\t\t\t\tthis.$elements.sendEmailsField.val( JSON.stringify( selectedUsers ) );\n\t\t\t} else if (modalId == '#group-management-remove-user') {\n\n\t\t\t\t// Create a comma separated list with the IDs\n\t\t\t\tconst userIds = selectedUsers.join( ',' );\n\n\t\t\t\t// Add the list of IDs on a hidden field\n\t\t\t\tthis.$elements.removeUsersField.val( userIds );\n\t\t\t}\n\t\t} );\n\t}\n\n\thasEnrolledUsersTable(){\n\t\treturn $( '#group-management-enrolled-users-datatable' ).length == 1;\n\t}\n\n\t/**\n\t * Make the First and Last name fields of the \"Bulk add & Invite users\" required\n\t * Logic: Listen when the user types in one of the \"Email\" fields.\n\t * If the Email is not empty,\n\t * > Make First name and Last name fields required\n\t * \n\t */\n\tfirstLastNamesRequired() {\n\t\t// Check if we have to make them required first\n\t\tif ( ! ulgmGroupManagementShortcode.firstnameLastnameRequired ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Create array with main CSS selectors\n\t\tconst requiredSelectors = {\n\t\t\temailFields: '#group-management-add-users .content-leaders-email input',\n\t\t\tfirstName: '.content-leaders-first-name input',\n\t\t\tlastName: '.content-leaders-last-name input',\n\t\t\trow: '.uo-row',\n\t\t\trowWithData: 'group-management-add-users-row--with-data'\n\t\t}\n\n\t\t// Get all the email fields\n\t\tconst $emailFields = document.querySelectorAll( requiredSelectors.emailFields );\n\n\t\t// Iterate fields\n\t\t$emailFields.forEach( ( $emailField ) => {\n\t\t\t// Listen changed to the field\n\t\t\t// Execute the callback up to once every 200ms\n\t\t\t$emailField.addEventListener(\n\t\t\t\t'input',\n\t\t\t\tdebounce( () => {\n\t\t\t\t\t// Get the field value\n\t\t\t\t\tconst emailValue = $emailField.value;\n\n\t\t\t\t\t// If it's not empty, make First name and Last name required\n\t\t\t\t\t// First, get the row and fields\n\t\t\t\t\tconst $rowElements = {\n\t\t\t\t\t\trow: $emailField.closest( requiredSelectors.row )\n\t\t\t\t\t}\n\n\t\t\t\t\t$rowElements.firstName = $rowElements.row.querySelector( requiredSelectors.firstName );\n\t\t\t\t\t$rowElements.lastName  = $rowElements.row.querySelector( requiredSelectors.lastName );\n\t\t\t\t\t\n\t\t\t\t\t// Check if it's empty\n\t\t\t\t\tif ( isEmpty( emailValue ) ) {\n\t\t\t\t\t\t// Remove the class used to identify rows with data\n\t\t\t\t\t\t$rowElements.row.classList.remove( requiredSelectors.rowWithData );\n\n\t\t\t\t\t\t// Make the fields optional\n\t\t\t\t\t\t$emailField.removeAttribute( 'required' )\n\t\t\t\t\t\t$emailField.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.emailAddress );\n\n\t\t\t\t\t\t$rowElements.firstName.removeAttribute( 'required' )\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.firstName );\n\n\t\t\t\t\t\t$rowElements.lastName.removeAttribute( 'required' )\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.lastName );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Add the class used to identify rows with data\n\t\t\t\t\t\t$rowElements.row.classList.add( requiredSelectors.rowWithData );\n\n\t\t\t\t\t\t// Make the fields optional\n\t\t\t\t\t\t$emailField.setAttribute( 'required', '' );\n\t\t\t\t\t\t$emailField.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.emailAddress } *` );\n\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'required', '' );\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.firstName } *` );\n\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'required', '' );\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.lastName } *` );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}, 200 )\n\t\t\t);\n\t\t} );\n\t}\n}\n\nexport default GroupManagement;\n","import $ from 'jquery';\n\nclass GroupCourseReport {\n\tconstructor(){\n\n\t\t// Check if it's the group course report page\n\t\tif (this.isCourseReport()) {\n\t\t\t// Create course report table\n\t\t\tnew CourseReportTable();\n\t\t}\n\t}\n\n\tisCourseReport(){\n\t\treturn $( '#group-course-report-datatable' ).length === 1;\n\t}\n}\n\nclass CourseReportTable {\n\tconstructor(){\n\n\t\tthis.table = null;\n\n\t\t// Get elements\n\t\tthis.getElements();\n\n\t\t// Listen dropdowns changes\n\t\tthis.filters();\n\n\t\t// Create DataTable\n\t\tthis.createDataTables();\n\n\t\t// Populate table after the group course is selected\n\t\tthis.restPopulateTable();\n\n\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tcourseReport: $( '#group-course-report-datatable' ),\n\t\t\tfilter: {\n\t\t\t\tall: $( '.uo-groups-select-filters select' ),\n\t\t\t\tgroupID: $( '#group-id' ),\n\t\t\t\tcourseID: $( '#uo-group-report-course' ),\n\t\t\t}\n\t\t}\n\t}\n\n\tfilters() {\n\t\t// Clear table when one of the filters change\n\t\tthis.$elements.filter.all.on( 'change', () => {\n\t\t\t// Check if the DataTable is defined\n\t\t\tif ( typeof this.$elements.courseReport === 'undefined' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Try to clear the DataTable\n\t\t\ttry {\n\t\t\t\t// Clear the table\n\t\t\t\tthis.table\n\t\t\t\t\t.clear()\n\t\t\t\t\t.draw()\n\t\t\t\t\t.columns.adjust()\n\t\t\t\t\t.responsive.recalc();\n\t\t\t} catch ( e ) {\n\t\t\t\t// console.warn( e );\n\t\t\t}\n\t\t} );\n\n\t\t// Check if there is only one group, and the dropdown is hidden\n\t\tif ( this.$elements.filter.groupID.hasClass( 'h3-select' ) ) {\n\t\t\t// Get the group ID\n\t\t\tlet groupID = this.$elements.filter.groupID\n\t\t\t\t.find( 'option:not([value=\"0\"]):not([value=\"\"])' )\n\t\t\t\t.last()\n\t\t\t\t.val();\n\n\t\t\t// Select the first option and trigger the change event\n\t\t\tthis.$elements.filter.groupID\n\t\t\t\t.val( groupID )\n\t\t\t\t.trigger( 'change' );\n\n\t\t\twindow.ulgmGroupManagement.restForms.sendRestCall( {\n\t\t\t\tcurrentTarget: this.$elements.filter.groupID\n\t\t\t} );\n\n\t\t\t// Disable the dropdown\t\t\t\n\t\t\tthis.$elements.filter.groupID.prop( 'disabled', 'disabled' );\n\t\t} else {\n\t\t\t// If there is more than one group, listen changes to clear the \"Course\" dropdown on change\n\t\t\tthis.$elements.filter.groupID.on( 'change', () => {\n\t\t\t\t// Clear the \"Course\" group\n\t\t\t\tthis.$elements.filter.courseID\n\t\t\t\t\t// Deselect the dropdown, without triggering the change event\n\t\t\t\t\t.val( '' )\n\t\t\t\t\t// Remove all options\n\t\t\t\t\t.find( 'option' )\n\t\t\t\t\t\t.remove();\n\t\t\t} );\n\t\t}\n\t}\n\n\tcreateDataTables(){\n\n\t\tlet that       = this;\n\t\tlet columnDefs = [];\n\n\t\tlet columnsVisibility = that.$elements.courseReport.data( 'table_columns' )\n\t\tcolumnsVisibility     = columnsVisibility.split( ',' );\n\n\t\tlet columns = [];\n\n\t\t// Check if we have to remove the \"Transcript\" column\n\t\tif ( ! ulgmCourseReportShortcode.shouldAddTranscriptColumn ) {\n\t\t\t// Remove Transcript column\n\t\t\tdelete ulgmRestApiSetup.tableColumns.transcript_page_url;\n\t\t}\n\n\t\t// Define array with the columns that we're going to send to DataTables\n\t\tObject.entries( ulgmRestApiSetup.tableColumns ).forEach( ( [ columnKey, columnName ] ) => {\n\t\t\tcolumns.push( {\n\t\t\t\tdata: columnKey,\n\t\t\t\ttitle: columnName,\n\t\t\t\tvisible: columnsVisibility.includes( columnKey )\n\t\t\t} );\n\t\t} );\n\n\t\t// If we have to add the \"Transcript\" column...\n\t\tif ( ulgmCourseReportShortcode.shouldAddTranscriptColumn ) {\n\t\t\t// Get index of the Transcript column\n\t\t\tconst transcriptColumnIndex = columns.findIndex( column => column.data == 'transcript_page_url' );\n\n\t\t\t// ...define the `render` callback to override the column value\n\t\t\tcolumnDefs = [\n\t\t\t\t{\n\t\t\t\t\t// The `data` parameter refers to the data for the cell (defined by the\n\t\t\t\t\t// `data` option, which defaults to the column being worked with, in\n\t\t\t\t\t// this case `data: 0`.\n\t\t\t\t\trender: function ( data, type, row ){\n\n\t\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\thref=\"${ ulgmCourseReportShortcode.transcriptPageURL }?user-id=${ row.user_id }\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${ ulgmRestApiSetup.localized.details }\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t`;\n\n\t\t\t\t\t},\n\t\t\t\t\ttargets: transcriptColumnIndex\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t\tlet initComplete = ( settings, d ) => {\n\t\t\ttry {\n\t\t\t\tlet table = settings.oInstance.api();\n\t\t\t\tlet _this = this;\n\n\t\t\t\tvar colFilter_container = $( `<div id=\"${settings.sInstance}-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${settings.sInstance}-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${settings.sInstance}-filter-columns-field\" data-label-enable=\"${ulgmRestApiSetup.localized.customizeColumns}\" data-label-disable=\"${ulgmRestApiSetup.localized.hideCustomizeColumns}\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n\n\t\t\t\t// DataTables 2.x uses different property structure\n\t\t\t\t// First try DataTables 2.x structure\n\t\t\t\tif (settings.aoColumns) {\n\t\t\t\t\tjQuery.each(settings.aoColumns, function (key, value) {\n\t\t\t\t\t\tif (key > 0) {\n\t\t\t\t\t\t\tvar title = value.sTitle;\n\t\t\t\t\t\t\tvar visible = value.bVisible;\n\t\t\t\t\t\t\tcolFilter_container.find('.dataTables-filter-columns__fields').append(_this.addColumnCourseCheckbox(title, key, visible, table));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} \n\t\t\t\t// Fallback to saved state if available\n\t\t\t\telse if (settings.oSavedState && settings.oSavedState.columns) {\n\t\t\t\t\tjQuery.each(settings.oSavedState.columns, function (key, value) {\n\t\t\t\t\t\tif (key > 0) {\n\t\t\t\t\t\t\t// Find the column title from the table header\n\t\t\t\t\t\t\tvar title = jQuery('#group-course-report-datatable th').eq(key).text();\n\t\t\t\t\t\t\tvar visible = value.visible;\n\t\t\t\t\t\t\tcolFilter_container.find('.dataTables-filter-columns__fields').append(_this.addColumnCourseCheckbox(title, key, visible, table));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// As a last resort, get columns directly from API\n\t\t\t\telse if (table) {\n\t\t\t\t\tvar columns = table.settings().init().columns;\n\t\t\t\t\tjQuery.each(columns, function (key, value) {\n\t\t\t\t\t\tif (key > 0) {\n\t\t\t\t\t\t\tvar title = value.title;\n\t\t\t\t\t\t\tvar visible = value.visible !== false;\n\t\t\t\t\t\t\tcolFilter_container.find('.dataTables-filter-columns__fields').append(_this.addColumnCourseCheckbox(title, key, visible, table));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Insert after search box\n\t\t\t\tvar $searchBox = jQuery('.dt-search');\n\t\t\t\tif ($searchBox.length > 0 && colFilter_container.length > 0) {\n\t\t\t\t\tcolFilter_container.insertAfter($searchBox);\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback - insert at the end of the datatable header\n\t\t\t\t\tcolFilter_container.appendTo('.uo-groups-datatable-header');\n\t\t\t\t}\n\n\t\t\t\t// Ensure column visibility toggles are working with DataTables 2.x\n\t\t\t\tjQuery('.dataTables-filter-columns input[type=\"checkbox\"]').on('change', function() {\n\t\t\t\t\tvar columnIndex = jQuery(this).attr('id').replace('dt_', '');\n\t\t\t\t\tvar column = table.column(columnIndex);\n\t\t\t\t\tvar isChecked = jQuery(this).is(':checked');\n\t\t\t\t\t\n\t\t\t\t\tcolumn.visible(isChecked);\n\t\t\t\t});\n\n\t\t\t\t// Add a class to make the customize columns UI visible\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tjQuery('.dataTables-filter-columns').addClass('dt-initialized');\n\t\t\t\t}, 100);\n\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error in initComplete:', error.message);\n\t\t\t}\n\t\t};\n\n\t\tvar buttonCommon = {\n\t\t\texportOptions: {\n\t\t\t\tcolumns: ( id, data, node ) => {\n                    return this.table.column( id ).visible();\n                },\n\n\t\t\t\tformat: {\n\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tfilename: function () {\n\t\t\t\tlet courseNamePrefix = 'Groups-Course-Report';\n\t\t\t\tlet $courseId = $('#uo-group-report-course').val();\n\t\t\t\tlet courseName = '-' + $(\"#uo-group-report-course option:selected\").text();\n\t\t\t\tlet name = '';\n\t\t\t\tif (typeof that.getUrlParameter('user_id') !== 'undefined') {\n\n\t\t\t\t\tname = that.$elements.courseReport.data('user_name');\n\n\t\t\t\t\tif (isNaN(name)) {\n\t\t\t\t\t\tname = '-for-user-' + name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = '-for-user-id-' + name;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn courseNamePrefix + name;\n\n\t\t\t\t} else if ('0' === $courseId) {\n\t\t\t\t\treturn courseNamePrefix;\n\t\t\t\t}\n\n\t\t\t\treturn courseNamePrefix + courseName;\n\t\t\t}\n\t\t};\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet tableOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmCourseReportShortcode.table.orderBy );\n\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( tableOrderByIndex === -1 ) {\n\t\t\ttableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date_completed' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( tableOrderByIndex !== -1 ) {\n\t\t\ttableOrder = [\n\t\t\t\t[\n\t\t\t\t\ttableOrderByIndex, // The ID of the column used to sort, defaults to `date_completed`\n\t\t\t\t\tulgmCourseReportShortcode.table.order, // Designates the ascending or descending order of the 'orderby' parameter, defaults to `desc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\tlet exportButtons = [];\n\t\tif ( ulgmCourseReportShortcode.showCSVExportButton ) {\n\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\textend: 'csv',\n\t\t\t\ttext: ulgmRestApiSetup.i18n.exportCSV,\n\t\t\t}) );\n\t\t}\n\t\tif ( ulgmCourseReportShortcode.showExcelExportButton ) {\n\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\textend: 'excelHtml5',\n\t\t\t\ttext: ulgmRestApiSetup.i18n.exportExcel,\n\t\t\t}) );\n\t\t}\n\n\t\t// Check for existing DataTable and properly destroy it\n\t\tif ($.fn.DataTable.isDataTable('#group-course-report-datatable')) {\n\t\t\t$('#group-course-report-datatable').DataTable().destroy();\n\t\t}\n\n\t\t// User table\n\t\ttry {\n\t\t\t// Remove problematic properties for DataTables 2.x\n\t\t\tif (tableVars && tableVars.headerRows !== undefined) {\n\t\t\t\tdelete tableVars.headerRows;\n\t\t\t}\n\n\t\t\t// Add ColReorder to the configuration\n\t\t\tconst tableVars = {\n\t\t\t\tstateSave: true,\n\t\t\t\tinitComplete: initComplete,\n\t\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\t\tbuttons: exportButtons,\n\t\t\t\torder: tableOrder,\n\t\t\t\tcolumns: columns,\n\t\t\t\tcolumnDefs: columnDefs,\n\t\t\t\tcolReorder: {\n\t\t\t\t\tenable: true,\n\t\t\t\t\tfixedColumnsLeft: 1  // Keep checkbox column fixed\n\t\t\t\t},\n\t\t\t\tlanguage: {\n\t\t\t\t\tprocessing: ulgmRestApiSetup.localized.processing,\n\t\t\t\t\tsearch: '_INPUT_',\n\t\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.localized.searchPlaceholder,\n\t\t\t\t\tlengthMenu: ulgmRestApiSetup.localized.lengthMenu,\n\t\t\t\t\tinfo: ulgmRestApiSetup.localized.info,\n\t\t\t\t\tinfoEmpty: ulgmRestApiSetup.localized.infoEmpty,\n\t\t\t\t\tinfoFiltered: ulgmRestApiSetup.localized.infoFiltered,\n\t\t\t\t\tinfoPostFix: '',\n\t\t\t\t\tloadingRecords: ulgmRestApiSetup.localized.loadingRecords,\n\t\t\t\t\tzeroRecords: ulgmRestApiSetup.localized.zeroRecords,\n\t\t\t\t\temptyTable: ulgmRestApiSetup.localized.emptyTable,\n\t\t\t\t\tpaginate: {\n\t\t\t\t\t\tfirst: ulgmRestApiSetup.localized.paginate.first,\n\t\t\t\t\t\tprevious: ulgmRestApiSetup.localized.paginate.previous,\n\t\t\t\t\t\tnext: ulgmRestApiSetup.localized.paginate.next,\n\t\t\t\t\t\tlast: ulgmRestApiSetup.localized.paginate.last\n\t\t\t\t\t},\n\t\t\t\t\taria: {\n\t\t\t\t\t\tsortAscending: ulgmRestApiSetup.localized.sortAscending,\n\t\t\t\t\t\tsortDescending: ulgmRestApiSetup.localized.sortDescending\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.table = this.$elements.courseReport.DataTable(tableVars);\n\n\t\t\t// Verify ColReorder is available\n\t\t\tif (!jQuery.fn.dataTable.ColReorder) {\n\t\t\t\tconsole.warn('ColReorder extension not available despite being configured');\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconsole.error('Error initializing DataTable:', error.message);\n\t\t\t\n\t\t\t// Try with minimal configuration\n\t\t\ttry {\n\t\t\t\tthis.table = this.$elements.courseReport.DataTable({\n\t\t\t\t\tresponsive: true,\n\t\t\t\t\tcolumns: columns\n\t\t\t\t});\n\t\t\t} catch (fallbackError) {\n\t\t\t\tconsole.error('Fallback initialization failed:', fallbackError.message);\n\t\t\t}\n\t\t}\n\t}\n\n\taddColumnCourseCheckbox( label, column_key, is_visible, table ){\n\n\t\tvar checkbox = jQuery( '<input />', {\n\t\t\ttype: 'checkbox',\n\t\t\tid: 'dt_' + column_key,\n\t\t\tvalue: column_key,\n\t\t\tchecked: is_visible\n\t\t} );\n\n\t\tcheckbox.on( 'change', function ( e ){\n\t\t\t// Get the column API object\n\t\t\tvar current_check = jQuery( this ).attr( 'value' );\n\t\t\tvar is_checked    = jQuery( this ).is( ':checked' );\n\n\t\t\ttable.columns().every( function ( index ){\n\n\t\t\t\tvar column = table.column( index );\n\n\t\t\t\t// ... do something with data(), or this.nodes(), etc\n\n\t\t\t\tif (index == current_check) {\n\t\t\t\t\tif (is_checked) {\n\t\t\t\t\t\t// Toggle the visibility\n\t\t\t\t\t\tcolumn.visible( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn.visible( false );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tvar $label = jQuery( '<label/>' ).append( checkbox ).append( label );\n\t\treturn $label;\n\t}\n\n\trestPopulateTable(){\n\n\t\tlet that                                       = this;\n\t\twindow.ulgmGroupManagement.populateReportTable = function ( data ){\n\n\t\t\tlet courseReport = that.$elements.courseReport.DataTable();\n\n\t\t\tcourseReport.clear().draw();\n\t\t\tcourseReport.rows.add( data.user_course_data ); // Add new data\n\t\t\tcourseReport.columns.adjust().draw(); // Redraw the DataTable\n\t\t\tcourseReport.responsive.recalc();\n\n\t\t\tvar items = window.ulgmGroupManagement.reportingTemplating.items = data.user_course_data;\n\n\t\t\tif (0 === items.length) {\n\t\t\t\t$( '#test' ).html( '<div class=\"uo-row uo-table-content uo-tbl-item body-row\"><div class=\"uo-table-no-results\">There are no records to display.</div></div>' );\n\t\t\t} else {\n\t\t\t\t$( '#test' ).closest( '.uo-groups-rest-result' ).show();\n\t\t\t\twindow.ulgmGroupManagement.reportingTemplating.setItems( items );\n\t\t\t}\n\t\t};\n\t}\n\n\tgetUrlParameter( sParam ){\n\t\tlet sPageURL      = window.location.search.substring( 1 ),\n\t\t\tsURLVariables = sPageURL.split( '&' ),\n\t\t\tsParameterName,\n\t\t\ti;\n\n\t\tfor (i = 0; i < sURLVariables.length; i++) {\n\t\t\tsParameterName = sURLVariables[i].split( '=' );\n\n\t\t\tif (sParameterName[0] === sParam) {\n\t\t\t\treturn sParameterName[1] === undefined ? true : decodeURIComponent( sParameterName[1] );\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default GroupCourseReport;\n","const ElementQueries = require( 'css-element-queries/src/ElementQueries' );\n\nimport $ from 'jquery';\n\nimport {\n\tisDefined,\n\tisEmpty\n} from './utilities.js';\n\nclass CourseDashboard {\n\tconstructor(){\n\t\t// Check if the required container is defined\n\t\tif ( this.hasDashboard() ){\n\t\t\t// Init ResizeSensor\n\t\t\tElementQueries.init();\n\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Define global settings\n\t\t\tthis.defineSettings();\n\t\t\t\n\t\t\t// Create courses using the DOM elements\n\t\t\tthis.createCourses();\n\n\t\t\t// Add function to expand and collapse all containers\n\t\t\t// this.slideAll();\n\n\t\t\t// Listen filters\n\t\t\tthis.filters();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\tfilters: {\n\t\t\t\tform:    $( '#ulg-manage-progress-filters-form' ),\n\t\t\t\tselects: $( '#ulg-manage-progress-filters-form select' )\n\t\t\t}\n\t\t}\n\t}\n\n\tdefineSettings(){\n\t\t// Create settings\n\t\tthis.settings = {\n\t\t\tslideToggleDuration: 300\n\t\t}\n\t}\n\n\tcreateCourses(){\n\t\t// Get all courses\n\t\tconst $courses = $( '.ulg-manage-progress-course' );\n\n\t\t// Create Courses\n\t\t$.each( $courses, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Course( $( $element ), this.settings );\n\t\t});\n\t}\n\n\thasDashboard(){\n\t\treturn $( '.ulg-manage-progress-courses' ).length > 0;\n\t}\n\n\tslideAll(){\n\t\t// Listen to the clicks on the buttons\n\t\t$( '.ulg-manage-progress .ulg-manage-progress-btn--expand-all' ).on( 'click', () => {\n\t\t\texpandAll();\n\t\t});\n\n\t\t$( '.ulg-manage-progress .ulg-manage-progress-btn--collapse-all' ).on( 'click', () => {\n\t\t\tcollapseAll();\n\t\t});\n\n\t\tconst expandAll = () => {\n\t\t\t// Get all the collapsed containers\n\t\t\tconst collapsedContainers = {\n\t\t\t\tcourses: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-course--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-course__toggle-btn'\n\t\t\t\t},\n\t\t\t\tlessons: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-lesson--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-lesson__toggle-btn'\n\t\t\t\t},\n\t\t\t\ttopic: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-topic--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-topic__toggle-btn'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.each( collapsedContainers, ( index, elementType ) => {\n\t\t\t\t// Get containers\n\t\t\t\tconst $containers = $( elementType.container );\n\n\t\t\t\t// Iterate each container\n\t\t\t\t$.each( $containers, ( index, container ) => {\n\t\t\t\t\t// Get container element\n\t\t\t\t\tconst $container = $( container );\n\n\t\t\t\t\t// Get toggle button\n\t\t\t\t\tconst $toggleButton = $container.find( elementType.toggle );\n\n\t\t\t\t\t// Trigger click\n\t\t\t\t\t$toggleButton.trigger( 'click' );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tconst collapseAll = () => {\n\t\t\t// Get all the expanded containers\n\t\t\tconst expandedContainers = {\n\t\t\t\tcourses: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-course--expanded',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-course__toggle-btn'\n\t\t\t\t},\n\t\t\t\tlessons: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-lesson--expanded',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-lesson__toggle-btn'\n\t\t\t\t},\n\t\t\t\ttopic: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-topic--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-topic__toggle-btn'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.each( expandedContainers, ( index, elementType ) => {\n\t\t\t\t// Get containers\n\t\t\t\tconst $containers = $( elementType.container );\n\n\t\t\t\t// Iterate each container\n\t\t\t\t$.each( $containers, ( index, container ) => {\n\t\t\t\t\t// Get container element\n\t\t\t\t\tconst $container = $( container );\n\n\t\t\t\t\t// Get toggle button\n\t\t\t\t\tconst $toggleButton = $container.find( elementType.toggle );\n\n\t\t\t\t\t// Trigger click\n\t\t\t\t\t$toggleButton.trigger( 'click' );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tfilters(){\n\t\t// Listen to changes\n\t\tthis.$elements.filters.selects.on( 'change', () => {\n\t\t\t// Submit form\n\t\t\tthis.$elements.filters.form.trigger( 'submit' );\n\t\t});\n\t}\n}\n\nclass Course {\n\tconstructor( $container, settings ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get important elements from the container\n\t\tthis.getElements( $container );\n\n\t\t// Get course data\n\t\tthis.getCourseData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleCourseContent();\n\n\t\t// Create lessons using the DOM elements\n\t\tthis.createLessons();\n\n\t\t// Create quizzes using the DOM elements\n\t\t// this.createQuizzes();\n\t}\n\n\tgetCourseData(){\n\t\tthis.courseData = {\n\t\t\tcourseId:       this.$elements.container.data( 'course-id' ),\n\t\t\tstatus:         this.$elements.container.data( 'status' ),\n\t\t\thasLessons:     !! parseInt( this.$elements.container.data( 'has-lessons' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) ),\n\t\t\thasCertificate: !! parseInt( this.$elements.container.data( 'has-certificate' ) ),\n\t\t}\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-course--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-course--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-course--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-course--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-course__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-course__content' )\n\t\t}\n\t}\n\n\ttoggleCourseContent(){\n\t\t// Check if the course has lessons or quizzes\n\t\tif ( this.courseData.hasLessons || this.courseData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateLessons(){\n\t\t// Get all lessons\n\t\tconst $lessons = this.$elements.container.find( '.ulg-manage-progress-lesson' );\n\n\t\t// Create Courses\n\t\t$.each( $lessons, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Lesson( $( $element ), this.dashboardSettings, this.courseData );\n\t\t});\n\t}\n\n\tcreateQuizzes(){\n\t\t// Get all quizzes containers\n\t\tconst $quizzesContainers = this.$elements.container.find( '.ulg-manage-progress-course__quizzes .ulg-manage-progress-quizzes' );\n\n\t\t// Create Quizzes\n\t\t$.each( $quizzesContainers, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Quizzes( $( $element ), this.dashboardSettings, this.courseData );\n\t\t});\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nclass Lesson {\n\tconstructor( $container, settings, courseData ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\t\t// Save courseData\n\t\tthis.courseData = courseData;\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get important elements from the container\n\t\tthis.getElements( $container );\n\n\t\t// Get lesson data\n\t\tthis.getLessonData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleLessonContent();\n\n\t\t// Create topics using the DOM elements\n\t\tthis.createTopics();\n\n\t\t// Create quizzes using the DOM elements\n\t\t// this.createQuizzes();\n\t}\n\n\tgetLessonData(){\n\t\tthis.lessonData = {\n\t\t\tcourse:         this.courseData,\n\t\t\tlessonId:       this.$elements.container.data( 'lesson-id' ),\n\t\t\tavailableOn:    ! isEmpty( this.$elements.container.data( 'available-on' ) ) ? parseInt( this.$elements.container.data( 'available-on' ) ) : null,\n\t\t\tisCompleted:    !! parseInt( this.$elements.container.data( 'is-completed' ) ),\n\t\t\tisAvailable:    !! parseInt( this.$elements.container.data( 'is-available' ) ),\n\t\t\thasTopics:      !! parseInt( this.$elements.container.data( 'has-topics' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) ),\n\t\t}\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-lesson--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-lesson--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-lesson--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-lesson--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-lesson__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-lesson__content' )\n\t\t}\n\t}\n\n\ttoggleLessonContent(){\n\t\t// Check if the lesson has topics or quizzes\n\t\tif ( this.lessonData.hasTopics || this.lessonData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateTopics(){\n\t\t// Get all topics\n\t\tconst $topics = this.$elements.container.find( '.ulg-manage-progress-topic' );\n\n\t\t// Create Courses\n\t\t$.each( $topics, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Topic( $( $element ), this.dashboardSettings, this.courseData, this.lessonData );\n\t\t});\n\t}\n\n\tcreateQuizzes(){\n\t\t// Get all quizzes containers\n\t\tconst $quizzesContainers = this.$elements.container.find( '.ulg-manage-progress-lesson__quizzes .ulg-manage-progress-quizzes' );\n\n\t\t// Create Quizzes\n\t\t$.each( $quizzesContainers, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Quizzes( $( $element ), this.dashboardSettings, this.courseData, this.lessonData );\n\t\t});\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nclass Topic {\n\tconstructor( $container, settings, courseData, lessonData ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\t\t// Save course data\n\t\tthis.courseData = courseData;\n\t\t// Save lesson data\n\t\tthis.lessonData = lessonData;\n\n\t\t// Get elements\n\t\tthis.getElements( $container );\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get lesson data\n\t\tthis.getTopicData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleTopicContent();\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-topic__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-topic__content' )\n\t\t}\n\t}\n\n\tgetTopicData(){\n\t\tthis.topicData = {\n\t\t\tcourse:         this.courseData,\n\t\t\tlesson:         this.lessonData,\n\t\t\ttopicId:        this.$elements.container.data( 'topic-id' ),\n\t\t\tisCompleted:    !! parseInt( this.$elements.container.data( 'is-completed' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) )\n\t\t}\n\n\t\tdelete this.topicData.lesson.course;\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-topic--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-topic--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-topic--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-topic--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\ttoggleTopicContent(){\n\t\t// Check if the lesson has topics or quizzes\n\t\tif ( this.topicData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nexport default CourseDashboard;","let $ = jQuery;\n\nimport {\n\trestCall,\n\tisEmpty,\n\tisDefined\n} from './utilities.js';\n\nclass ManageProgress {\n\tconstructor(){\n\t\t// Check if there is a \"manage progress\" container\n\t\tif ( this.isManageProgress() ){\n\t\t\t// Check if the user can manage this progress\n\t\t\tif ( this.canManageProgress() ){\n\t\t\t\t// Set settings\n\t\t\t\tthis.setSettings();\n\n\t\t\t\t// Call to the functions that will add event listeners to the checkboxes\n\t\t\t\tthis.listenProgressChangesOnCourses();\n\t\t\t}\n\t\t}\n\t}\n\tsetSettings(){\n\t\tthis.settings = {}\n\t}\n\tlistenProgressChangesOnCourses(){\n\t\t// Get all courses\n\t\tconst $courses = $( '.ulg-manage-progress-course' );\n\n\t\t// Create Courses\n\t\t$.each( $courses, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Course( $( $element ), this.settings );\n\t\t} );\n\t}\n\n\tisManageProgress(){\n\t\treturn $( '.ulg-manage-progress--manage-progress' ).length > 0 && typeof ULGM_ManageProgress !== 'undefined';\n\t}\n\n\tcanManageProgress(){\n\t\treturn !! parseInt( ULGM_ManageProgress.canManageProgress );\n\t}\n}\nclass Course {\n\tconstructor( $course ){\n\n\t\t// Get elements\n\t\tthis.getElements( $course );\n\n\t\t// Get course data\n\t\tthis.getCourseData();\n\n\t\t// Create children\n\t\tthis.createChildren();\n\n\t\t// Listen clicks on the checkboxes\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $course ){\n\t\tthis.$elements = {\n\t\t\tcourse: $course,\n\t\t\tactions: $course.find( '.ulg-manage-progress-course__progress-actions' ),\n\t\t\tcheckbox: $course.find( '.ulg-manage-progress-course__progress-action-checkbox' ),\n\t\t\tcancel: $course.find( '.ulg-manage-progress-course__progress-action-cancel' ),\n\t\t\tprogress: {\n\t\t\t\tnumber: $course.find( '.ulg-manage-progress-course__progress-percentage span' ),\n\t\t\t\tbar: $course.find( '.ulg-manage-progress-course__progress-bar' )\n\t\t\t},\n\t\t\tlessons: $course.find( '.ulg-manage-progress-lesson' ),\n\t\t\tquizzes: $course.find( '.ulg-manage-progress-quiz' ),\n\t\t\ttopics: $course.find( '.ulg-manage-progress-topic' ),\n\t\t\trightContainer: $course.find( '.ulg-manage-progress-course__right' )\n\t\t}\n\t}\n\n\n\tgetCourseData(){\n\t\tthis.courseData = {\n\t\t\tcourseId: this.$elements.course.data( 'course-id' ),\n\t\t\tstatus: this.$elements.course.data( 'status' ),\n\t\t\thasLessons: !!parseInt( this.$elements.course.data( 'has-lessons' ) ),\n\t\t\thasQuizzes: !!parseInt( this.$elements.course.data( 'has-quizzes' ) ),\n\t\t\thasCertificate: !!parseInt( this.$elements.course.data( 'has-certificate' ) ),\n\t\t}\n\n\t\t// Parse status\n\t\tthis.courseData.status = this.courseData.status.replace( '_', '-' );\n\t}\n\n\tcreateChildren(){\n\t\t// Create empty arrays\n\t\tthis.courseData.children = {\n\t\t\tlessons: [],\n\t\t\tquizzes: [],\n\t\t\ttopics: []\n\t\t}\n\n\t\t// Create lessons\n\t\t$.each( this.$elements.lessons, ( index, lesson ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $lesson = $( lesson );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.lessons.push( new Lesson( this, $lesson ) );\n\t\t} );\n\n\t\t// Create quizzes\n\t\t$.each( this.$elements.quizzes, ( index, quiz ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $quiz = $( quiz );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.quizzes.push( new Quiz( this, $quiz ) );\n\t\t} );\n\n\t\t// Create topics\n\t\t$.each( this.$elements.topics, ( index, topic ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $topic = $( topic );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.topics.push( new Topic( this, $topic ) );\n\t\t} );\n\n\t\t// Create object with all the children\n\t\tthis.courseData.children.all = [].concat( this.courseData.children.lessons, this.courseData.children.topics, this.courseData.children.quizzes )\n\t}\n\n\tsetProgress( percentage ){\n\t\t// Set new progress\n\t\tthis.$elements.progress.number.text( percentage );\n\t\tthis.$elements.progress.bar.css( {width: percentage} );\n\n\t\t// Set correct status class. First, remove all of them\n\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--not-started ulg-manage-progress-course--in-progress ulg-manage-progress-course--completed' );\n\n\t\t// Change status of the course\n\t\tif (percentage == 100) {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'completed';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--completed' );\n\t\t} else if (percentage == 0) {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'not-started';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--not-started' );\n\t\t} else {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'in-progress';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--in-progress' );\n\t\t}\n\t}\n\n\tsetCertificate( certificateUrl ){\n\t\t// Find the container we have to remove\n\t\tthis.$elements.rightContainer.find( '.ulg-manage-progress-course__action' ).remove();\n\n\t\t// Check if we have to add the certificate button again\n\t\tif (!isEmpty( certificateUrl )) {\n\t\t\t// Create the \"Certificate\" button\n\t\t\tconst $certificateButton = $( `\n\t\t\t\t<div class=\"ulg-manage-progress-course__action\">\n\t\t\t\t\t<a href=\"${certificateUrl}\" target=\"_blank\" class=\"ulg-manage-progress-btn\">\n\t\t\t\t\t\t${ULGM_ManageProgress.i18n.certificate}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to the container\n\t\t\tthis.$elements.rightContainer.prepend( $certificateButton );\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif (this.confirmationVisible) {\n\t\t\t\t// Do request call\n\t\t\t\tlet wantsToCompleteCourse = 0;\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t\t// Check the current status\n\t\t\t\tif (['not-started', 'in-progress'].includes( this.courseData.status )) {\n\t\t\t\t\twantsToCompleteCourse = 1;\n\t\t\t\t}\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tlessons[lesson.lessonData.lessonId] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteCourse;\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteCourse;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.courseData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--loading' );\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Add certificate\n\t\t\t\t\t\t\tthis.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tcompleteCourseItems( completedChildren ){\n\t\t// Change the array to an object where the keys\n\t\t// are the IDs\n\t\tlet completedChildrenObj = {}\n\n\t\t// Check if the completedChildren is empty\n\t\tcompletedChildren = Object.keys( completedChildren ).length == 0 ? [] : completedChildren;\n\n\t\t// Iterate all children\n\t\tcompletedChildren.forEach( ( element ) => {\n\t\t\t// Add children to the object\n\t\t\tcompletedChildrenObj[element.ID] = element;\n\t\t} );\n\n\t\t// Iterate each children\n\t\t$.each( this.courseData.children.all, function ( index, child ){\n\t\t\t// Check if the current children is included in the list of\n\t\t\t// completed children\n\t\t\tlet shouldBeCompleted = isDefined( completedChildrenObj[child.getTheId()] );\n\n\t\t\t// Mark all the children as not completed\n\t\t\tchild.markAsNotComplete( completedChildrenObj[child.getTheId()] );\n\n\t\t\t// And then check if we have to completed it\n\t\t\tif (shouldBeCompleted) {\n\t\t\t\t// Complete\n\t\t\t\tchild.markAsComplete( completedChildrenObj[child.getTheId()] );\n\t\t\t}\n\t\t} );\n\t}\n}\n\nclass Lesson {\n\tconstructor( Course, $lesson ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $lesson );\n\n\t\t// Get lesson data\n\t\tthis.getLessonData();\n\n\t\t// Listen to checkbox clicks\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $lesson ){\n\t\tthis.$elements = {\n\t\t\tcourse: $lesson.closest( '.ulg-manage-progress-course' ),\n\t\t\tlesson: $lesson,\n\t\t\tactions: $lesson.find( '.ulg-manage-progress-lesson__progress-actions' ),\n\t\t\tcheckbox: $lesson.find( '.ulg-manage-progress-lesson__progress-action-checkbox' ),\n\t\t\tcancel: $lesson.find( '.ulg-manage-progress-lesson__progress-action-cancel' ),\n\t\t}\n\t}\n\n\tgetLessonData(){\n\t\tthis.lessonData = {\n\t\t\tlessonId: this.$elements.lesson.data( 'lesson-id' ),\n\t\t\tcourseId: this.$elements.lesson.data( 'course-id' ),\n\t\t\tisCompleted: this.$elements.lesson.data( 'is-completed' ),\n\t\t\thasTopics: !!parseInt( this.$elements.lesson.data( 'has-topics' ) ),\n\t\t\thasQuizzes: !!parseInt( this.$elements.lesson.data( 'has-quizzes' ) ),\n\t\t}\n\n\t\t// Check if it has children\n\t\tthis.lessonData.hasChildren = this.lessonData.hasTopics || this.lessonData.hasQuizzes;\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif (!this.lessonData.hasChildren || this.confirmationVisible) {\n\t\t\t\t// Do request call\n\n\t\t\t\t// Check if it wants to complete or not the lesson\n\t\t\t\t// If the lesson is not completed then the user wants to complete it, if\n\t\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\t\tlet wantsToCompleteLesson = Number( !this.lessonData.isCompleted );\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tif (lesson.lessonData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\tlessons[lesson.lessonData.lessonId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\tif (quiz.quizData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (topic.topicData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tif (topic.topicData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteLesson;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t\t// console.log(\n\t\t\t\t// \t{\n\t\t\t\t// \t\tlessons: lessons,\n\t\t\t\t// \t\ttopics: topics,\n\t\t\t\t// \t\tquizzes: quizzes,\n\n\t\t\t\t// \t}\n\t\t\t\t// );\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.lessonData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--loading' );\n\n\t\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\t\tthis.lessonData.isCompleted = wantsToCompleteLesson;\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tmarkAsComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--not-completed' );\n\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.lesson.data( 'is-completed', true );\n\t\tthis.lessonData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--completed' );\n\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.lesson.data( 'is-completed', false );\n\t\tthis.lessonData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.lessonData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.lessonData.lessonId;\n\t}\n}\n\nclass Topic {\n\tconstructor( Course, $topic ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $topic );\n\n\t\t// Get topic data\n\t\tthis.getTopicData();\n\n\t\t// Listen to checkbox clicks\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $topic ){\n\t\tthis.$elements = {\n\t\t\tcourse: $topic.closest( '.ulg-manage-progress-course' ),\n\t\t\tlesson: $topic.closest( '.ulg-manage-progress-lesson' ),\n\t\t\ttopic: $topic,\n\t\t\tactions: $topic.find( '.ulg-manage-progress-topic__progress-actions' ),\n\t\t\tcheckbox: $topic.find( '.ulg-manage-progress-topic__progress-action-checkbox' ),\n\t\t\tcancel: $topic.find( '.ulg-manage-progress-topic__progress-action-cancel' ),\n\t\t}\n\t}\n\n\tgetTopicData(){\n\t\tthis.topicData = {\n\t\t\ttopicId:     this.$elements.topic.data( 'topic-id' ),\n\t\t\tlessonId:    this.$elements.topic.data( 'lesson-id' ),\n\t\t\tcourseId:    this.$elements.topic.data( 'course-id' ),\n\t\t\tisCompleted: this.$elements.topic.data( 'is-completed' ),\n\t\t\thasQuizzes:  this.$elements.topic.data( 'has-quizzes' ),\n\t\t\thasChildren: this.$elements.topic.data( 'has-quizzes' ),\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif ( ! this.topicData.hasChildren || this.confirmationVisible ){\n\t\t\t\t// Do request call\n\n\t\t\t\t// Check if it wants to complete or not the topic\n\t\t\t\t// If the topic is not completed then the user wants to complete it, if\n\t\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\t\tlet wantsToCompleteTopic = Number( ! this.topicData.isCompleted );\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\tif ( quiz.quizData.topicId === this.topicData.topicId ){\n\t\t\t\t\t\tquizzes[ quiz.quizData.quizId ] = wantsToCompleteTopic;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (topic.topicData.topicId === this.topicData.topicId) {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteTopic;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tif (topic.topicData.topicId === this.topicData.topicId) {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteTopic;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.topicData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--loading' );\n\n\t\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\t\tthis.topicData.isCompleted = wantsToCompleteTopic;\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif ( response.success ){\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tmarkAsComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--not-completed' );\n\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.topic.data( 'is-completed', true );\n\t\tthis.topicData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--completed' );\n\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.topic.data( 'is-completed', false );\n\t\tthis.topicData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.topicData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.topicData.topicId;\n\t}\n}\n\nclass Quiz {\n\tconstructor( Course, $quiz ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $quiz );\n\n\t\t// Get quiz data\n\t\tthis.getQuizData();\n\n\t\t// Listen to checkbox changes\n\t\tthis.listenCheckboxChanges();\n\t}\n\n\tgetElements( $quiz ){\n\t\tthis.$elements = {\n\t\t\tcourse: $quiz.closest( '.ulg-manage-progress-course' ),\n\t\t\tquiz: $quiz,\n\t\t\tactions: $quiz.find( '.ulg-manage-progress-quiz__progress-actions' ),\n\t\t\tcheckbox: $quiz.find( '.ulg-manage-progress-quiz__progress-action-checkbox' ),\n\t\t\tcancel: $quiz.find( '.ulg-manage-progress-quiz__progress-action-cancel' ),\n\t\t\trightContainer: $quiz.find( '.ulg-manage-progress-quiz__right' )\n\t\t}\n\t}\n\n\tgetQuizData(){\n\t\tthis.quizData = {\n\t\t\tquizId: this.$elements.quiz.data( 'quiz-id' ),\n\t\t\tlessonId: this.$elements.quiz.data( 'lesson-id' ),\n\t\t\tcourseId: this.$elements.quiz.data( 'course-id' ),\n\t\t\ttopicId: this.$elements.quiz.data( 'topic-id' ),\n\t\t\tisCompleted: this.$elements.quiz.data( 'is-completed' ),\n\t\t}\n\t}\n\n\tsetCertificate( certificateUrl = null ){\n\t\t// Find the container we have to remove\n\t\tthis.$elements.rightContainer.find( '.ulg-manage-progress-quiz__action' ).remove();\n\n\t\t// Check if we have to add the certificate button again\n\t\tif (!isEmpty( certificateUrl )) {\n\t\t\t// Create the \"Certificate\" button\n\t\t\tconst $certificateButton = $( `\n\t\t\t\t<div class=\"ulg-manage-progress-quiz__action\">\n\t\t\t\t\t<a href=\"${certificateUrl}\" target=\"_blank\" class=\"ulg-manage-progress-btn\">\n\t\t\t\t\t\t${ULGM_ManageProgress.i18n.certificate}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to the container\n\t\t\tthis.$elements.rightContainer.append( $certificateButton );\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\n\t\t\t// Determine action.\n\t\t\tconst $checkbox = $( event.currentTarget );\n\t\t\tconst dataAction = $checkbox.data( 'action' );\n\n\t\t\t// Check if it wants to complete or not the quiz\n\t\t\t// If the quiz is not completed then the user wants to complete it, if\n\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\tlet wantsToCompleteQuiz = Number( ! this.quizData.isCompleted );\n\t\t\tlet resetQuizAttempts   = 0;\n\n\t\t\t// Check if we are unchecking the checkbox.\n\t\t\tif( 'quiz-maybe-confirm' === dataAction ){\n\t\t\t\tif ( ! wantsToCompleteQuiz ) {\n\t\t\t\t\tthis.confirmChanges();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Check if reset quiz attempts.\n\t\t\t\tif ( 'quiz-reset-yes' === dataAction ) {\n\t\t\t\t\tresetQuizAttempts = this.quizData.quizId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do request call\n\n\t\t\t// Add loading class to the actions container\n\t\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--loading' );\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-quiz__progress-actions--need-to-confirm' );\n\n\t\t\tlet lessons = {};\n\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t} );\n\n\t\t\tlet topics  = {};\n\t\t\tlet quizzes = {};\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\tif (quiz.quizData.quizId === this.quizData.quizId) {\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteQuiz;\n\t\t\t\t} else {\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t}\n\n\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t} );\n\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t}\n\n\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\n\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t}\n\n\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\tif (topic.topicData.topicId === this.quizData.topicId) {\n\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteQuiz;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Temporal fix\n\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t// Do REST call\n\t\t\trestCall( {\n\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\tdata: {\n\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\trest_course_id: this.quizData.courseId,\n\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\trest_topics: topics,\n\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\trest_quiz_reset: resetQuizAttempts,\n\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t},\n\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--loading' );\n\n\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\tthis.quizData.isCompleted = wantsToCompleteQuiz;\n\n\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t// Temporal fix\n\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t},\n\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t// Check response\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t// Set certificate\n\t\t\t\t\t\tthis.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t// Debug\n\t\t\t\t\tconsole.error( response );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-quiz__progress-actions--need-to-confirm' );\n\t}\n\n\tmarkAsComplete( childrenData ){\n\t\t// Remove certificate\n\t\tthis.setCertificate( childrenData.certificate_url );\n\n\t\t// Change the status class\n\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--not-completed' );\n\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.quiz.data( 'is-completed', true );\n\t\tthis.quizData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete( childrenData ){\n\t\t// Remove certificate\n\t\tthis.setCertificate();\n\n\t\t// Change the status class\n\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--completed' );\n\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.quiz.data( 'is-completed', false );\n\t\tthis.quizData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.quizData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.quizData.quizId;\n\t}\n}\n\nexport default ManageProgress;\n","import $ from 'jquery';\n\nimport {\n\tdestroyiCheck,\n\tformatNumber\n} from './utilities';\n\nclass BuyCourses {\n\tconstructor(){\n\t\t// Check if we have to invoke the methods\n\t\tif ( this.isBuyCourses() ){\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Get configuration\n\t\t\tthis.getConfiguration();\n\n\t\t\t// Destroy iCheck checkboxes\n\t\t\tdestroyiCheck();\n\n\t\t\t// Listen changes in the checkboxes\n\t\t\tthis.modifyCourses();\n\n\t\t\t// Listen changes to the quantity field\n\t\t\tthis.listenQuantityChanges();\n\n\t\t\t// Listen the form submission\n\t\t\tthis.listenFormSubmission();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tform:               $( '#uo-groups-buy-courses' ),\n\t\t\terrorNotice:        $( '#uo-groups-buy-course-error-notice' ),\n\t\t\tfield: {\n\t\t\t\tquantity:       $( '#uo-groups-buy-course-field-quantity' ),\n\t\t\t},\n\t\t\ttotals: {\n\t\t\t\tsubtotal:       $( '#uo-groups-buy-course-totals-subtotal' ),\n\t\t\t\tdiscount: {\n\t\t\t\t\tpercentage: $( '#uo-groups-buy-course-totals-discount-percentage' ),\n\t\t\t\t\ttotal:      $( '#uo-groups-buy-course-totals-discount' ),\n\t\t\t\t},\n\t\t\t\ttotal:          $( '#uo-groups-buy-course-totals-total' ),\n\t\t\t}\n\t\t}\n\t}\n\n\tgetConfiguration(){\n\t\t// Get bulk discount configuration\n\t\tlet bulkDiscountData = this.$elements.form.data( 'bulk-discount' );\n\t\t// Check if it's bulk discount is enabled\n\t\tlet bulkDiscountEnabled = bulkDiscountData.enabled == 'yes';\n\t\t// Check if there are discount groups\n\t\tbulkDiscountData.discounts = typeof bulkDiscountData.discounts !== 'undefined' ? bulkDiscountData.discounts : {};\n\t\t// Get discount groups\n\t\tlet bulkDiscountGroups = [];\n\t\t$.each( Object.values( bulkDiscountData.discounts ), ( index, group ) => {\n\t\t\tbulkDiscountGroups.push({\n\t\t\t\tminimumQuantity: parseInt( group.qty ),\n\t\t\t\tpercentage: parseFloat( group.percent )\n\t\t\t});\n\t\t});\n\n\t\t// Get configuration\n\t\tthis.config = {\n\t\t\tbulkDiscount: {\n\t\t\t\tenabled: bulkDiscountEnabled,\n\t\t\t\tgroups:  bulkDiscountGroups\n\t\t\t},\n\t\t\tformatPrice: {\n\t\t\t\ttemplate:          ULG_BuyCourses.formatPrice.template,\n\t\t\t\tnumberOfDecimals:  ULG_BuyCourses.formatPrice.numberOfDecimals,\n\t\t\t\tthousandSeparator: ULG_BuyCourses.formatPrice.thousandSeparator,\n\t\t\t\tdecimalSeparator:  ULG_BuyCourses.formatPrice.decimalSeparator,\n\t\t\t}\n\t\t}\n\n\t\t// Get totals\n\t\tthis.totals = {\n\t\t\tnumberOfSeats: 0,\n\t\t\tnumberOfStudents: 0,\n\t\t\tsubtotal: 0,\n\t\t\tdiscount: {\n\t\t\t\tpercentage: 0,\n\t\t\t\ttotal: 0\n\t\t\t},\n\t\t\ttotal: 0\n\t\t}\n\t}\n\n\tmodifyCourses(){\n\t\t// Listen changes to the checkboxes\n\t\tthis.$elements.form.on( 'change', '.uo-checkbox input', ( event ) => {\n\t\t\t// Get checkbox\n\t\t\tconst $checkbox = $( event.currentTarget );\n\n\t\t\t// Get row\n\t\t\tconst $row = $checkbox.closest( '.uo-groups-table-row' );\n\n\t\t\t// Toggle selected class\n\t\t\t$row.toggleClass( 'uo-groups-table-row--selected' );\n\n\t\t\t// Update totals\n\t\t\tthis.updateTotals();\n\t\t});\n\t}\n\n\tlistenFormSubmission(){\n\t\t// Listen form submission\n\t\tthis.$elements.form.on( 'submit', ( event ) => {\n\t\t\t// Validate\n\t\t\tconst validation = this.validate();\n\n\t\t\t// Show (or not) the error notice\n\t\t\tthis.errorNotice( ! validation.isValid, validation.message );\n\n\t\t\t// Check if it's not valid\n\t\t\tif ( ! validation.isValid ){\n\t\t\t\t// Prevent default\n\t\t\t\tevent.preventDefault();\n\t\t\t}\t\n\t\t});\n\t}\n\n\tlistenQuantityChanges(){\n\t\t// Listen quantity changes\n\t\tthis.$elements.field.quantity.on( 'input', () => {\n\t\t\t// Update totals\n\t\t\tthis.updateTotals();\n\t\t});\n\t}\n\n\tgetTotals(){\n\t\t// Get and update number of selected courses\n\t\tconst $selectedCourses = this.$elements.form.find( '.uo-checkbox input:checked' );\n\t\t// Update totals\n\t\tthis.totals.numberOfSeats = parseInt( this.$elements.field.quantity.val() );\n\t\t// Check if the number if valid\n\t\tthis.totals.numberOfSeats = isNaN( this.totals.numberOfSeats ) ? 1 : this.totals.numberOfSeats;\n\n\t\t// Get number of students\n\t\tlet numberOfStudents = this.$elements.field.quantity.val();\n\t\t// Update totals\n\t\tthis.totals.numberOfStudents = parseInt( numberOfStudents );\n\n\t\t// Get the number of selected courses\n\t\tthis.totals.numberOfCourses = $selectedCourses.length;\n\n\t\t// Get subtotal\n\t\tlet subtotal = numberOfStudents * $selectedCourses.toArray().reduce(( accumulator, course ) => {\n\t\t\t// Get jQuery object of the course\n\t\t\tconst $course = $( course );\n\n\t\t\t// Get price\n\t\t\tconst price = parseFloat( $course.data( 'price' ) );\n\n\t\t\t// Add price to the accumulator\n\t\t\treturn accumulator + price;\n\t\t}, 0 );\n\t\t// Update totals\n\t\tthis.totals.subtotal = subtotal;\n\n\t\t// Get discount\n\t\t// Get discount group\n\t\tconst discountGroup = this.getDiscountPercentage();\n\t\t// Get discount\n\t\tlet discount = -1 * subtotal * discountGroup.percentage / 100;\n\t\t// Update totals\n\t\tthis.totals.discount.percentage = discountGroup.percentage;\n\t\tthis.totals.discount.total = discount;\n\n\t\t// Get total\n\t\tlet total = subtotal + discount;\n\t\ttotal = total > 0 ? total : 0;\n\t\t// Update totals\n\t\tthis.totals.total = total;\n\t}\n\n\tgetDiscountPercentage(){\n\t\t// We will get what discount we have to apply\n\t\t// To do that, we're going to find the discount group\n\t\t// using the current number of selected groups, searching\n\t\t// for the group with the highest minimum\n\t\tlet discountGroup = {\n\t\t\tminimumQuantity: 0,\n\t\t\tpercentage: 0\n\t\t}\n\n\t\t// Check if the user has discount groups\n\t\tif ( this.config.bulkDiscount.enabled ){\n\t\t\t// Iterate groups\n\t\t\t$.each( this.config.bulkDiscount.groups, ( index, group ) => {\n\t\t\t\t// Check if the minimum is lower (or equal) than our number of seats\n\t\t\t\tif ( group.minimumQuantity <= this.totals.numberOfSeats ){\n\t\t\t\t\t// Save group\n\t\t\t\t\tdiscountGroup = group;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Return group\n\t\treturn discountGroup;\n\t}\n\n\tupdateTotals(){\n\t\t// Get totals\n\t\tthis.getTotals();\n\n\t\t// Update subtotal\n\t\tthis.$elements.totals.subtotal.html( this.formatPrice( this.totals.subtotal ) );\n\t\t\n\t\t// Update discount\n\t\t// If it's 0, remove percentage from the DOM\n\t\tif ( this.totals.discount.percentage == 0 ){\n\t\t\tthis.$elements.totals.discount.percentage.text( '' );\n\t\t}\n\t\t// Otherwise, add it\n\t\telse {\n\t\t\tthis.$elements.totals.discount.percentage.text( `${ this.totals.discount.percentage }% - ` );\n\t\t}\n\t\tthis.$elements.totals.discount.total.html( this.formatPrice( this.totals.discount.total ) );\n\n\t\t// Update total\n\t\tthis.$elements.totals.total.html( this.formatPrice( this.totals.total ) );\n\n\t\t// Add updated class\n\t\tthis.$elements.form.addClass( 'uo-groups-buy-courses--totals-updated' );\n\t\t// Remove class after 150ms\n\t\tsetTimeout(() => {\n\t\t\tthis.$elements.form.removeClass( 'uo-groups-buy-courses--totals-updated' );\n\t\t}, 150 );\n\t}\n\n\tvalidate(){\n\t\t// Default value\n\t\tlet response = {\n\t\t\tisValid: false,\n\t\t\tmessage: ''\n\t\t};\n\n\t\t// Check if there is at least one course selected\n\t\tif ( this.totals.numberOfSeats > 0 && this.totals.numberOfCourses > 0 ){\n\t\t\t// Update validation\n\t\t\tresponse.isValid = true;\n\t\t}\n\t\telse {\n\t\t\t// Otherwise, add message\n\t\t\tresponse.message = ULG_BuyCourses.i18n.selectAtLeastOne;\n\t\t}\n\n\t\t// Return response\n\t\treturn response;\n\t}\n\n\terrorNotice( hasError = false, message = '' ){\n\t\t// Check if we have to show or hide the notice\n\t\tif ( hasError ){\n\t\t\t// Show notice\n\t\t\tthis.$elements.errorNotice.show().html( message );\n\t\t}\n\t\telse {\n\t\t\t// Hide notice\n\t\t\tthis.$elements.errorNotice.hide();\n\t\t}\n\t}\n\n\tformatPrice( price ){\n\t\t// Get price format\n\t\tconst $price = $( this.config.formatPrice.template );\n\n\t\t// Replace dummy price with real price\n\t\t$price.html(( index, oldHtml ) => {\n\t\t\t// Get the number of wc_price( 0 )\n\t\t\tconst dummyPrice = formatNumber( 0, this.config.formatPrice.numberOfDecimals, this.config.formatPrice.decimalSeparator, this.config.formatPrice.thousandSeparator );\n\n\t\t\t// Format real price\n\t\t\tconst priceFormatted = formatNumber( price, this.config.formatPrice.numberOfDecimals, this.config.formatPrice.decimalSeparator, this.config.formatPrice.thousandSeparator );\n\n\t\t\t// Replace text\n\t\t\treturn oldHtml.replace( dummyPrice, priceFormatted );  \n\t\t});\n\n\t\t// Check if the price is negative\n\t\tif ( price < 0 ){\n\t\t\t// Add minus character\n\t\t\t$price.prepend( '-' );\n\t\t}\n\n\t\t// Return price jQuery element\n\t\treturn $price;\n\t}\n\n\tisBuyCourses(){\n\t\treturn $( '#uo-groups-buy-courses' ).length == 1 && typeof ULG_BuyCourses !== 'undefined';\n\t}\n}\n\nexport default BuyCourses;","import $ from 'jquery';\n\nclass CreateGroup {\n\tconstructor(){\n\t\t// Check if the page has the [uo_groups_create_group] \n\t\t// shortcode, or the respective Gutenberg block\n\t\tif ( this.isCreateGroup() ){\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Add multi-select pillbox to the\n\t\t\t// \"Group Courses\" field\n\t\t\tthis.addPillboxToGroupCourses();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\tcoursesList: $( '#ulg-create-group__courses-list' )\n\t\t}\n\t}\n\n\t/**\n\t * Add multi-select pillbox to the\n\t * \"Group Courses\" field\n\t */\n\taddPillboxToGroupCourses(){\n\t\tthis.$elements.coursesList.select2({\n\t\t\ttheme: 'default ulg-select2'\n\t\t});\n\t}\n\n\t/**\n\t * Check if the page has the [uo_groups_create_group] \n\t * shortcode, or the respective Gutenberg block\n\t */\n\tisCreateGroup(){\n\t\treturn $( '#ulg-create-group' ).length == 1;\n\t}\n}\n\nexport default CreateGroup;","import './js/define-main-object.js';\n\nimport './js/ulgm-rest-forms.js';\nimport './js/ulgm-assignments.js';\nimport './js/ulgm-essays.js';\nimport './js/ulgm-reporting.js';\nimport './js/front.js';\nimport './js/learndash_template_script.js';\nimport './js/uncanny-owl-groups-ui.js';\n\nimport GroupManagement from './js/group-management.js';\nimport GroupCourseReport from './js/group-course-report.js';\nimport CourseDashboard from './js/course-dashboard.js';\nimport ManageProgress from './js/manage-progress.js';\nimport BuyCourses from './js/buy-courses.js';\nimport CreateGroup from './js/create-group.js';\n\nimport './scss/main.scss';\n\n// Do on DOM ready\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tnew GroupManagement();\n\tnew GroupCourseReport();\n\tnew CourseDashboard();\n\tnew ManageProgress();\n\tnew BuyCourses();\n\tnew CreateGroup();\n});\n"],"names":["window","ulgmGroupManagement","jQuery","$","accountSwitch","length","attr","parent","hide","show","String","prototype","toHHMMSS","sec_numb","parseInt","this","hours","Math","floor","minutes","seconds","f1","f2","css","undefined","replace","document","ready","timer_el","timer_seconds","timer_button_el","cookie_key","cookie_name","cookie_timer_seconds","cookie","removeCookie","learndash_timer_var","setInterval","time_display","toString","html","clearInterval","trigger","sfwd_data","json","parseJSON","on","e","_this","addressValue","indexOf","groupLeaderCourseReportSetup","preventDefault","dataVars","essayUrl","ajax","method","data","url","root","beforeSend","xhr","setRequestHeader","nonce","success","response","essay","append","fail","alert","refId","quizId","userId","statistic_nonce","action","groupQuizReportSetup","statistic_action","ULGM_ManageProgress","post_data","content","type","ajaxurl","dataType","cache","error","jqXHR","textStatus","errorThrown","reply_data","remove","find","click","parents","next","toggle","transitionTimeout","Assignments","constructor","assignment_id","val","serialize","actionsAssignment","post_id","editAssignmentsData","saveAssignmentsData","mouseenter","clearTimeout","focusedRowActions","not","removeClass","addClass","mouseleave","setTimeout","uoTable","uoTableHidden","lessonId","groupId","courseId","status","elements","select","group","element","options","course","no_element","lesson","createTable","createTableHidden","addEvents","getAssignmentsData","$table","getElementById","columns","title","className","groupAssignments","localized","name","visible","columns_visibilities","student","first_name","last_name","author","orderable","points","assignedCourse","assignedlesson","comments","date","exportButtons","dataset","csv","push","extend","text","i18n","exportCSV","excel","exportExcel","tableVars","aLengthMenu","all","responsive","iDisplayLength","columnDefs","full","meta","style","selector","stateSave","dom","buttons","destroy","language","processing","search","searchPlaceholder","lengthMenu","info","infoEmpty","infoFiltered","infoPostFix","loadingRecords","zeroRecords","emptyTable","paginate","first","previous","last","aria","sortAscending","sortDescending","initComplete","s","d","approveAssignments","deleteAssignments","insertAfter","$filterContainer","addColumnsFilter","$searchBox","appendTo","columnIndex","column","isChecked","is","console","message","tableOrder","tableOrderByIndex","findIndex","columnData","ulgmAssignmentReportShortcode","table","orderBy","order","headerRows","colReorder","enable","fixedColumnsLeft","DataTable","fn","dataTable","ColReorder","warn","buttonCommon","exportOptions","id","node","matches","format","body","row","csvExport","isDataTable","flattenArray","array","remove_stats","flatArray","each","key","value","question","key2","value2","state","colFilter_container","sInstance","customizeColumns","hideCustomizeColumns","__this","aoColumns","sTitle","bVisible","addColumnCheckbox","oSavedState","eq","settings","init","label","column_key","is_visible","checkbox","checked","headers","header","current_check","is_checked","selectot","adjust","recalc","create_options","source","ids","map","Number","$this","select_option","$select","prop","__select_option","index","el","get","indeterminate","group_id","empty","options_course","courses_to_show","courseGrouplessons","removeAttr","course_id","lessons_to_show","relationships","lesson_id","tr","closest","child","isShown","rows","answer","isNormalInteger","str","n","spinner","i","loading","Array","join","postId","post_type","security","ajax_nonce","modal","fieldField","off","Essays","essay_id","input_essay_points","essay_points","parseFloat","min","max","isNaN","groupEssays","invalid_points_input","focus","actionsEssays","editEssaysData","saveEssaysData","quiz","ulgmEssayReportShortcode","loadOnRender","getEssaysData","getParam","results","RegExp","exec","location","decodeURIComponent","idColumn","question_text","assignedquiz","targets","log","draw","fallbackError","clone","filter","submit","options_quiz","reduce","accumulator","currentValue","$noResultsOption","isArray","current_quiz_id","group_quizzes","lesson_quizzes","course_quizzes","ommitted_group_quizzes","omitted_topic_quizzes","quizzes_to_show","Object","keys","values","hasOwnProperty","includes","concat","options_quizzes","quiz_id","tinymce","edId","tinyMCE","editors","save","Function","gm_modal_message","reportingTemplating","quizReport","select2","rowTemplate","itemTemplate","liTemplate","items","itemsEl","jpL","split","setItems","item","render","props","tok","populateCoursesDropDown","courseDropDown","group_courses","ulgmRestApiSetup","selectCourse","ID","post_title","$elements","filters","dispatchEvent","Event","initSelect2","forEach","$element","ulgmQuizReportShortcode","columnsVisibility","columnsConfig","entries","searchable","defaultContent","showCSVExportButton","showExcelExportButton","oInstance","api","col","configKey","addColumnCourseCheckbox","tableLanguage","every","addEventListener","event","setLoading","$dropdown","isLoading","setOptions","placeholder","coursePlaceholder","setAttribute","quizPlaceholder","clear","getQuizData","groupQuizReportSetupScoreType","dropdownSettings","innerHTML","noResults","classList","add","insertAdjacentHTML","option","$wrapper","removeAttribute","scoreType","reporting","groupLeaderId","getGroupCourses","getQueryVariable","createCourseDropDown","courses","createUserDropDown","users","posts","dropDown","post_count","noCourse","post","selectUser","noUsers","user","display_name","trunc","variable","vars","substring","pair","file_frame","restForms","wp","media","frames","button","multiple","attachment","toJSON","open","addFormSubmitEvents","wpColorPicker","err","makeAjaxCall","endPoint","restData","associatedForm","$error_container","uploadedUsers","uploaded_users","statusCode","youCantDoThat","href","encodeURIComponent","reload","test","slice","assign","origin","pathname","hash","call_function","function_vars","endpoint","documentElement","animate","scrollTop","offset","top","total_rows","entry","createElement","emailCol","statusCol","innerText","email","reason","appendChild","resultsDiv","completed","sendRestCall","selected_value","_currentTarget","currentTarget","onsubmit","checkValidity","fields","serializeArray","field","reportValidity","serializeObject","o","a","ResizeSensor","ElementQueries","cssStyleElement","allQueries","idToSelectorMapping","getEmSize","fontSize","getComputedStyle","convertToPx","numbers","units","clientWidth","clientHeight","vw","vh","chooser","SetupInformation","elementSize","actualValue","attrValues","attrValue","attrName","attributes","call","getBoundingClientRect","width","offsetWidth","height","offsetHeight","rect","round","getElementSize","property","mode","k","substr","setupElement","elementQueriesSetupInformation","elementQueriesSensor","queueQuery","getQuery","container","query","querySelectorAll","bind","$$","attachResponsiveImage","children","rules","sources","defaultImageId","lastActiveImage","loadedImages","tagName","toLowerCase","minWidth","getAttribute","src","rule","display","check","imageToDisplay","image","Image","onload","resizeSensorInstance","regex","attrRegex","extractQuery","match","smatch","attrs","attrMatch","readRules","j","selectorText","cssText","cssRules","styleSheet","defaultCssInjected","animationStart","target","styles","animationName","getPropertyValue","resizeSensor","getElementsByTagName","styleSheets","findResponsiveImages","findElementQueriesElements","update","instance","detach","listen","callback","navigator","userAgent","DOMLoadTimer","readyState","domLoaded","globalWindow","self","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","timer","forEachElement","elementsType","isCollectionTyped","Elements","setStyle","lastAnimationFrameForInvisibleCheck","EventQueue","q","ev","sizeInfo","newQueue","attachResizeEvent","resized","resizedAttached","dir","pointerEvents","position","left","right","bottom","overflow","zIndex","visibility","maxWidth","styleChild","transition","expand","expandChild","shrink","shrinkChild","computedStyle","dirty","rafId","size","lastWidth","lastHeight","initialHiddenCheck","reset","scrollLeft","resetSensor","onResized","onScroll","addEvent","cb","attachEvent","elem","contains","removeChild","MutationObserver","observer","mutations","addedNodes","observe","childList","subtree","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","getter","__esModule","definition","defineProperty","enumerable","obj","restCall","parameters","doing_rest","isDefined","onDone","onSuccess","onFail","isEmpty","isObject","formatNumber","amount","decimalCount","decimal","thousands","abs","toFixed","destroyiCheck","iCheck","progress_report","closest_group","direction","execCommand","slideToggle","group_leaders_checkboxes","btn_add_leader","unbind_click_outside","unbind_escape_button","$currentButton","dropdownDirection","$targetGroup","hasClass","has","ux_buttons","change","GroupManagement","isGroupManagement","EnrolledUsersTable","EmailUsers","groupManagementModal","modals","CustomEvent","editor","initialize","min_height","formats","alignleft","textAlign","classes","aligncenter","alignright","strikethrough","inline","toolbar1","plugins","quicktags","addGroupManagementEvents","openModal","parseCsv","modalContainer","downloadCsv","blob","Blob","csvDataString","saveAs","fileName","modalId","x","is_editable","input","messageContainer","reader","FileReader","ulgmGroupManagementLocalized","file_api_is_not_supported","file","files","csvText","pop","select_a_csv","readAsText","result","csv_file_error","csvArray","csvHead","shift","delimiter","incompatible_format","emailIndex","verifyRequiredHeader","not_contains_email","not_contains_first","not_contains_last","newArray","mapper","v","verifyEmptyRows","must_contain_email","choose_file","headerArray","columnsAmount","handleOpenDialog","handleFieldUpdates","$groupIDHiddenField","$coursesDropdown","statuses","$courseStatuses","include_children","$includeChildrenCheckbox","updateUserCount","$userCountCounter","fetch","param","emailUsersFormData","then","userCount","$checkbox","hasEnrolledUsersTable","getElements","getData","addSelect2","createDataTables","listenCheckboxToSelectAll","listenCheckboxesChanges","updateDataOnModal","firstLastNamesRequired","selectEl","enrolledUsersTableDT","enrolledLeaderTableDT","removeUsersButton","removeLeadersButton","sendEmailsButton","numberOfUsers","sendEmailsModal","sendEmailsField","removeUsersField","emailUsersCoursesDropdown","select2Options","dropdownParent","parentNode","emailUsersCourses","optionAllCoursesValue","hadWeChangedCoursesValues","selectedCourses","latestChangedOption","courseID","wasLastOptionAdded","isOptionAllCoursesSelected","canRemoveUsers","canRemoveUsersAnytime","ulgmGroupLeaderData","selectedUsers","selectedLeaders","ext","b","textA","textContent","trim","textB","localeCompare","userColumns","enrolled_user_columns","populate_management_features","unshift","check_all","filename","filenameParts","groupName","enrolledUsersOrder","enrolledUsersOrderByIndex","ulgmGroupManagementShortcode","tables","enrolledUsers","userTable","userTableVars","enrolled_user_data","searchDelay","pageLength","serverSide","createdRow","dataIndex","status_id","$fakeExportCSV","$fakeExportExcel","$realExportCSV","querySelector","createEvent","initEvent","$realExportExcel","leaderColumns","enrolled_leader_columns","groupLeadersOrder","groupLeadersOrderByIndex","groupLeaders","leaderTable","leaderTableVars","enrolled_leader_data","checkAllEl","$allCheckboxes","updateSelectedUsers","evaluateRemoveUsersButtonVisiblity","evaluateRemoveLeadersButtonVisiblity","evaluateSendEmailsButtonVisiblity","$allUserCheckboxes","$allLeaderCheckboxes","allCheckedCheckboxes","leaders","$checkedCheckboxes","$row","progressIsNotStarted","showRemoveUsersButton","showRemoveLeadersButton","groupLeaderIds","JSON","stringify","userIds","firstnameLastnameRequired","requiredSelectors","$emailField","func","lastCall","emailValue","$rowElements","firstName","lastName","emailAddress","args","arguments","apply","GroupCourseReport","isCourseReport","CourseReportTable","restPopulateTable","courseReport","groupID","that","ulgmCourseReportShortcode","shouldAddTranscriptColumn","tableColumns","transcript_page_url","columnKey","columnName","transcriptPageURL","user_id","details","courseNamePrefix","$courseId","courseName","getUrlParameter","populateReportTable","user_course_data","sParam","sParameterName","sURLVariables","require","CourseDashboard","hasDashboard","defineSettings","createCourses","form","selects","slideToggleDuration","$courses","Course","expandAll","collapseAll","lessons","topic","elementType","$containers","$container","dashboardSettings","defineCssClasses","getCourseData","toggleCourseContent","createLessons","courseData","hasLessons","hasQuizzes","hasCertificate","cssClasses","collapsed","collapsing","expanding","expanded","toggleBtn","isCollapsed","setToggleClass","slideDown","slideUp","$lessons","Lesson","$quizzesContainers","Quizzes","getLessonData","toggleLessonContent","createTopics","lessonData","availableOn","isCompleted","isAvailable","hasTopics","$topics","Topic","getTopicData","toggleTopicContent","topicData","topicId","ManageProgress","isManageProgress","canManageProgress","setSettings","listenProgressChangesOnCourses","$course","createChildren","listenCheckboxChanges","confirmationVisible","actions","cancel","progress","number","bar","quizzes","topics","rightContainer","$lesson","$quiz","Quiz","$topic","percentage","certificateUrl","$certificateButton","certificate","prepend","wantsToCompleteCourse","quizData","topic_quizzes","topic_quizzes_string","_topic","_topic_id","restUrl","rest_user_id","rest_course_id","rest_lessons","rest_topics","rest_quizzes","postNonce","setProgress","setCertificate","certificate_url","completeCourseItems","course_completed_children","confirmChanges","completedChildren","completedChildrenObj","shouldBeCompleted","getTheId","markAsNotComplete","markAsComplete","hasChildren","wantsToCompleteLesson","wantsToCompleteTopic","dataAction","wantsToCompleteQuiz","resetQuizAttempts","rest_quiz_reset","childrenData","BuyCourses","isBuyCourses","getConfiguration","modifyCourses","listenQuantityChanges","listenFormSubmission","errorNotice","quantity","totals","subtotal","discount","total","bulkDiscountData","bulkDiscountEnabled","enabled","discounts","bulkDiscountGroups","minimumQuantity","qty","percent","config","bulkDiscount","groups","formatPrice","template","ULG_BuyCourses","numberOfDecimals","thousandSeparator","decimalSeparator","numberOfSeats","numberOfStudents","toggleClass","updateTotals","validation","validate","isValid","$selectedCourses","numberOfCourses","toArray","discountGroup","getDiscountPercentage","getTotals","selectAtLeastOne","hasError","price","$price","oldHtml","dummyPrice","priceFormatted","CreateGroup","isCreateGroup","addPillboxToGroupCourses","coursesList","theme"],"sourceRoot":""}